"use strict";/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var bs=Object.create;var ar=Object.defineProperty;var ws=Object.getOwnPropertyDescriptor;var Cs=Object.getOwnPropertyNames;var Es=Object.getPrototypeOf,_s=Object.prototype.hasOwnProperty;var Ft=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports),Ss=(n,t)=>{for(var e in t)ar(n,e,{get:t[e],enumerable:!0})},xu=(n,t,e,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Cs(t))!_s.call(n,i)&&i!==e&&ar(n,i,{get:()=>t[i],enumerable:!(r=ws(t,i))||r.enumerable});return n};var Cn=(n,t,e)=>(e=n!=null?bs(Es(n)):{},xu(t||!n||!n.__esModule?ar(e,"default",{value:n,enumerable:!0}):e,n)),xs=n=>xu(ar({},"__esModule",{value:!0}),n);var lr=Ft(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});Jt.OPDUtilsObjectTraversalError=Jt.OPDUtilsParsingError=void 0;var ui=class extends Error{constructor(t){super(t)}};Jt.OPDUtilsParsingError=ui;var oi=class extends Error{constructor(t){super(t)}};Jt.OPDUtilsObjectTraversalError=oi});var En=Ft(Ne=>{"use strict";Object.defineProperty(Ne,"__esModule",{value:!0});Ne.validatePath=Ne.parsePath=Ne.traverseObjectByPath=Ne.traverseObjectToParent=Ne.traverseObject=void 0;var ht=lr();function ks(n,t){let e=si(n);return ai(e,t)}Ne.traverseObject=ks;function Ts(n,t){var e;let r=si(n);if(r[0]==="")throw new ht.OPDUtilsObjectTraversalError("can not traverse to parent on self reference");let i=r.slice(0,-1),u=(e=r.at(-1))!==null&&e!==void 0?e:"",o=ai(i,t);return{parent:{key:i,value:o},child:{key:u,value:o[u]}}}Ne.traverseObjectToParent=Ts;function ai(n,t){for(let e of n){if(e==="")return t;if(t===void 0)return;t=t[e]}return t}Ne.traverseObjectByPath=ai;function si(n){return n=n.replace(/'/g,'"'),Mu(n),n.split(".").map(t=>t.split("[").map(e=>(e.endsWith("]")&&(e=e.slice(0,-1)),e.startsWith('"')&&e.endsWith('"')&&(e=e.slice(1,-1)),e))).flat()}Ne.parsePath=si;function Mu(n){let t="0123456789",e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=!1,i=!1;for(let u=0;u<n.length;u++){let o=n[u],a=n[u+1];if(o==="."){if(u===0)throw new ht.OPDUtilsObjectTraversalError(`Invalid character '${o}' at position ${u} in "${n}", path may not start with '.'`);if(!(e.includes(a)||a==="_"||a==="$"))throw new ht.OPDUtilsObjectTraversalError(`Invalid character '${a}' at position ${u+1} in "${n}", expected a letter, '_' or '$' to follow '.'`)}if(o==="[")if(t.includes(a)){i=!0;continue}else if(a==='"'){if(n[u+2]==='"')throw new ht.OPDUtilsObjectTraversalError(`Invalid character '${n[u+2]}' at position ${u+2} in "${n}", the string between the quotation-marks may not be empty`);r=!0,u+=1;continue}else throw new ht.OPDUtilsObjectTraversalError(`Invalid character '${a}' at position ${u+1} in "${n}", expected number or '"' to follow a '['`);if(r&&o==='"')if(a==="]"){r=!1,u+=1;continue}else throw new ht.OPDUtilsObjectTraversalError(`Invalid character '${a}' at position ${u+1} in "${n}", expected ']' to follow a '"'`);if(i&&o==="]"){i=!1;continue}if(r&&(o==="."||o==="]"||o==="["))throw new ht.OPDUtilsObjectTraversalError(`Invalid character '${o}' at position ${u} in "${n}"`);if(i&&!t.includes(o))throw new ht.OPDUtilsObjectTraversalError(`Invalid character '${o}' at position ${u} in "${n}", number expected inside of brackets`);if(!i&&!r&&o==="]")throw new ht.OPDUtilsObjectTraversalError(`Invalid character '${o}' at position ${u} in "${n}", expected '[' to proceed`)}}Ne.validatePath=Mu});var za=Ft(ot=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});require("obsidian");var fl=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Pe={};Object.defineProperty(Pe,"__esModule",{value:!0});function go(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function ut(n,t,e){return t&&go(n.prototype,t),e&&go(n,e),n}function P(){return P=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},P.apply(this,arguments)}function je(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n,Wn(n,t)}function Ri(n){return Ri=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ri(n)}function Wn(n,t){return Wn=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Wn(n,t)}function ml(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Vr(n,t,e){return ml()?Vr=Reflect.construct:Vr=function(i,u,o){var a=[null];a.push.apply(a,u);var s=Function.bind.apply(i,a),l=new s;return o&&Wn(l,o.prototype),l},Vr.apply(null,arguments)}function hl(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function Pi(n){var t=typeof Map=="function"?new Map:void 0;return Pi=function(r){if(r===null||!hl(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t!="undefined"){if(t.has(r))return t.get(r);t.set(r,i)}function i(){return Vr(r,arguments,Ri(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Wn(i,r)},Pi(n)}function Uo(n,t){if(n==null)return{};var e={},r=Object.keys(n),i,u;for(u=0;u<r.length;u++)i=r[u],!(t.indexOf(i)>=0)&&(e[i]=n[i]);return e}function pl(n,t){if(!!n){if(typeof n=="string")return Do(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Do(n,t)}}function Do(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function _t(n,t){var e=typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(e)return(e=e.call(n)).next.bind(e);if(Array.isArray(n)||(e=pl(n))||t&&n&&typeof n.length=="number"){e&&(n=e);var r=0;return function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Lt=function(n){je(t,n);function t(){return n.apply(this,arguments)||this}return t}(Pi(Error)),gl=function(n){je(t,n);function t(e){return n.call(this,"Invalid DateTime: "+e.toMessage())||this}return t}(Lt),Dl=function(n){je(t,n);function t(e){return n.call(this,"Invalid Interval: "+e.toMessage())||this}return t}(Lt),vl=function(n){je(t,n);function t(e){return n.call(this,"Invalid Duration: "+e.toMessage())||this}return t}(Lt),Rn=function(n){je(t,n);function t(){return n.apply(this,arguments)||this}return t}(Lt),zo=function(n){je(t,n);function t(e){return n.call(this,"Invalid unit "+e)||this}return t}(Lt),Le=function(n){je(t,n);function t(){return n.apply(this,arguments)||this}return t}(Lt),wt=function(n){je(t,n);function t(){return n.call(this,"Zone is an abstract class")||this}return t}(Lt),x="numeric",Ke="short",Ae="long",ji={year:x,month:x,day:x},Zo={year:x,month:Ke,day:x},yl={year:x,month:Ke,day:x,weekday:Ke},Go={year:x,month:Ae,day:x},Yo={year:x,month:Ae,day:x,weekday:Ae},Jo={hour:x,minute:x},Qo={hour:x,minute:x,second:x},Ko={hour:x,minute:x,second:x,timeZoneName:Ke},Xo={hour:x,minute:x,second:x,timeZoneName:Ae},ea={hour:x,minute:x,hourCycle:"h23"},ta={hour:x,minute:x,second:x,hourCycle:"h23"},na={hour:x,minute:x,second:x,hourCycle:"h23",timeZoneName:Ke},ra={hour:x,minute:x,second:x,hourCycle:"h23",timeZoneName:Ae},ia={year:x,month:x,day:x,hour:x,minute:x},ua={year:x,month:x,day:x,hour:x,minute:x,second:x},oa={year:x,month:Ke,day:x,hour:x,minute:x},aa={year:x,month:Ke,day:x,hour:x,minute:x,second:x},Fl={year:x,month:Ke,day:x,weekday:Ke,hour:x,minute:x},sa={year:x,month:Ae,day:x,hour:x,minute:x,timeZoneName:Ke},la={year:x,month:Ae,day:x,hour:x,minute:x,second:x,timeZoneName:Ke},ca={year:x,month:Ae,day:x,weekday:Ae,hour:x,minute:x,timeZoneName:Ae},da={year:x,month:Ae,day:x,weekday:Ae,hour:x,minute:x,second:x,timeZoneName:Ae};function q(n){return typeof n=="undefined"}function Vt(n){return typeof n=="number"}function Wr(n){return typeof n=="number"&&n%1===0}function bl(n){return typeof n=="string"}function wl(n){return Object.prototype.toString.call(n)==="[object Date]"}function fa(){try{return typeof Intl!="undefined"&&!!Intl.RelativeTimeFormat}catch(n){return!1}}function Cl(n){return Array.isArray(n)?n:[n]}function vo(n,t,e){if(n.length!==0)return n.reduce(function(r,i){var u=[t(i),i];return r&&e(r[0],u[0])===r[0]?r:u},null)[1]}function El(n,t){return t.reduce(function(e,r){return e[r]=n[r],e},{})}function cn(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function vt(n,t,e){return Wr(n)&&n>=t&&n<=e}function _l(n,t){return n-t*Math.floor(n/t)}function ce(n,t){t===void 0&&(t=2);var e=n<0,r;return e?r="-"+(""+-n).padStart(t,"0"):r=(""+n).padStart(t,"0"),r}function Ct(n){if(!(q(n)||n===null||n===""))return parseInt(n,10)}function At(n){if(!(q(n)||n===null||n===""))return parseFloat(n)}function Ki(n){if(!(q(n)||n===null||n==="")){var t=parseFloat("0."+n)*1e3;return Math.floor(t)}}function Xi(n,t,e){e===void 0&&(e=!1);var r=Math.pow(10,t),i=e?Math.trunc:Math.round;return i(n*r)/r}function Yn(n){return n%4===0&&(n%100!==0||n%400===0)}function $n(n){return Yn(n)?366:365}function Pr(n,t){var e=_l(t-1,12)+1,r=n+(t-e)/12;return e===2?Yn(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][e-1]}function eu(n){var t=Date.UTC(n.year,n.month-1,n.day,n.hour,n.minute,n.second,n.millisecond);return n.year<100&&n.year>=0&&(t=new Date(t),t.setUTCFullYear(t.getUTCFullYear()-1900)),+t}function jr(n){var t=(n+Math.floor(n/4)-Math.floor(n/100)+Math.floor(n/400))%7,e=n-1,r=(e+Math.floor(e/4)-Math.floor(e/100)+Math.floor(e/400))%7;return t===4||r===3?53:52}function $i(n){return n>99?n:n>60?1900+n:2e3+n}function ma(n,t,e,r){r===void 0&&(r=null);var i=new Date(n),u={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(u.timeZone=r);var o=P({timeZoneName:t},u),a=new Intl.DateTimeFormat(e,o).formatToParts(i).find(function(s){return s.type.toLowerCase()==="timezonename"});return a?a.value:null}function Ur(n,t){var e=parseInt(n,10);Number.isNaN(e)&&(e=0);var r=parseInt(t,10)||0,i=e<0||Object.is(e,-0)?-r:r;return e*60+i}function ha(n){var t=Number(n);if(typeof n=="boolean"||n===""||Number.isNaN(t))throw new Le("Invalid unit value "+n);return t}function $r(n,t){var e={};for(var r in n)if(cn(n,r)){var i=n[r];if(i==null)continue;e[t(r)]=ha(i)}return e}function qn(n,t){var e=Math.trunc(Math.abs(n/60)),r=Math.trunc(Math.abs(n%60)),i=n>=0?"+":"-";switch(t){case"short":return""+i+ce(e,2)+":"+ce(r,2);case"narrow":return""+i+e+(r>0?":"+r:"");case"techie":return""+i+ce(e,2)+ce(r,2);default:throw new RangeError("Value format "+t+" is out of range for property format")}}function zr(n){return El(n,["hour","minute","second","millisecond"])}var pa=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,Sl=["January","February","March","April","May","June","July","August","September","October","November","December"],ga=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],xl=["J","F","M","A","M","J","J","A","S","O","N","D"];function Da(n){switch(n){case"narrow":return[].concat(xl);case"short":return[].concat(ga);case"long":return[].concat(Sl);case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var va=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],ya=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],kl=["M","T","W","T","F","S","S"];function Fa(n){switch(n){case"narrow":return[].concat(kl);case"short":return[].concat(ya);case"long":return[].concat(va);case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var ba=["AM","PM"],Tl=["Before Christ","Anno Domini"],Ml=["BC","AD"],Ol=["B","A"];function wa(n){switch(n){case"narrow":return[].concat(Ol);case"short":return[].concat(Ml);case"long":return[].concat(Tl);default:return null}}function Il(n){return ba[n.hour<12?0:1]}function Al(n,t){return Fa(t)[n.weekday-1]}function Bl(n,t){return Da(t)[n.month-1]}function Nl(n,t){return wa(t)[n.year<0?0:1]}function Vl(n,t,e,r){e===void 0&&(e="always"),r===void 0&&(r=!1);var i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},u=["hours","minutes","seconds"].indexOf(n)===-1;if(e==="auto"&&u){var o=n==="days";switch(t){case 1:return o?"tomorrow":"next "+i[n][0];case-1:return o?"yesterday":"last "+i[n][0];case 0:return o?"today":"this "+i[n][0]}}var a=Object.is(t,-0)||t<0,s=Math.abs(t),l=s===1,h=i[n],d=r?l?h[1]:h[2]||h[1]:l?i[n][0]:n;return a?s+" "+d+" ago":"in "+s+" "+d}function yo(n,t){for(var e="",r=_t(n),i;!(i=r()).done;){var u=i.value;u.literal?e+=u.val:e+=t(u.val)}return e}var Ll={D:ji,DD:Zo,DDD:Go,DDDD:Yo,t:Jo,tt:Qo,ttt:Ko,tttt:Xo,T:ea,TT:ta,TTT:na,TTTT:ra,f:ia,ff:oa,fff:sa,ffff:ca,F:ua,FF:aa,FFF:la,FFFF:da},yt=function(){n.create=function(r,i){return i===void 0&&(i={}),new n(r,i)},n.parseFormat=function(r){for(var i=null,u="",o=!1,a=[],s=0;s<r.length;s++){var l=r.charAt(s);l==="'"?(u.length>0&&a.push({literal:o,val:u}),i=null,u="",o=!o):o||l===i?u+=l:(u.length>0&&a.push({literal:!1,val:u}),u=l,i=l)}return u.length>0&&a.push({literal:o,val:u}),a},n.macroTokenToFormatOpts=function(r){return Ll[r]};function n(e,r){this.opts=r,this.loc=e,this.systemLoc=null}var t=n.prototype;return t.formatWithSystemDefault=function(r,i){this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem());var u=this.systemLoc.dtFormatter(r,P({},this.opts,i));return u.format()},t.formatDateTime=function(r,i){i===void 0&&(i={});var u=this.loc.dtFormatter(r,P({},this.opts,i));return u.format()},t.formatDateTimeParts=function(r,i){i===void 0&&(i={});var u=this.loc.dtFormatter(r,P({},this.opts,i));return u.formatToParts()},t.resolvedOptions=function(r,i){i===void 0&&(i={});var u=this.loc.dtFormatter(r,P({},this.opts,i));return u.resolvedOptions()},t.num=function(r,i){if(i===void 0&&(i=0),this.opts.forceSimple)return ce(r,i);var u=P({},this.opts);return i>0&&(u.padTo=i),this.loc.numberFormatter(u).format(r)},t.formatDateTimeFromString=function(r,i){var u=this,o=this.loc.listingMode()==="en",a=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=function(C,L){return u.loc.extract(r,C,L)},l=function(C){return r.isOffsetFixed&&r.offset===0&&C.allowZ?"Z":r.isValid?r.zone.formatOffset(r.ts,C.format):""},h=function(){return o?Il(r):s({hour:"numeric",hourCycle:"h12"},"dayperiod")},d=function(C,L){return o?Bl(r,C):s(L?{month:C}:{month:C,day:"numeric"},"month")},f=function(C,L){return o?Al(r,C):s(L?{weekday:C}:{weekday:C,month:"long",day:"numeric"},"weekday")},g=function(C){var L=n.macroTokenToFormatOpts(C);return L?u.formatWithSystemDefault(r,L):C},v=function(C){return o?Nl(r,C):s({era:C},"era")},F=function(C){switch(C){case"S":return u.num(r.millisecond);case"u":case"SSS":return u.num(r.millisecond,3);case"s":return u.num(r.second);case"ss":return u.num(r.second,2);case"uu":return u.num(Math.floor(r.millisecond/10),2);case"uuu":return u.num(Math.floor(r.millisecond/100));case"m":return u.num(r.minute);case"mm":return u.num(r.minute,2);case"h":return u.num(r.hour%12===0?12:r.hour%12);case"hh":return u.num(r.hour%12===0?12:r.hour%12,2);case"H":return u.num(r.hour);case"HH":return u.num(r.hour,2);case"Z":return l({format:"narrow",allowZ:u.opts.allowZ});case"ZZ":return l({format:"short",allowZ:u.opts.allowZ});case"ZZZ":return l({format:"techie",allowZ:u.opts.allowZ});case"ZZZZ":return r.zone.offsetName(r.ts,{format:"short",locale:u.loc.locale});case"ZZZZZ":return r.zone.offsetName(r.ts,{format:"long",locale:u.loc.locale});case"z":return r.zoneName;case"a":return h();case"d":return a?s({day:"numeric"},"day"):u.num(r.day);case"dd":return a?s({day:"2-digit"},"day"):u.num(r.day,2);case"c":return u.num(r.weekday);case"ccc":return f("short",!0);case"cccc":return f("long",!0);case"ccccc":return f("narrow",!0);case"E":return u.num(r.weekday);case"EEE":return f("short",!1);case"EEEE":return f("long",!1);case"EEEEE":return f("narrow",!1);case"L":return a?s({month:"numeric",day:"numeric"},"month"):u.num(r.month);case"LL":return a?s({month:"2-digit",day:"numeric"},"month"):u.num(r.month,2);case"LLL":return d("short",!0);case"LLLL":return d("long",!0);case"LLLLL":return d("narrow",!0);case"M":return a?s({month:"numeric"},"month"):u.num(r.month);case"MM":return a?s({month:"2-digit"},"month"):u.num(r.month,2);case"MMM":return d("short",!1);case"MMMM":return d("long",!1);case"MMMMM":return d("narrow",!1);case"y":return a?s({year:"numeric"},"year"):u.num(r.year);case"yy":return a?s({year:"2-digit"},"year"):u.num(r.year.toString().slice(-2),2);case"yyyy":return a?s({year:"numeric"},"year"):u.num(r.year,4);case"yyyyyy":return a?s({year:"numeric"},"year"):u.num(r.year,6);case"G":return v("short");case"GG":return v("long");case"GGGGG":return v("narrow");case"kk":return u.num(r.weekYear.toString().slice(-2),2);case"kkkk":return u.num(r.weekYear,4);case"W":return u.num(r.weekNumber);case"WW":return u.num(r.weekNumber,2);case"o":return u.num(r.ordinal);case"ooo":return u.num(r.ordinal,3);case"q":return u.num(r.quarter);case"qq":return u.num(r.quarter,2);case"X":return u.num(Math.floor(r.ts/1e3));case"x":return u.num(r.ts);default:return g(C)}};return yo(n.parseFormat(i),F)},t.formatDurationFromString=function(r,i){var u=this,o=function(f){switch(f[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},a=function(f){return function(g){var v=o(g);return v?u.num(f.get(v),g.length):g}},s=n.parseFormat(i),l=s.reduce(function(d,f){var g=f.literal,v=f.val;return g?d:d.concat(v)},[]),h=r.shiftTo.apply(r,l.map(o).filter(function(d){return d}));return yo(s,a(h))},n}(),Je=function(){function n(e,r){this.reason=e,this.explanation=r}var t=n.prototype;return t.toMessage=function(){return this.explanation?this.reason+": "+this.explanation:this.reason},n}(),dn=function(){function n(){}var t=n.prototype;return t.offsetName=function(r,i){throw new wt},t.formatOffset=function(r,i){throw new wt},t.offset=function(r){throw new wt},t.equals=function(r){throw new wt},ut(n,[{key:"type",get:function(){throw new wt}},{key:"name",get:function(){throw new wt}},{key:"ianaName",get:function(){return this.name}},{key:"isUniversal",get:function(){throw new wt}},{key:"isValid",get:function(){throw new wt}}]),n}(),Ti=null,Ca=function(n){je(t,n);function t(){return n.apply(this,arguments)||this}var e=t.prototype;return e.offsetName=function(i,u){var o=u.format,a=u.locale;return ma(i,o,a)},e.formatOffset=function(i,u){return qn(this.offset(i),u)},e.offset=function(i){return-new Date(i).getTimezoneOffset()},e.equals=function(i){return i.type==="system"},ut(t,[{key:"type",get:function(){return"system"}},{key:"name",get:function(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!0}}],[{key:"instance",get:function(){return Ti===null&&(Ti=new t),Ti}}]),t}(dn),Lr={};function Rl(n){return Lr[n]||(Lr[n]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:n,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Lr[n]}var Pl={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function jl(n,t){var e=n.format(t).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(e),i=r[1],u=r[2],o=r[3],a=r[4],s=r[5],l=r[6],h=r[7];return[o,i,u,a,s,l,h]}function $l(n,t){for(var e=n.formatToParts(t),r=[],i=0;i<e.length;i++){var u=e[i],o=u.type,a=u.value,s=Pl[o];o==="era"?r[s]=a:q(s)||(r[s]=parseInt(a,10))}return r}var Ir={},Rt=function(n){je(t,n),t.create=function(i){return Ir[i]||(Ir[i]=new t(i)),Ir[i]},t.resetCache=function(){Ir={},Lr={}},t.isValidSpecifier=function(i){return this.isValidZone(i)},t.isValidZone=function(i){if(!i)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:i}).format(),!0}catch(u){return!1}};function t(r){var i;return i=n.call(this)||this,i.zoneName=r,i.valid=t.isValidZone(r),i}var e=t.prototype;return e.offsetName=function(i,u){var o=u.format,a=u.locale;return ma(i,o,a,this.name)},e.formatOffset=function(i,u){return qn(this.offset(i),u)},e.offset=function(i){var u=new Date(i);if(isNaN(u))return NaN;var o=Rl(this.name),a=o.formatToParts?$l(o,u):jl(o,u),s=a[0],l=a[1],h=a[2],d=a[3],f=a[4],g=a[5],v=a[6];d==="BC"&&(s=-Math.abs(s)+1);var F=f===24?0:f,S=eu({year:s,month:l,day:h,hour:F,minute:g,second:v,millisecond:0}),C=+u,L=C%1e3;return C-=L>=0?L:1e3+L,(S-C)/(60*1e3)},e.equals=function(i){return i.type==="iana"&&i.name===this.name},ut(t,[{key:"type",get:function(){return"iana"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return this.valid}}]),t}(dn),Mi=null,Qe=function(n){je(t,n),t.instance=function(i){return i===0?t.utcInstance:new t(i)},t.parseSpecifier=function(i){if(i){var u=i.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(u)return new t(Ur(u[1],u[2]))}return null};function t(r){var i;return i=n.call(this)||this,i.fixed=r,i}var e=t.prototype;return e.offsetName=function(){return this.name},e.formatOffset=function(i,u){return qn(this.fixed,u)},e.offset=function(){return this.fixed},e.equals=function(i){return i.type==="fixed"&&i.fixed===this.fixed},ut(t,[{key:"type",get:function(){return"fixed"}},{key:"name",get:function(){return this.fixed===0?"UTC":"UTC"+qn(this.fixed,"narrow")}},{key:"ianaName",get:function(){return this.fixed===0?"Etc/UTC":"Etc/GMT"+qn(-this.fixed,"narrow")}},{key:"isUniversal",get:function(){return!0}},{key:"isValid",get:function(){return!0}}],[{key:"utcInstance",get:function(){return Mi===null&&(Mi=new t(0)),Mi}}]),t}(dn),Ea=function(n){je(t,n);function t(r){var i;return i=n.call(this)||this,i.zoneName=r,i}var e=t.prototype;return e.offsetName=function(){return null},e.formatOffset=function(){return""},e.offset=function(){return NaN},e.equals=function(){return!1},ut(t,[{key:"type",get:function(){return"invalid"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!1}}]),t}(dn);function Et(n,t){if(q(n)||n===null)return t;if(n instanceof dn)return n;if(bl(n)){var e=n.toLowerCase();return e==="local"||e==="system"?t:e==="utc"||e==="gmt"?Qe.utcInstance:Qe.parseSpecifier(e)||Rt.create(n)}else return Vt(n)?Qe.instance(n):typeof n=="object"&&n.offset&&typeof n.offset=="number"?n:new Ea(n)}var Fo=function(){return Date.now()},bo="system",wo=null,Co=null,Eo=null,_o,le=function(){function n(){}return n.resetCaches=function(){Fe.resetCache(),Rt.resetCache()},ut(n,null,[{key:"now",get:function(){return Fo},set:function(e){Fo=e}},{key:"defaultZone",get:function(){return Et(bo,Ca.instance)},set:function(e){bo=e}},{key:"defaultLocale",get:function(){return wo},set:function(e){wo=e}},{key:"defaultNumberingSystem",get:function(){return Co},set:function(e){Co=e}},{key:"defaultOutputCalendar",get:function(){return Eo},set:function(e){Eo=e}},{key:"throwOnInvalid",get:function(){return _o},set:function(e){_o=e}}]),n}(),ql=["base"],Hl=["padTo","floor"],So={};function Wl(n,t){t===void 0&&(t={});var e=JSON.stringify([n,t]),r=So[e];return r||(r=new Intl.ListFormat(n,t),So[e]=r),r}var qi={};function Hi(n,t){t===void 0&&(t={});var e=JSON.stringify([n,t]),r=qi[e];return r||(r=new Intl.DateTimeFormat(n,t),qi[e]=r),r}var Wi={};function Ul(n,t){t===void 0&&(t={});var e=JSON.stringify([n,t]),r=Wi[e];return r||(r=new Intl.NumberFormat(n,t),Wi[e]=r),r}var Ui={};function zl(n,t){t===void 0&&(t={});var e=t;e.base;var r=Uo(e,ql),i=JSON.stringify([n,r]),u=Ui[i];return u||(u=new Intl.RelativeTimeFormat(n,t),Ui[i]=u),u}var Pn=null;function Zl(){return Pn||(Pn=new Intl.DateTimeFormat().resolvedOptions().locale,Pn)}function Gl(n){var t=n.indexOf("-u-");if(t===-1)return[n];var e,r=n.substring(0,t);try{e=Hi(n).resolvedOptions()}catch(a){e=Hi(r).resolvedOptions()}var i=e,u=i.numberingSystem,o=i.calendar;return[r,u,o]}function Yl(n,t,e){return(e||t)&&(n+="-u",e&&(n+="-ca-"+e),t&&(n+="-nu-"+t)),n}function Jl(n){for(var t=[],e=1;e<=12;e++){var r=de.utc(2016,e,1);t.push(n(r))}return t}function Ql(n){for(var t=[],e=1;e<=7;e++){var r=de.utc(2016,11,13+e);t.push(n(r))}return t}function Ar(n,t,e,r,i){var u=n.listingMode(e);return u==="error"?null:u==="en"?r(t):i(t)}function Kl(n){return n.numberingSystem&&n.numberingSystem!=="latn"?!1:n.numberingSystem==="latn"||!n.locale||n.locale.startsWith("en")||new Intl.DateTimeFormat(n.intl).resolvedOptions().numberingSystem==="latn"}var Xl=function(){function n(e,r,i){this.padTo=i.padTo||0,this.floor=i.floor||!1,i.padTo,i.floor;var u=Uo(i,Hl);if(!r||Object.keys(u).length>0){var o=P({useGrouping:!1},i);i.padTo>0&&(o.minimumIntegerDigits=i.padTo),this.inf=Ul(e,o)}}var t=n.prototype;return t.format=function(r){if(this.inf){var i=this.floor?Math.floor(r):r;return this.inf.format(i)}else{var u=this.floor?Math.floor(r):Xi(r,3);return ce(u,this.padTo)}},n}(),ec=function(){function n(e,r,i){this.opts=i;var u;if(e.zone.isUniversal){var o=-1*(e.offset/60),a=o>=0?"Etc/GMT+"+o:"Etc/GMT"+o;e.offset!==0&&Rt.create(a).valid?(u=a,this.dt=e):(u="UTC",i.timeZoneName?this.dt=e:this.dt=e.offset===0?e:de.fromMillis(e.ts+e.offset*60*1e3))}else e.zone.type==="system"?this.dt=e:(this.dt=e,u=e.zone.name);var s=P({},this.opts);u&&(s.timeZone=u),this.dtf=Hi(r,s)}var t=n.prototype;return t.format=function(){return this.dtf.format(this.dt.toJSDate())},t.formatToParts=function(){return this.dtf.formatToParts(this.dt.toJSDate())},t.resolvedOptions=function(){return this.dtf.resolvedOptions()},n}(),tc=function(){function n(e,r,i){this.opts=P({style:"long"},i),!r&&fa()&&(this.rtf=zl(e,i))}var t=n.prototype;return t.format=function(r,i){return this.rtf?this.rtf.format(r,i):Vl(i,r,this.opts.numeric,this.opts.style!=="long")},t.formatToParts=function(r,i){return this.rtf?this.rtf.formatToParts(r,i):[]},n}(),Fe=function(){n.fromOpts=function(r){return n.create(r.locale,r.numberingSystem,r.outputCalendar,r.defaultToEN)},n.create=function(r,i,u,o){o===void 0&&(o=!1);var a=r||le.defaultLocale,s=a||(o?"en-US":Zl()),l=i||le.defaultNumberingSystem,h=u||le.defaultOutputCalendar;return new n(s,l,h,a)},n.resetCache=function(){Pn=null,qi={},Wi={},Ui={}},n.fromObject=function(r){var i=r===void 0?{}:r,u=i.locale,o=i.numberingSystem,a=i.outputCalendar;return n.create(u,o,a)};function n(e,r,i,u){var o=Gl(e),a=o[0],s=o[1],l=o[2];this.locale=a,this.numberingSystem=r||s||null,this.outputCalendar=i||l||null,this.intl=Yl(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=u,this.fastNumbersCached=null}var t=n.prototype;return t.listingMode=function(){var r=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return r&&i?"en":"intl"},t.clone=function(r){return!r||Object.getOwnPropertyNames(r).length===0?this:n.create(r.locale||this.specifiedLocale,r.numberingSystem||this.numberingSystem,r.outputCalendar||this.outputCalendar,r.defaultToEN||!1)},t.redefaultToEN=function(r){return r===void 0&&(r={}),this.clone(P({},r,{defaultToEN:!0}))},t.redefaultToSystem=function(r){return r===void 0&&(r={}),this.clone(P({},r,{defaultToEN:!1}))},t.months=function(r,i,u){var o=this;return i===void 0&&(i=!1),u===void 0&&(u=!0),Ar(this,r,u,Da,function(){var a=i?{month:r,day:"numeric"}:{month:r},s=i?"format":"standalone";return o.monthsCache[s][r]||(o.monthsCache[s][r]=Jl(function(l){return o.extract(l,a,"month")})),o.monthsCache[s][r]})},t.weekdays=function(r,i,u){var o=this;return i===void 0&&(i=!1),u===void 0&&(u=!0),Ar(this,r,u,Fa,function(){var a=i?{weekday:r,year:"numeric",month:"long",day:"numeric"}:{weekday:r},s=i?"format":"standalone";return o.weekdaysCache[s][r]||(o.weekdaysCache[s][r]=Ql(function(l){return o.extract(l,a,"weekday")})),o.weekdaysCache[s][r]})},t.meridiems=function(r){var i=this;return r===void 0&&(r=!0),Ar(this,void 0,r,function(){return ba},function(){if(!i.meridiemCache){var u={hour:"numeric",hourCycle:"h12"};i.meridiemCache=[de.utc(2016,11,13,9),de.utc(2016,11,13,19)].map(function(o){return i.extract(o,u,"dayperiod")})}return i.meridiemCache})},t.eras=function(r,i){var u=this;return i===void 0&&(i=!0),Ar(this,r,i,wa,function(){var o={era:r};return u.eraCache[r]||(u.eraCache[r]=[de.utc(-40,1,1),de.utc(2017,1,1)].map(function(a){return u.extract(a,o,"era")})),u.eraCache[r]})},t.extract=function(r,i,u){var o=this.dtFormatter(r,i),a=o.formatToParts(),s=a.find(function(l){return l.type.toLowerCase()===u});return s?s.value:null},t.numberFormatter=function(r){return r===void 0&&(r={}),new Xl(this.intl,r.forceSimple||this.fastNumbers,r)},t.dtFormatter=function(r,i){return i===void 0&&(i={}),new ec(r,this.intl,i)},t.relFormatter=function(r){return r===void 0&&(r={}),new tc(this.intl,this.isEnglish(),r)},t.listFormatter=function(r){return r===void 0&&(r={}),Wl(this.intl,r)},t.isEnglish=function(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")},t.equals=function(r){return this.locale===r.locale&&this.numberingSystem===r.numberingSystem&&this.outputCalendar===r.outputCalendar},ut(n,[{key:"fastNumbers",get:function(){return this.fastNumbersCached==null&&(this.fastNumbersCached=Kl(this)),this.fastNumbersCached}}]),n}();function fn(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];var r=t.reduce(function(i,u){return i+u.source},"");return RegExp("^"+r+"$")}function mn(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return function(r){return t.reduce(function(i,u){var o=i[0],a=i[1],s=i[2],l=u(r,s),h=l[0],d=l[1],f=l[2];return[P({},o,h),d||a,f]},[{},null,1]).slice(0,2)}}function hn(n){if(n==null)return[null,null];for(var t=arguments.length,e=new Array(t>1?t-1:0),r=1;r<t;r++)e[r-1]=arguments[r];for(var i=0,u=e;i<u.length;i++){var o=u[i],a=o[0],s=o[1],l=a.exec(n);if(l)return s(l)}return[null,null]}function _a(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return function(r,i){var u={},o;for(o=0;o<t.length;o++)u[t[o]]=Ct(r[i+o]);return[u,null,i+o]}}var Sa=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,nc="(?:"+Sa.source+"?(?:\\[("+pa.source+")\\])?)?",tu=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,xa=RegExp(""+tu.source+nc),nu=RegExp("(?:T"+xa.source+")?"),rc=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,ic=/(\d{4})-?W(\d\d)(?:-?(\d))?/,uc=/(\d{4})-?(\d{3})/,oc=_a("weekYear","weekNumber","weekDay"),ac=_a("year","ordinal"),sc=/(\d{4})-(\d\d)-(\d\d)/,ka=RegExp(tu.source+" ?(?:"+Sa.source+"|("+pa.source+"))?"),lc=RegExp("(?: "+ka.source+")?");function ln(n,t,e){var r=n[t];return q(r)?e:Ct(r)}function cc(n,t){var e={year:ln(n,t),month:ln(n,t+1,1),day:ln(n,t+2,1)};return[e,null,t+3]}function pn(n,t){var e={hours:ln(n,t,0),minutes:ln(n,t+1,0),seconds:ln(n,t+2,0),milliseconds:Ki(n[t+3])};return[e,null,t+4]}function Jn(n,t){var e=!n[t]&&!n[t+1],r=Ur(n[t+1],n[t+2]),i=e?null:Qe.instance(r);return[{},i,t+3]}function Qn(n,t){var e=n[t]?Rt.create(n[t]):null;return[{},e,t+1]}var dc=RegExp("^T?"+tu.source+"$"),fc=/^-?P(?:(?:(-?\d{1,9}(?:\.\d{1,9})?)Y)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,9}(?:\.\d{1,9})?)W)?(?:(-?\d{1,9}(?:\.\d{1,9})?)D)?(?:T(?:(-?\d{1,9}(?:\.\d{1,9})?)H)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/;function mc(n){var t=n[0],e=n[1],r=n[2],i=n[3],u=n[4],o=n[5],a=n[6],s=n[7],l=n[8],h=t[0]==="-",d=s&&s[0]==="-",f=function(v,F){return F===void 0&&(F=!1),v!==void 0&&(F||v&&h)?-v:v};return[{years:f(At(e)),months:f(At(r)),weeks:f(At(i)),days:f(At(u)),hours:f(At(o)),minutes:f(At(a)),seconds:f(At(s),s==="-0"),milliseconds:f(Ki(l),d)}]}var hc={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function ru(n,t,e,r,i,u,o){var a={year:t.length===2?$i(Ct(t)):Ct(t),month:ga.indexOf(e)+1,day:Ct(r),hour:Ct(i),minute:Ct(u)};return o&&(a.second=Ct(o)),n&&(a.weekday=n.length>3?va.indexOf(n)+1:ya.indexOf(n)+1),a}var pc=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function gc(n){var t=n[1],e=n[2],r=n[3],i=n[4],u=n[5],o=n[6],a=n[7],s=n[8],l=n[9],h=n[10],d=n[11],f=ru(t,i,r,e,u,o,a),g;return s?g=hc[s]:l?g=0:g=Ur(h,d),[f,new Qe(g)]}function Dc(n){return n.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}var vc=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,yc=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Fc=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function xo(n){var t=n[1],e=n[2],r=n[3],i=n[4],u=n[5],o=n[6],a=n[7],s=ru(t,i,r,e,u,o,a);return[s,Qe.utcInstance]}function bc(n){var t=n[1],e=n[2],r=n[3],i=n[4],u=n[5],o=n[6],a=n[7],s=ru(t,a,e,r,i,u,o);return[s,Qe.utcInstance]}var wc=fn(rc,nu),Cc=fn(ic,nu),Ec=fn(uc,nu),_c=fn(xa),Ta=mn(cc,pn,Jn,Qn),Sc=mn(oc,pn,Jn,Qn),xc=mn(ac,pn,Jn,Qn),kc=mn(pn,Jn,Qn);function Tc(n){return hn(n,[wc,Ta],[Cc,Sc],[Ec,xc],[_c,kc])}function Mc(n){return hn(Dc(n),[pc,gc])}function Oc(n){return hn(n,[vc,xo],[yc,xo],[Fc,bc])}function Ic(n){return hn(n,[fc,mc])}var Ac=mn(pn);function Bc(n){return hn(n,[dc,Ac])}var Nc=fn(sc,lc),Vc=fn(ka),Lc=mn(pn,Jn,Qn);function Rc(n){return hn(n,[Nc,Ta],[Vc,Lc])}var Pc="Invalid Duration",Ma={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},jc=P({years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3}},Ma),Ve=146097/400,sn=146097/4800,$c=P({years:{quarters:4,months:12,weeks:Ve/7,days:Ve,hours:Ve*24,minutes:Ve*24*60,seconds:Ve*24*60*60,milliseconds:Ve*24*60*60*1e3},quarters:{months:3,weeks:Ve/28,days:Ve/4,hours:Ve*24/4,minutes:Ve*24*60/4,seconds:Ve*24*60*60/4,milliseconds:Ve*24*60*60*1e3/4},months:{weeks:sn/7,days:sn,hours:sn*24,minutes:sn*24*60,seconds:sn*24*60*60,milliseconds:sn*24*60*60*1e3}},Ma),Nt=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],qc=Nt.slice(0).reverse();function Bt(n,t,e){e===void 0&&(e=!1);var r={values:e?t.values:P({},n.values,t.values||{}),loc:n.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||n.conversionAccuracy};return new we(r)}function Hc(n){return n<0?Math.floor(n):Math.ceil(n)}function Oa(n,t,e,r,i){var u=n[i][e],o=t[e]/u,a=Math.sign(o)===Math.sign(r[i]),s=!a&&r[i]!==0&&Math.abs(o)<=1?Hc(o):Math.trunc(o);r[i]+=s,t[e]-=s*u}function Wc(n,t){qc.reduce(function(e,r){return q(t[r])?e:(e&&Oa(n,t,e,t,r),r)},null)}var we=function(){function n(e){var r=e.conversionAccuracy==="longterm"||!1;this.values=e.values,this.loc=e.loc||Fe.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r?$c:jc,this.isLuxonDuration=!0}n.fromMillis=function(r,i){return n.fromObject({milliseconds:r},i)},n.fromObject=function(r,i){if(i===void 0&&(i={}),r==null||typeof r!="object")throw new Le("Duration.fromObject: argument expected to be an object, got "+(r===null?"null":typeof r));return new n({values:$r(r,n.normalizeUnit),loc:Fe.fromObject(i),conversionAccuracy:i.conversionAccuracy})},n.fromDurationLike=function(r){if(Vt(r))return n.fromMillis(r);if(n.isDuration(r))return r;if(typeof r=="object")return n.fromObject(r);throw new Le("Unknown duration argument "+r+" of type "+typeof r)},n.fromISO=function(r,i){var u=Ic(r),o=u[0];return o?n.fromObject(o,i):n.invalid("unparsable",'the input "'+r+`" can't be parsed as ISO 8601`)},n.fromISOTime=function(r,i){var u=Bc(r),o=u[0];return o?n.fromObject(o,i):n.invalid("unparsable",'the input "'+r+`" can't be parsed as ISO 8601`)},n.invalid=function(r,i){if(i===void 0&&(i=null),!r)throw new Le("need to specify a reason the Duration is invalid");var u=r instanceof Je?r:new Je(r,i);if(le.throwOnInvalid)throw new vl(u);return new n({invalid:u})},n.normalizeUnit=function(r){var i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[r&&r.toLowerCase()];if(!i)throw new zo(r);return i},n.isDuration=function(r){return r&&r.isLuxonDuration||!1};var t=n.prototype;return t.toFormat=function(r,i){i===void 0&&(i={});var u=P({},i,{floor:i.round!==!1&&i.floor!==!1});return this.isValid?yt.create(this.loc,u).formatDurationFromString(this,r):Pc},t.toHuman=function(r){var i=this;r===void 0&&(r={});var u=Nt.map(function(o){var a=i.values[o];return q(a)?null:i.loc.numberFormatter(P({style:"unit",unitDisplay:"long"},r,{unit:o.slice(0,-1)})).format(a)}).filter(function(o){return o});return this.loc.listFormatter(P({type:"conjunction",style:r.listStyle||"narrow"},r)).format(u)},t.toObject=function(){return this.isValid?P({},this.values):{}},t.toISO=function(){if(!this.isValid)return null;var r="P";return this.years!==0&&(r+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(r+=this.months+this.quarters*3+"M"),this.weeks!==0&&(r+=this.weeks+"W"),this.days!==0&&(r+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(r+="T"),this.hours!==0&&(r+=this.hours+"H"),this.minutes!==0&&(r+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(r+=Xi(this.seconds+this.milliseconds/1e3,3)+"S"),r==="P"&&(r+="T0S"),r},t.toISOTime=function(r){if(r===void 0&&(r={}),!this.isValid)return null;var i=this.toMillis();if(i<0||i>=864e5)return null;r=P({suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended"},r);var u=this.shiftTo("hours","minutes","seconds","milliseconds"),o=r.format==="basic"?"hhmm":"hh:mm";(!r.suppressSeconds||u.seconds!==0||u.milliseconds!==0)&&(o+=r.format==="basic"?"ss":":ss",(!r.suppressMilliseconds||u.milliseconds!==0)&&(o+=".SSS"));var a=u.toFormat(o);return r.includePrefix&&(a="T"+a),a},t.toJSON=function(){return this.toISO()},t.toString=function(){return this.toISO()},t.toMillis=function(){return this.as("milliseconds")},t.valueOf=function(){return this.toMillis()},t.plus=function(r){if(!this.isValid)return this;for(var i=n.fromDurationLike(r),u={},o=_t(Nt),a;!(a=o()).done;){var s=a.value;(cn(i.values,s)||cn(this.values,s))&&(u[s]=i.get(s)+this.get(s))}return Bt(this,{values:u},!0)},t.minus=function(r){if(!this.isValid)return this;var i=n.fromDurationLike(r);return this.plus(i.negate())},t.mapUnits=function(r){if(!this.isValid)return this;for(var i={},u=0,o=Object.keys(this.values);u<o.length;u++){var a=o[u];i[a]=ha(r(this.values[a],a))}return Bt(this,{values:i},!0)},t.get=function(r){return this[n.normalizeUnit(r)]},t.set=function(r){if(!this.isValid)return this;var i=P({},this.values,$r(r,n.normalizeUnit));return Bt(this,{values:i})},t.reconfigure=function(r){var i=r===void 0?{}:r,u=i.locale,o=i.numberingSystem,a=i.conversionAccuracy,s=this.loc.clone({locale:u,numberingSystem:o}),l={loc:s};return a&&(l.conversionAccuracy=a),Bt(this,l)},t.as=function(r){return this.isValid?this.shiftTo(r).get(r):NaN},t.normalize=function(){if(!this.isValid)return this;var r=this.toObject();return Wc(this.matrix,r),Bt(this,{values:r},!0)},t.shiftTo=function(){for(var r=arguments.length,i=new Array(r),u=0;u<r;u++)i[u]=arguments[u];if(!this.isValid)return this;if(i.length===0)return this;i=i.map(function(L){return n.normalizeUnit(L)});for(var o={},a={},s=this.toObject(),l,h=_t(Nt),d;!(d=h()).done;){var f=d.value;if(i.indexOf(f)>=0){l=f;var g=0;for(var v in a)g+=this.matrix[v][f]*a[v],a[v]=0;Vt(s[f])&&(g+=s[f]);var F=Math.trunc(g);o[f]=F,a[f]=(g*1e3-F*1e3)/1e3;for(var S in s)Nt.indexOf(S)>Nt.indexOf(f)&&Oa(this.matrix,s,S,o,f)}else Vt(s[f])&&(a[f]=s[f])}for(var C in a)a[C]!==0&&(o[l]+=C===l?a[C]:a[C]/this.matrix[l][C]);return Bt(this,{values:o},!0).normalize()},t.negate=function(){if(!this.isValid)return this;for(var r={},i=0,u=Object.keys(this.values);i<u.length;i++){var o=u[i];r[o]=this.values[o]===0?0:-this.values[o]}return Bt(this,{values:r},!0)},t.equals=function(r){if(!this.isValid||!r.isValid||!this.loc.equals(r.loc))return!1;function i(s,l){return s===void 0||s===0?l===void 0||l===0:s===l}for(var u=_t(Nt),o;!(o=u()).done;){var a=o.value;if(!i(this.values[a],r.values[a]))return!1}return!0},ut(n,[{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"years",get:function(){return this.isValid?this.values.years||0:NaN}},{key:"quarters",get:function(){return this.isValid?this.values.quarters||0:NaN}},{key:"months",get:function(){return this.isValid?this.values.months||0:NaN}},{key:"weeks",get:function(){return this.isValid?this.values.weeks||0:NaN}},{key:"days",get:function(){return this.isValid?this.values.days||0:NaN}},{key:"hours",get:function(){return this.isValid?this.values.hours||0:NaN}},{key:"minutes",get:function(){return this.isValid?this.values.minutes||0:NaN}},{key:"seconds",get:function(){return this.isValid?this.values.seconds||0:NaN}},{key:"milliseconds",get:function(){return this.isValid?this.values.milliseconds||0:NaN}},{key:"isValid",get:function(){return this.invalid===null}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]),n}(),An="Invalid Interval";function Uc(n,t){return!n||!n.isValid?Hn.invalid("missing or invalid start"):!t||!t.isValid?Hn.invalid("missing or invalid end"):t<n?Hn.invalid("end before start","The end of an interval must be after its start, but you had start="+n.toISO()+" and end="+t.toISO()):null}var Hn=function(){function n(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}n.invalid=function(r,i){if(i===void 0&&(i=null),!r)throw new Le("need to specify a reason the Interval is invalid");var u=r instanceof Je?r:new Je(r,i);if(le.throwOnInvalid)throw new Dl(u);return new n({invalid:u})},n.fromDateTimes=function(r,i){var u=Vn(r),o=Vn(i),a=Uc(u,o);return a==null?new n({start:u,end:o}):a},n.after=function(r,i){var u=we.fromDurationLike(i),o=Vn(r);return n.fromDateTimes(o,o.plus(u))},n.before=function(r,i){var u=we.fromDurationLike(i),o=Vn(r);return n.fromDateTimes(o.minus(u),o)},n.fromISO=function(r,i){var u=(r||"").split("/",2),o=u[0],a=u[1];if(o&&a){var s,l;try{s=de.fromISO(o,i),l=s.isValid}catch(v){l=!1}var h,d;try{h=de.fromISO(a,i),d=h.isValid}catch(v){d=!1}if(l&&d)return n.fromDateTimes(s,h);if(l){var f=we.fromISO(a,i);if(f.isValid)return n.after(s,f)}else if(d){var g=we.fromISO(o,i);if(g.isValid)return n.before(h,g)}}return n.invalid("unparsable",'the input "'+r+`" can't be parsed as ISO 8601`)},n.isInterval=function(r){return r&&r.isLuxonInterval||!1};var t=n.prototype;return t.length=function(r){return r===void 0&&(r="milliseconds"),this.isValid?this.toDuration.apply(this,[r]).get(r):NaN},t.count=function(r){if(r===void 0&&(r="milliseconds"),!this.isValid)return NaN;var i=this.start.startOf(r),u=this.end.startOf(r);return Math.floor(u.diff(i,r).get(r))+1},t.hasSame=function(r){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,r):!1},t.isEmpty=function(){return this.s.valueOf()===this.e.valueOf()},t.isAfter=function(r){return this.isValid?this.s>r:!1},t.isBefore=function(r){return this.isValid?this.e<=r:!1},t.contains=function(r){return this.isValid?this.s<=r&&this.e>r:!1},t.set=function(r){var i=r===void 0?{}:r,u=i.start,o=i.end;return this.isValid?n.fromDateTimes(u||this.s,o||this.e):this},t.splitAt=function(){var r=this;if(!this.isValid)return[];for(var i=arguments.length,u=new Array(i),o=0;o<i;o++)u[o]=arguments[o];for(var a=u.map(Vn).filter(function(g){return r.contains(g)}).sort(),s=[],l=this.s,h=0;l<this.e;){var d=a[h]||this.e,f=+d>+this.e?this.e:d;s.push(n.fromDateTimes(l,f)),l=f,h+=1}return s},t.splitBy=function(r){var i=we.fromDurationLike(r);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];for(var u=this.s,o=1,a,s=[];u<this.e;){var l=this.start.plus(i.mapUnits(function(h){return h*o}));a=+l>+this.e?this.e:l,s.push(n.fromDateTimes(u,a)),u=a,o+=1}return s},t.divideEqually=function(r){return this.isValid?this.splitBy(this.length()/r).slice(0,r):[]},t.overlaps=function(r){return this.e>r.s&&this.s<r.e},t.abutsStart=function(r){return this.isValid?+this.e==+r.s:!1},t.abutsEnd=function(r){return this.isValid?+r.e==+this.s:!1},t.engulfs=function(r){return this.isValid?this.s<=r.s&&this.e>=r.e:!1},t.equals=function(r){return!this.isValid||!r.isValid?!1:this.s.equals(r.s)&&this.e.equals(r.e)},t.intersection=function(r){if(!this.isValid)return this;var i=this.s>r.s?this.s:r.s,u=this.e<r.e?this.e:r.e;return i>=u?null:n.fromDateTimes(i,u)},t.union=function(r){if(!this.isValid)return this;var i=this.s<r.s?this.s:r.s,u=this.e>r.e?this.e:r.e;return n.fromDateTimes(i,u)},n.merge=function(r){var i=r.sort(function(a,s){return a.s-s.s}).reduce(function(a,s){var l=a[0],h=a[1];return h?h.overlaps(s)||h.abutsStart(s)?[l,h.union(s)]:[l.concat([h]),s]:[l,s]},[[],null]),u=i[0],o=i[1];return o&&u.push(o),u},n.xor=function(r){for(var i,u=null,o=0,a=[],s=r.map(function(v){return[{time:v.s,type:"s"},{time:v.e,type:"e"}]}),l=(i=Array.prototype).concat.apply(i,s),h=l.sort(function(v,F){return v.time-F.time}),d=_t(h),f;!(f=d()).done;){var g=f.value;o+=g.type==="s"?1:-1,o===1?u=g.time:(u&&+u!=+g.time&&a.push(n.fromDateTimes(u,g.time)),u=null)}return n.merge(a)},t.difference=function(){for(var r=this,i=arguments.length,u=new Array(i),o=0;o<i;o++)u[o]=arguments[o];return n.xor([this].concat(u)).map(function(a){return r.intersection(a)}).filter(function(a){return a&&!a.isEmpty()})},t.toString=function(){return this.isValid?"["+this.s.toISO()+" \u2013 "+this.e.toISO()+")":An},t.toISO=function(r){return this.isValid?this.s.toISO(r)+"/"+this.e.toISO(r):An},t.toISODate=function(){return this.isValid?this.s.toISODate()+"/"+this.e.toISODate():An},t.toISOTime=function(r){return this.isValid?this.s.toISOTime(r)+"/"+this.e.toISOTime(r):An},t.toFormat=function(r,i){var u=i===void 0?{}:i,o=u.separator,a=o===void 0?" \u2013 ":o;return this.isValid?""+this.s.toFormat(r)+a+this.e.toFormat(r):An},t.toDuration=function(r,i){return this.isValid?this.e.diff(this.s,r,i):we.invalid(this.invalidReason)},t.mapEndpoints=function(r){return n.fromDateTimes(r(this.s),r(this.e))},ut(n,[{key:"start",get:function(){return this.isValid?this.s:null}},{key:"end",get:function(){return this.isValid?this.e:null}},{key:"isValid",get:function(){return this.invalidReason===null}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]),n}(),jn=function(){function n(){}return n.hasDST=function(e){e===void 0&&(e=le.defaultZone);var r=de.now().setZone(e).set({month:12});return!e.isUniversal&&r.offset!==r.set({month:6}).offset},n.isValidIANAZone=function(e){return Rt.isValidZone(e)},n.normalizeZone=function(e){return Et(e,le.defaultZone)},n.months=function(e,r){e===void 0&&(e="long");var i=r===void 0?{}:r,u=i.locale,o=u===void 0?null:u,a=i.numberingSystem,s=a===void 0?null:a,l=i.locObj,h=l===void 0?null:l,d=i.outputCalendar,f=d===void 0?"gregory":d;return(h||Fe.create(o,s,f)).months(e)},n.monthsFormat=function(e,r){e===void 0&&(e="long");var i=r===void 0?{}:r,u=i.locale,o=u===void 0?null:u,a=i.numberingSystem,s=a===void 0?null:a,l=i.locObj,h=l===void 0?null:l,d=i.outputCalendar,f=d===void 0?"gregory":d;return(h||Fe.create(o,s,f)).months(e,!0)},n.weekdays=function(e,r){e===void 0&&(e="long");var i=r===void 0?{}:r,u=i.locale,o=u===void 0?null:u,a=i.numberingSystem,s=a===void 0?null:a,l=i.locObj,h=l===void 0?null:l;return(h||Fe.create(o,s,null)).weekdays(e)},n.weekdaysFormat=function(e,r){e===void 0&&(e="long");var i=r===void 0?{}:r,u=i.locale,o=u===void 0?null:u,a=i.numberingSystem,s=a===void 0?null:a,l=i.locObj,h=l===void 0?null:l;return(h||Fe.create(o,s,null)).weekdays(e,!0)},n.meridiems=function(e){var r=e===void 0?{}:e,i=r.locale,u=i===void 0?null:i;return Fe.create(u).meridiems()},n.eras=function(e,r){e===void 0&&(e="short");var i=r===void 0?{}:r,u=i.locale,o=u===void 0?null:u;return Fe.create(o,null,"gregory").eras(e)},n.features=function(){return{relative:fa()}},n}();function ko(n,t){var e=function(u){return u.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()},r=e(t)-e(n);return Math.floor(we.fromMillis(r).as("days"))}function zc(n,t,e){for(var r=[["years",function(F,S){return S.year-F.year}],["quarters",function(F,S){return S.quarter-F.quarter}],["months",function(F,S){return S.month-F.month+(S.year-F.year)*12}],["weeks",function(F,S){var C=ko(F,S);return(C-C%7)/7}],["days",ko]],i={},u,o,a=0,s=r;a<s.length;a++){var l=s[a],h=l[0],d=l[1];if(e.indexOf(h)>=0){var f;u=h;var g=d(n,t);if(o=n.plus((f={},f[h]=g,f)),o>t){var v;n=n.plus((v={},v[h]=g-1,v)),g-=1}else n=o;i[h]=g}}return[n,i,o,u]}function Zc(n,t,e,r){var i=zc(n,t,e),u=i[0],o=i[1],a=i[2],s=i[3],l=t-u,h=e.filter(function(v){return["hours","minutes","seconds","milliseconds"].indexOf(v)>=0});if(h.length===0){if(a<t){var d;a=u.plus((d={},d[s]=1,d))}a!==u&&(o[s]=(o[s]||0)+l/(a-u))}var f=we.fromObject(o,r);if(h.length>0){var g;return(g=we.fromMillis(l,r)).shiftTo.apply(g,h).plus(f)}else return f}var iu={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},To={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Gc=iu.hanidec.replace(/[\[|\]]/g,"").split("");function Yc(n){var t=parseInt(n,10);if(isNaN(t)){t="";for(var e=0;e<n.length;e++){var r=n.charCodeAt(e);if(n[e].search(iu.hanidec)!==-1)t+=Gc.indexOf(n[e]);else for(var i in To){var u=To[i],o=u[0],a=u[1];r>=o&&r<=a&&(t+=r-o)}}return parseInt(t,10)}else return t}function Ze(n,t){var e=n.numberingSystem;return t===void 0&&(t=""),new RegExp(""+iu[e||"latn"]+t)}var Jc="missing Intl.DateTimeFormat.formatToParts support";function W(n,t){return t===void 0&&(t=function(r){return r}),{regex:n,deser:function(r){var i=r[0];return t(Yc(i))}}}var Qc=String.fromCharCode(160),Ia="[ "+Qc+"]",Aa=new RegExp(Ia,"g");function Kc(n){return n.replace(/\./g,"\\.?").replace(Aa,Ia)}function Mo(n){return n.replace(/\./g,"").replace(Aa," ").toLowerCase()}function Ge(n,t){return n===null?null:{regex:RegExp(n.map(Kc).join("|")),deser:function(r){var i=r[0];return n.findIndex(function(u){return Mo(i)===Mo(u)})+t}}}function Oo(n,t){return{regex:n,deser:function(r){var i=r[1],u=r[2];return Ur(i,u)},groups:t}}function Oi(n){return{regex:n,deser:function(e){var r=e[0];return r}}}function Xc(n){return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function ed(n,t){var e=Ze(t),r=Ze(t,"{2}"),i=Ze(t,"{3}"),u=Ze(t,"{4}"),o=Ze(t,"{6}"),a=Ze(t,"{1,2}"),s=Ze(t,"{1,3}"),l=Ze(t,"{1,6}"),h=Ze(t,"{1,9}"),d=Ze(t,"{2,4}"),f=Ze(t,"{4,6}"),g=function(C){return{regex:RegExp(Xc(C.val)),deser:function(U){var b=U[0];return b},literal:!0}},v=function(C){if(n.literal)return g(C);switch(C.val){case"G":return Ge(t.eras("short",!1),0);case"GG":return Ge(t.eras("long",!1),0);case"y":return W(l);case"yy":return W(d,$i);case"yyyy":return W(u);case"yyyyy":return W(f);case"yyyyyy":return W(o);case"M":return W(a);case"MM":return W(r);case"MMM":return Ge(t.months("short",!0,!1),1);case"MMMM":return Ge(t.months("long",!0,!1),1);case"L":return W(a);case"LL":return W(r);case"LLL":return Ge(t.months("short",!1,!1),1);case"LLLL":return Ge(t.months("long",!1,!1),1);case"d":return W(a);case"dd":return W(r);case"o":return W(s);case"ooo":return W(i);case"HH":return W(r);case"H":return W(a);case"hh":return W(r);case"h":return W(a);case"mm":return W(r);case"m":return W(a);case"q":return W(a);case"qq":return W(r);case"s":return W(a);case"ss":return W(r);case"S":return W(s);case"SSS":return W(i);case"u":return Oi(h);case"uu":return Oi(a);case"uuu":return W(e);case"a":return Ge(t.meridiems(),0);case"kkkk":return W(u);case"kk":return W(d,$i);case"W":return W(a);case"WW":return W(r);case"E":case"c":return W(e);case"EEE":return Ge(t.weekdays("short",!1,!1),1);case"EEEE":return Ge(t.weekdays("long",!1,!1),1);case"ccc":return Ge(t.weekdays("short",!0,!1),1);case"cccc":return Ge(t.weekdays("long",!0,!1),1);case"Z":case"ZZ":return Oo(new RegExp("([+-]"+a.source+")(?::("+r.source+"))?"),2);case"ZZZ":return Oo(new RegExp("([+-]"+a.source+")("+r.source+")?"),2);case"z":return Oi(/[a-z_+-/]{1,256}?/i);default:return g(C)}},F=v(n)||{invalidReason:Jc};return F.token=n,F}var td={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}};function nd(n,t,e){var r=n.type,i=n.value;if(r==="literal")return{literal:!0,val:i};var u=e[r],o=td[r];if(typeof o=="object"&&(o=o[u]),o)return{literal:!1,val:o}}function rd(n){var t=n.map(function(e){return e.regex}).reduce(function(e,r){return e+"("+r.source+")"},"");return["^"+t+"$",n]}function id(n,t,e){var r=n.match(t);if(r){var i={},u=1;for(var o in e)if(cn(e,o)){var a=e[o],s=a.groups?a.groups+1:1;!a.literal&&a.token&&(i[a.token.val[0]]=a.deser(r.slice(u,u+s))),u+=s}return[r,i]}else return[r,{}]}function ud(n){var t=function(o){switch(o){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}},e=null,r;q(n.z)||(e=Rt.create(n.z)),q(n.Z)||(e||(e=new Qe(n.Z)),r=n.Z),q(n.q)||(n.M=(n.q-1)*3+1),q(n.h)||(n.h<12&&n.a===1?n.h+=12:n.h===12&&n.a===0&&(n.h=0)),n.G===0&&n.y&&(n.y=-n.y),q(n.u)||(n.S=Ki(n.u));var i=Object.keys(n).reduce(function(u,o){var a=t(o);return a&&(u[a]=n[o]),u},{});return[i,e,r]}var Ii=null;function od(){return Ii||(Ii=de.fromMillis(1555555555555)),Ii}function ad(n,t){if(n.literal)return n;var e=yt.macroTokenToFormatOpts(n.val);if(!e)return n;var r=yt.create(t,e),i=r.formatDateTimeParts(od()),u=i.map(function(o){return nd(o,t,e)});return u.includes(void 0)?n:u}function sd(n,t){var e;return(e=Array.prototype).concat.apply(e,n.map(function(r){return ad(r,t)}))}function Ba(n,t,e){var r=sd(yt.parseFormat(e),n),i=r.map(function(C){return ed(C,n)}),u=i.find(function(C){return C.invalidReason});if(u)return{input:t,tokens:r,invalidReason:u.invalidReason};var o=rd(i),a=o[0],s=o[1],l=RegExp(a,"i"),h=id(t,l,s),d=h[0],f=h[1],g=f?ud(f):[null,null,void 0],v=g[0],F=g[1],S=g[2];if(cn(f,"a")&&cn(f,"H"))throw new Rn("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:r,regex:l,rawMatches:d,matches:f,result:v,zone:F,specificOffset:S}}function ld(n,t,e){var r=Ba(n,t,e),i=r.result,u=r.zone,o=r.specificOffset,a=r.invalidReason;return[i,u,o,a]}var Na=[0,31,59,90,120,151,181,212,243,273,304,334],Va=[0,31,60,91,121,152,182,213,244,274,305,335];function Re(n,t){return new Je("unit out of range","you specified "+t+" (of type "+typeof t+") as a "+n+", which is invalid")}function La(n,t,e){var r=new Date(Date.UTC(n,t-1,e));n<100&&n>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);var i=r.getUTCDay();return i===0?7:i}function Ra(n,t,e){return e+(Yn(n)?Va:Na)[t-1]}function Pa(n,t){var e=Yn(n)?Va:Na,r=e.findIndex(function(u){return u<t}),i=t-e[r];return{month:r+1,day:i}}function zi(n){var t=n.year,e=n.month,r=n.day,i=Ra(t,e,r),u=La(t,e,r),o=Math.floor((i-u+10)/7),a;return o<1?(a=t-1,o=jr(a)):o>jr(t)?(a=t+1,o=1):a=t,P({weekYear:a,weekNumber:o,weekday:u},zr(n))}function Io(n){var t=n.weekYear,e=n.weekNumber,r=n.weekday,i=La(t,1,4),u=$n(t),o=e*7+r-i-3,a;o<1?(a=t-1,o+=$n(a)):o>u?(a=t+1,o-=$n(t)):a=t;var s=Pa(a,o),l=s.month,h=s.day;return P({year:a,month:l,day:h},zr(n))}function Ai(n){var t=n.year,e=n.month,r=n.day,i=Ra(t,e,r);return P({year:t,ordinal:i},zr(n))}function Ao(n){var t=n.year,e=n.ordinal,r=Pa(t,e),i=r.month,u=r.day;return P({year:t,month:i,day:u},zr(n))}function cd(n){var t=Wr(n.weekYear),e=vt(n.weekNumber,1,jr(n.weekYear)),r=vt(n.weekday,1,7);return t?e?r?!1:Re("weekday",n.weekday):Re("week",n.week):Re("weekYear",n.weekYear)}function dd(n){var t=Wr(n.year),e=vt(n.ordinal,1,$n(n.year));return t?e?!1:Re("ordinal",n.ordinal):Re("year",n.year)}function ja(n){var t=Wr(n.year),e=vt(n.month,1,12),r=vt(n.day,1,Pr(n.year,n.month));return t?e?r?!1:Re("day",n.day):Re("month",n.month):Re("year",n.year)}function $a(n){var t=n.hour,e=n.minute,r=n.second,i=n.millisecond,u=vt(t,0,23)||t===24&&e===0&&r===0&&i===0,o=vt(e,0,59),a=vt(r,0,59),s=vt(i,0,999);return u?o?a?s?!1:Re("millisecond",i):Re("second",r):Re("minute",e):Re("hour",t)}var Bi="Invalid DateTime",Bo=864e13;function Br(n){return new Je("unsupported zone",'the zone "'+n.name+'" is not supported')}function Ni(n){return n.weekData===null&&(n.weekData=zi(n.c)),n.weekData}function Bn(n,t){var e={ts:n.ts,zone:n.zone,c:n.c,o:n.o,loc:n.loc,invalid:n.invalid};return new de(P({},e,t,{old:e}))}function qa(n,t,e){var r=n-t*60*1e3,i=e.offset(r);if(t===i)return[r,t];r-=(i-t)*60*1e3;var u=e.offset(r);return i===u?[r,i]:[n-Math.min(i,u)*60*1e3,Math.max(i,u)]}function No(n,t){n+=t*60*1e3;var e=new Date(n);return{year:e.getUTCFullYear(),month:e.getUTCMonth()+1,day:e.getUTCDate(),hour:e.getUTCHours(),minute:e.getUTCMinutes(),second:e.getUTCSeconds(),millisecond:e.getUTCMilliseconds()}}function Rr(n,t,e){return qa(eu(n),t,e)}function Vo(n,t){var e=n.o,r=n.c.year+Math.trunc(t.years),i=n.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,u=P({},n.c,{year:r,month:i,day:Math.min(n.c.day,Pr(r,i))+Math.trunc(t.days)+Math.trunc(t.weeks)*7}),o=we.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=eu(u),s=qa(a,e,n.zone),l=s[0],h=s[1];return o!==0&&(l+=o,h=n.zone.offset(l)),{ts:l,o:h}}function Nn(n,t,e,r,i,u){var o=e.setZone,a=e.zone;if(n&&Object.keys(n).length!==0){var s=t||a,l=de.fromObject(n,P({},e,{zone:s,specificOffset:u}));return o?l:l.setZone(a)}else return de.invalid(new Je("unparsable",'the input "'+i+`" can't be parsed as `+r))}function Nr(n,t,e){return e===void 0&&(e=!0),n.isValid?yt.create(Fe.create("en-US"),{allowZ:e,forceSimple:!0}).formatDateTimeFromString(n,t):null}function Vi(n,t){var e=n.c.year>9999||n.c.year<0,r="";return e&&n.c.year>=0&&(r+="+"),r+=ce(n.c.year,e?6:4),t?(r+="-",r+=ce(n.c.month),r+="-",r+=ce(n.c.day)):(r+=ce(n.c.month),r+=ce(n.c.day)),r}function Lo(n,t,e,r,i,u){var o=ce(n.c.hour);return t?(o+=":",o+=ce(n.c.minute),(n.c.second!==0||!e)&&(o+=":")):o+=ce(n.c.minute),(n.c.second!==0||!e)&&(o+=ce(n.c.second),(n.c.millisecond!==0||!r)&&(o+=".",o+=ce(n.c.millisecond,3))),i&&(n.isOffsetFixed&&n.offset===0&&!u?o+="Z":n.o<0?(o+="-",o+=ce(Math.trunc(-n.o/60)),o+=":",o+=ce(Math.trunc(-n.o%60))):(o+="+",o+=ce(Math.trunc(n.o/60)),o+=":",o+=ce(Math.trunc(n.o%60)))),u&&(o+="["+n.zone.ianaName+"]"),o}var Ha={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},fd={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},md={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Wa=["year","month","day","hour","minute","second","millisecond"],hd=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],pd=["year","ordinal","hour","minute","second","millisecond"];function Ro(n){var t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[n.toLowerCase()];if(!t)throw new zo(n);return t}function Po(n,t){var e=Et(t.zone,le.defaultZone),r=Fe.fromObject(t),i=le.now(),u,o;if(q(n.year))u=i;else{for(var a=_t(Wa),s;!(s=a()).done;){var l=s.value;q(n[l])&&(n[l]=Ha[l])}var h=ja(n)||$a(n);if(h)return de.invalid(h);var d=e.offset(i),f=Rr(n,d,e);u=f[0],o=f[1]}return new de({ts:u,zone:e,loc:r,o})}function jo(n,t,e){var r=q(e.round)?!0:e.round,i=function(d,f){d=Xi(d,r||e.calendary?0:2,!0);var g=t.loc.clone(e).relFormatter(e);return g.format(d,f)},u=function(d){return e.calendary?t.hasSame(n,d)?0:t.startOf(d).diff(n.startOf(d),d).get(d):t.diff(n,d).get(d)};if(e.unit)return i(u(e.unit),e.unit);for(var o=_t(e.units),a;!(a=o()).done;){var s=a.value,l=u(s);if(Math.abs(l)>=1)return i(l,s)}return i(n>t?-0:0,e.units[e.units.length-1])}function $o(n){var t={},e;return n.length>0&&typeof n[n.length-1]=="object"?(t=n[n.length-1],e=Array.from(n).slice(0,n.length-1)):e=Array.from(n),[t,e]}var de=function(){function n(e){var r=e.zone||le.defaultZone,i=e.invalid||(Number.isNaN(e.ts)?new Je("invalid input"):null)||(r.isValid?null:Br(r));this.ts=q(e.ts)?le.now():e.ts;var u=null,o=null;if(!i){var a=e.old&&e.old.ts===this.ts&&e.old.zone.equals(r);if(a){var s=[e.old.c,e.old.o];u=s[0],o=s[1]}else{var l=r.offset(this.ts);u=No(this.ts,l),i=Number.isNaN(u.year)?new Je("invalid input"):null,u=i?null:u,o=i?null:l}}this._zone=r,this.loc=e.loc||Fe.create(),this.invalid=i,this.weekData=null,this.c=u,this.o=o,this.isLuxonDateTime=!0}n.now=function(){return new n({})},n.local=function(){var r=$o(arguments),i=r[0],u=r[1],o=u[0],a=u[1],s=u[2],l=u[3],h=u[4],d=u[5],f=u[6];return Po({year:o,month:a,day:s,hour:l,minute:h,second:d,millisecond:f},i)},n.utc=function(){var r=$o(arguments),i=r[0],u=r[1],o=u[0],a=u[1],s=u[2],l=u[3],h=u[4],d=u[5],f=u[6];return i.zone=Qe.utcInstance,Po({year:o,month:a,day:s,hour:l,minute:h,second:d,millisecond:f},i)},n.fromJSDate=function(r,i){i===void 0&&(i={});var u=wl(r)?r.valueOf():NaN;if(Number.isNaN(u))return n.invalid("invalid input");var o=Et(i.zone,le.defaultZone);return o.isValid?new n({ts:u,zone:o,loc:Fe.fromObject(i)}):n.invalid(Br(o))},n.fromMillis=function(r,i){if(i===void 0&&(i={}),Vt(r))return r<-Bo||r>Bo?n.invalid("Timestamp out of range"):new n({ts:r,zone:Et(i.zone,le.defaultZone),loc:Fe.fromObject(i)});throw new Le("fromMillis requires a numerical input, but received a "+typeof r+" with value "+r)},n.fromSeconds=function(r,i){if(i===void 0&&(i={}),Vt(r))return new n({ts:r*1e3,zone:Et(i.zone,le.defaultZone),loc:Fe.fromObject(i)});throw new Le("fromSeconds requires a numerical input")},n.fromObject=function(r,i){i===void 0&&(i={}),r=r||{};var u=Et(i.zone,le.defaultZone);if(!u.isValid)return n.invalid(Br(u));var o=le.now(),a=q(i.specificOffset)?u.offset(o):i.specificOffset,s=$r(r,Ro),l=!q(s.ordinal),h=!q(s.year),d=!q(s.month)||!q(s.day),f=h||d,g=s.weekYear||s.weekNumber,v=Fe.fromObject(i);if((f||l)&&g)throw new Rn("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(d&&l)throw new Rn("Can't mix ordinal dates with month/day");var F=g||s.weekday&&!f,S,C,L=No(o,a);F?(S=hd,C=fd,L=zi(L)):l?(S=pd,C=md,L=Ai(L)):(S=Wa,C=Ha);for(var U=!1,b=_t(S),O;!(O=b()).done;){var B=O.value,T=s[B];q(T)?U?s[B]=C[B]:s[B]=L[B]:U=!0}var R=F?cd(s):l?dd(s):ja(s),V=R||$a(s);if(V)return n.invalid(V);var X=F?Io(s):l?Ao(s):s,Be=Rr(X,a,u),_e=Be[0],st=Be[1],Me=new n({ts:_e,zone:u,o:st,loc:v});return s.weekday&&f&&r.weekday!==Me.weekday?n.invalid("mismatched weekday","you can't specify both a weekday of "+s.weekday+" and a date of "+Me.toISO()):Me},n.fromISO=function(r,i){i===void 0&&(i={});var u=Tc(r),o=u[0],a=u[1];return Nn(o,a,i,"ISO 8601",r)},n.fromRFC2822=function(r,i){i===void 0&&(i={});var u=Mc(r),o=u[0],a=u[1];return Nn(o,a,i,"RFC 2822",r)},n.fromHTTP=function(r,i){i===void 0&&(i={});var u=Oc(r),o=u[0],a=u[1];return Nn(o,a,i,"HTTP",i)},n.fromFormat=function(r,i,u){if(u===void 0&&(u={}),q(r)||q(i))throw new Le("fromFormat requires an input string and a format");var o=u,a=o.locale,s=a===void 0?null:a,l=o.numberingSystem,h=l===void 0?null:l,d=Fe.fromOpts({locale:s,numberingSystem:h,defaultToEN:!0}),f=ld(d,r,i),g=f[0],v=f[1],F=f[2],S=f[3];return S?n.invalid(S):Nn(g,v,u,"format "+i,r,F)},n.fromString=function(r,i,u){return u===void 0&&(u={}),n.fromFormat(r,i,u)},n.fromSQL=function(r,i){i===void 0&&(i={});var u=Rc(r),o=u[0],a=u[1];return Nn(o,a,i,"SQL",r)},n.invalid=function(r,i){if(i===void 0&&(i=null),!r)throw new Le("need to specify a reason the DateTime is invalid");var u=r instanceof Je?r:new Je(r,i);if(le.throwOnInvalid)throw new gl(u);return new n({invalid:u})},n.isDateTime=function(r){return r&&r.isLuxonDateTime||!1};var t=n.prototype;return t.get=function(r){return this[r]},t.resolvedLocaleOptions=function(r){r===void 0&&(r={});var i=yt.create(this.loc.clone(r),r).resolvedOptions(this),u=i.locale,o=i.numberingSystem,a=i.calendar;return{locale:u,numberingSystem:o,outputCalendar:a}},t.toUTC=function(r,i){return r===void 0&&(r=0),i===void 0&&(i={}),this.setZone(Qe.instance(r),i)},t.toLocal=function(){return this.setZone(le.defaultZone)},t.setZone=function(r,i){var u=i===void 0?{}:i,o=u.keepLocalTime,a=o===void 0?!1:o,s=u.keepCalendarTime,l=s===void 0?!1:s;if(r=Et(r,le.defaultZone),r.equals(this.zone))return this;if(r.isValid){var h=this.ts;if(a||l){var d=r.offset(this.ts),f=this.toObject(),g=Rr(f,d,r);h=g[0]}return Bn(this,{ts:h,zone:r})}else return n.invalid(Br(r))},t.reconfigure=function(r){var i=r===void 0?{}:r,u=i.locale,o=i.numberingSystem,a=i.outputCalendar,s=this.loc.clone({locale:u,numberingSystem:o,outputCalendar:a});return Bn(this,{loc:s})},t.setLocale=function(r){return this.reconfigure({locale:r})},t.set=function(r){if(!this.isValid)return this;var i=$r(r,Ro),u=!q(i.weekYear)||!q(i.weekNumber)||!q(i.weekday),o=!q(i.ordinal),a=!q(i.year),s=!q(i.month)||!q(i.day),l=a||s,h=i.weekYear||i.weekNumber;if((l||o)&&h)throw new Rn("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(s&&o)throw new Rn("Can't mix ordinal dates with month/day");var d;u?d=Io(P({},zi(this.c),i)):q(i.ordinal)?(d=P({},this.toObject(),i),q(i.day)&&(d.day=Math.min(Pr(d.year,d.month),d.day))):d=Ao(P({},Ai(this.c),i));var f=Rr(d,this.o,this.zone),g=f[0],v=f[1];return Bn(this,{ts:g,o:v})},t.plus=function(r){if(!this.isValid)return this;var i=we.fromDurationLike(r);return Bn(this,Vo(this,i))},t.minus=function(r){if(!this.isValid)return this;var i=we.fromDurationLike(r).negate();return Bn(this,Vo(this,i))},t.startOf=function(r){if(!this.isValid)return this;var i={},u=we.normalizeUnit(r);switch(u){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(u==="weeks"&&(i.weekday=1),u==="quarters"){var o=Math.ceil(this.month/3);i.month=(o-1)*3+1}return this.set(i)},t.endOf=function(r){var i;return this.isValid?this.plus((i={},i[r]=1,i)).startOf(r).minus(1):this},t.toFormat=function(r,i){return i===void 0&&(i={}),this.isValid?yt.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,r):Bi},t.toLocaleString=function(r,i){return r===void 0&&(r=ji),i===void 0&&(i={}),this.isValid?yt.create(this.loc.clone(i),r).formatDateTime(this):Bi},t.toLocaleParts=function(r){return r===void 0&&(r={}),this.isValid?yt.create(this.loc.clone(r),r).formatDateTimeParts(this):[]},t.toISO=function(r){var i=r===void 0?{}:r,u=i.format,o=u===void 0?"extended":u,a=i.suppressSeconds,s=a===void 0?!1:a,l=i.suppressMilliseconds,h=l===void 0?!1:l,d=i.includeOffset,f=d===void 0?!0:d,g=i.extendedZone,v=g===void 0?!1:g;if(!this.isValid)return null;var F=o==="extended",S=Vi(this,F);return S+="T",S+=Lo(this,F,s,h,f,v),S},t.toISODate=function(r){var i=r===void 0?{}:r,u=i.format,o=u===void 0?"extended":u;return this.isValid?Vi(this,o==="extended"):null},t.toISOWeekDate=function(){return Nr(this,"kkkk-'W'WW-c")},t.toISOTime=function(r){var i=r===void 0?{}:r,u=i.suppressMilliseconds,o=u===void 0?!1:u,a=i.suppressSeconds,s=a===void 0?!1:a,l=i.includeOffset,h=l===void 0?!0:l,d=i.includePrefix,f=d===void 0?!1:d,g=i.extendedZone,v=g===void 0?!1:g,F=i.format,S=F===void 0?"extended":F;if(!this.isValid)return null;var C=f?"T":"";return C+Lo(this,S==="extended",s,o,h,v)},t.toRFC2822=function(){return Nr(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)},t.toHTTP=function(){return Nr(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")},t.toSQLDate=function(){return this.isValid?Vi(this,!0):null},t.toSQLTime=function(r){var i=r===void 0?{}:r,u=i.includeOffset,o=u===void 0?!0:u,a=i.includeZone,s=a===void 0?!1:a,l=i.includeOffsetSpace,h=l===void 0?!0:l,d="HH:mm:ss.SSS";return(s||o)&&(h&&(d+=" "),s?d+="z":o&&(d+="ZZ")),Nr(this,d,!0)},t.toSQL=function(r){return r===void 0&&(r={}),this.isValid?this.toSQLDate()+" "+this.toSQLTime(r):null},t.toString=function(){return this.isValid?this.toISO():Bi},t.valueOf=function(){return this.toMillis()},t.toMillis=function(){return this.isValid?this.ts:NaN},t.toSeconds=function(){return this.isValid?this.ts/1e3:NaN},t.toUnixInteger=function(){return this.isValid?Math.floor(this.ts/1e3):NaN},t.toJSON=function(){return this.toISO()},t.toBSON=function(){return this.toJSDate()},t.toObject=function(r){if(r===void 0&&(r={}),!this.isValid)return{};var i=P({},this.c);return r.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i},t.toJSDate=function(){return new Date(this.isValid?this.ts:NaN)},t.diff=function(r,i,u){if(i===void 0&&(i="milliseconds"),u===void 0&&(u={}),!this.isValid||!r.isValid)return we.invalid("created by diffing an invalid DateTime");var o=P({locale:this.locale,numberingSystem:this.numberingSystem},u),a=Cl(i).map(we.normalizeUnit),s=r.valueOf()>this.valueOf(),l=s?this:r,h=s?r:this,d=Zc(l,h,a,o);return s?d.negate():d},t.diffNow=function(r,i){return r===void 0&&(r="milliseconds"),i===void 0&&(i={}),this.diff(n.now(),r,i)},t.until=function(r){return this.isValid?Hn.fromDateTimes(this,r):this},t.hasSame=function(r,i){if(!this.isValid)return!1;var u=r.valueOf(),o=this.setZone(r.zone,{keepLocalTime:!0});return o.startOf(i)<=u&&u<=o.endOf(i)},t.equals=function(r){return this.isValid&&r.isValid&&this.valueOf()===r.valueOf()&&this.zone.equals(r.zone)&&this.loc.equals(r.loc)},t.toRelative=function(r){if(r===void 0&&(r={}),!this.isValid)return null;var i=r.base||n.fromObject({},{zone:this.zone}),u=r.padding?this<i?-r.padding:r.padding:0,o=["years","months","days","hours","minutes","seconds"],a=r.unit;return Array.isArray(r.unit)&&(o=r.unit,a=void 0),jo(i,this.plus(u),P({},r,{numeric:"always",units:o,unit:a}))},t.toRelativeCalendar=function(r){return r===void 0&&(r={}),this.isValid?jo(r.base||n.fromObject({},{zone:this.zone}),this,P({},r,{numeric:"auto",units:["years","months","days"],calendary:!0})):null},n.min=function(){for(var r=arguments.length,i=new Array(r),u=0;u<r;u++)i[u]=arguments[u];if(!i.every(n.isDateTime))throw new Le("min requires all arguments be DateTimes");return vo(i,function(o){return o.valueOf()},Math.min)},n.max=function(){for(var r=arguments.length,i=new Array(r),u=0;u<r;u++)i[u]=arguments[u];if(!i.every(n.isDateTime))throw new Le("max requires all arguments be DateTimes");return vo(i,function(o){return o.valueOf()},Math.max)},n.fromFormatExplain=function(r,i,u){u===void 0&&(u={});var o=u,a=o.locale,s=a===void 0?null:a,l=o.numberingSystem,h=l===void 0?null:l,d=Fe.fromOpts({locale:s,numberingSystem:h,defaultToEN:!0});return Ba(d,r,i)},n.fromStringExplain=function(r,i,u){return u===void 0&&(u={}),n.fromFormatExplain(r,i,u)},ut(n,[{key:"isValid",get:function(){return this.invalid===null}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}},{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"outputCalendar",get:function(){return this.isValid?this.loc.outputCalendar:null}},{key:"zone",get:function(){return this._zone}},{key:"zoneName",get:function(){return this.isValid?this.zone.name:null}},{key:"year",get:function(){return this.isValid?this.c.year:NaN}},{key:"quarter",get:function(){return this.isValid?Math.ceil(this.c.month/3):NaN}},{key:"month",get:function(){return this.isValid?this.c.month:NaN}},{key:"day",get:function(){return this.isValid?this.c.day:NaN}},{key:"hour",get:function(){return this.isValid?this.c.hour:NaN}},{key:"minute",get:function(){return this.isValid?this.c.minute:NaN}},{key:"second",get:function(){return this.isValid?this.c.second:NaN}},{key:"millisecond",get:function(){return this.isValid?this.c.millisecond:NaN}},{key:"weekYear",get:function(){return this.isValid?Ni(this).weekYear:NaN}},{key:"weekNumber",get:function(){return this.isValid?Ni(this).weekNumber:NaN}},{key:"weekday",get:function(){return this.isValid?Ni(this).weekday:NaN}},{key:"ordinal",get:function(){return this.isValid?Ai(this.c).ordinal:NaN}},{key:"monthShort",get:function(){return this.isValid?jn.months("short",{locObj:this.loc})[this.month-1]:null}},{key:"monthLong",get:function(){return this.isValid?jn.months("long",{locObj:this.loc})[this.month-1]:null}},{key:"weekdayShort",get:function(){return this.isValid?jn.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}},{key:"weekdayLong",get:function(){return this.isValid?jn.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}},{key:"offset",get:function(){return this.isValid?+this.o:NaN}},{key:"offsetNameShort",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}},{key:"offsetNameLong",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}},{key:"isOffsetFixed",get:function(){return this.isValid?this.zone.isUniversal:null}},{key:"isInDST",get:function(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}},{key:"isInLeapYear",get:function(){return Yn(this.year)}},{key:"daysInMonth",get:function(){return Pr(this.year,this.month)}},{key:"daysInYear",get:function(){return this.isValid?$n(this.year):NaN}},{key:"weeksInWeekYear",get:function(){return this.isValid?jr(this.weekYear):NaN}}],[{key:"DATE_SHORT",get:function(){return ji}},{key:"DATE_MED",get:function(){return Zo}},{key:"DATE_MED_WITH_WEEKDAY",get:function(){return yl}},{key:"DATE_FULL",get:function(){return Go}},{key:"DATE_HUGE",get:function(){return Yo}},{key:"TIME_SIMPLE",get:function(){return Jo}},{key:"TIME_WITH_SECONDS",get:function(){return Qo}},{key:"TIME_WITH_SHORT_OFFSET",get:function(){return Ko}},{key:"TIME_WITH_LONG_OFFSET",get:function(){return Xo}},{key:"TIME_24_SIMPLE",get:function(){return ea}},{key:"TIME_24_WITH_SECONDS",get:function(){return ta}},{key:"TIME_24_WITH_SHORT_OFFSET",get:function(){return na}},{key:"TIME_24_WITH_LONG_OFFSET",get:function(){return ra}},{key:"DATETIME_SHORT",get:function(){return ia}},{key:"DATETIME_SHORT_WITH_SECONDS",get:function(){return ua}},{key:"DATETIME_MED",get:function(){return oa}},{key:"DATETIME_MED_WITH_SECONDS",get:function(){return aa}},{key:"DATETIME_MED_WITH_WEEKDAY",get:function(){return Fl}},{key:"DATETIME_FULL",get:function(){return sa}},{key:"DATETIME_FULL_WITH_SECONDS",get:function(){return la}},{key:"DATETIME_HUGE",get:function(){return ca}},{key:"DATETIME_HUGE_WITH_SECONDS",get:function(){return da}}]),n}();function Vn(n){if(de.isDateTime(n))return n;if(n&&n.valueOf&&Vt(n.valueOf()))return de.fromJSDate(n);if(n&&typeof n=="object")return de.fromObject(n);throw new Le("Unknown datetime argument: "+n+", of type "+typeof n)}var gd="2.4.0",ve=Pe.DateTime=de,$=Pe.Duration=we;Pe.FixedOffsetZone=Qe;Pe.IANAZone=Rt;Pe.Info=jn;Pe.Interval=Hn;Pe.InvalidZone=Ea;Pe.Settings=le;Pe.SystemZone=Ca;Pe.VERSION=gd;Pe.Zone=dn;var uu={renderNullAs:"\\-",taskCompletionTracking:!1,taskCompletionUseEmojiShorthand:!1,taskCompletionText:"completion",taskCompletionDateFormat:"yyyy-MM-dd",recursiveSubTaskCompletion:!1,warnOnEmptyResult:!0,refreshEnabled:!0,refreshInterval:2500,defaultDateFormat:"MMMM dd, yyyy",defaultDateTimeFormat:"h:mm a - MMMM dd, yyyy",maxRecursiveRenderDepth:4,tableIdColumnName:"File",tableGroupColumnName:"Group"},Dd={allowHtml:!0};({...uu,...Dd});var Un=class{constructor(t){this.value=t,this.successful=!0}map(t){return new Un(t(this.value))}flatMap(t){return t(this.value)}mapErr(t){return this}bimap(t,e){return this.map(t)}orElse(t){return this.value}cast(){return this}orElseThrow(t){return this.value}},zn=class{constructor(t){this.error=t,this.successful=!1}map(t){return this}flatMap(t){return this}mapErr(t){return new zn(t(this.error))}bimap(t,e){return this.mapErr(e)}orElse(t){return t}cast(){return this}orElseThrow(t){throw t?new Error(t(this.error)):new Error(""+this.error)}},qr;(function(n){function t(u){return new Un(u)}n.success=t;function e(u){return new zn(u)}n.failure=e;function r(u,o,a){return u.successful?o.successful?a(u.value,o.value):e(o.error):e(u.error)}n.flatMap2=r;function i(u,o,a){return r(u,o,(s,l)=>t(a(s,l)))}n.map2=i})(qr||(qr={}));var m={exports:{}};(function(n,t){(function(e,r){n.exports=r()})(typeof self!="undefined"?self:fl,function(){return function(e){var r={};function i(u){if(r[u])return r[u].exports;var o=r[u]={i:u,l:!1,exports:{}};return e[u].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=e,i.c=r,i.d=function(u,o,a){i.o(u,o)||Object.defineProperty(u,o,{configurable:!1,enumerable:!0,get:a})},i.r=function(u){Object.defineProperty(u,"__esModule",{value:!0})},i.n=function(u){var o=u&&u.__esModule?function(){return u.default}:function(){return u};return i.d(o,"a",o),o},i.o=function(u,o){return Object.prototype.hasOwnProperty.call(u,o)},i.p="",i(i.s=0)}([function(e,r,i){function u(c){if(!(this instanceof u))return new u(c);this._=c}var o=u.prototype;function a(c,p){for(var D=0;D<c;D++)p(D)}function s(c,p,D){return function(y,w){a(w.length,function(E){y(w[E],E,w)})}(function(y,w,E){p=c(p,y,w,E)},D),p}function l(c,p){return s(function(D,y,w,E){return D.concat([c(y,w,E)])},[],p)}function h(c,p){var D={v:0,buf:p};return a(c,function(){var y;D={v:D.v<<1|(y=D.buf,y[0]>>7),buf:function(w){var E=s(function(_,N,Q,Se){return _.concat(Q===Se.length-1?Buffer.from([N,0]).readUInt16BE(0):Se.readUInt16BE(Q))},[],w);return Buffer.from(l(function(_){return(_<<1&65535)>>8},E))}(D.buf)}}),D}function d(){return typeof Buffer!="undefined"}function f(){if(!d())throw new Error("Buffer global does not exist; please use webpack if you need to parse Buffers in the browser.")}function g(c){f();var p=s(function(E,_){return E+_},0,c);if(p%8!=0)throw new Error("The bits ["+c.join(", ")+"] add up to "+p+" which is not an even number of bytes; the total should be divisible by 8");var D,y=p/8,w=(D=function(E){return E>48},s(function(E,_){return E||(D(_)?_:E)},null,c));if(w)throw new Error(w+" bit range requested exceeds 48 bit (6 byte) Number max.");return new u(function(E,_){var N=y+_;return N>E.length?R(_,y.toString()+" bytes"):T(N,s(function(Q,Se){var be=h(Se,Q.buf);return{coll:Q.coll.concat(be.v),buf:be.buf}},{coll:[],buf:E.slice(_,N)},c).coll)})}function v(c,p){return new u(function(D,y){return f(),y+p>D.length?R(y,p+" bytes for "+c):T(y+p,D.slice(y,y+p))})}function F(c,p){if(typeof(D=p)!="number"||Math.floor(D)!==D||p<0||p>6)throw new Error(c+" requires integer length in range [0, 6].");var D}function S(c){return F("uintBE",c),v("uintBE("+c+")",c).map(function(p){return p.readUIntBE(0,c)})}function C(c){return F("uintLE",c),v("uintLE("+c+")",c).map(function(p){return p.readUIntLE(0,c)})}function L(c){return F("intBE",c),v("intBE("+c+")",c).map(function(p){return p.readIntBE(0,c)})}function U(c){return F("intLE",c),v("intLE("+c+")",c).map(function(p){return p.readIntLE(0,c)})}function b(c){return c instanceof u}function O(c){return{}.toString.call(c)==="[object Array]"}function B(c){return d()&&Buffer.isBuffer(c)}function T(c,p){return{status:!0,index:c,value:p,furthest:-1,expected:[]}}function R(c,p){return O(p)||(p=[p]),{status:!1,index:-1,value:null,furthest:c,expected:p}}function V(c,p){if(!p||c.furthest>p.furthest)return c;var D=c.furthest===p.furthest?function(y,w){if(function(){if(u._supportsSet!==void 0)return u._supportsSet;var ft=typeof Set!="undefined";return u._supportsSet=ft,ft}()&&Array.from){for(var E=new Set(y),_=0;_<w.length;_++)E.add(w[_]);var N=Array.from(E);return N.sort(),N}for(var Q={},Se=0;Se<y.length;Se++)Q[y[Se]]=!0;for(var be=0;be<w.length;be++)Q[w[be]]=!0;var dt=[];for(var Oe in Q)({}).hasOwnProperty.call(Q,Oe)&&dt.push(Oe);return dt.sort(),dt}(c.expected,p.expected):p.expected;return{status:c.status,index:c.index,value:c.value,furthest:p.furthest,expected:D}}var X={};function Be(c,p){if(B(c))return{offset:p,line:-1,column:-1};c in X||(X[c]={});for(var D=X[c],y=0,w=0,E=0,_=p;_>=0;){if(_ in D){y=D[_].line,E===0&&(E=D[_].lineStart);break}(c.charAt(_)===`
`||c.charAt(_)==="\r"&&c.charAt(_+1)!==`
`)&&(w++,E===0&&(E=_+1)),_--}var N=y+w,Q=p-E;return D[p]={line:N,lineStart:E},{offset:p,line:N+1,column:Q+1}}function _e(c){if(!b(c))throw new Error("not a parser: "+c)}function st(c,p){return typeof c=="string"?c.charAt(p):c[p]}function Me(c){if(typeof c!="number")throw new Error("not a number: "+c)}function et(c){if(typeof c!="function")throw new Error("not a function: "+c)}function lt(c){if(typeof c!="string")throw new Error("not a string: "+c)}var vn=2,er=3,qe=8,yn=5*qe,tr=4*qe,Fn="  ";function xe(c,p){return new Array(p+1).join(c)}function tt(c,p,D){var y=p-c.length;return y<=0?c:xe(D,y)+c}function Du(c,p,D,y){return{from:c-p>0?c-p:0,to:c+D>y?y:c+D}}function cs(c,p){var D,y,w,E,_,N=p.index,Q=N.offset,Se=1;if(Q===c.length)return"Got the end of the input";if(B(c)){var be=Q-Q%qe,dt=Q-be,Oe=Du(be,yn,tr+qe,c.length),ft=l(function(fe){return l(function(Wt){return tt(Wt.toString(16),2,"0")},fe)},function(fe,Wt){var Ut=fe.length,kt=[],zt=0;if(Ut<=Wt)return[fe.slice()];for(var Zt=0;Zt<Ut;Zt++)kt[zt]||kt.push([]),kt[zt].push(fe[Zt]),(Zt+1)%Wt==0&&zt++;return kt}(c.slice(Oe.from,Oe.to).toJSON().data,qe));E=function(fe){return fe.from===0&&fe.to===1?{from:fe.from,to:fe.to}:{from:fe.from/qe,to:Math.floor(fe.to/qe)}}(Oe),y=be/qe,D=3*dt,dt>=4&&(D+=1),Se=2,w=l(function(fe){return fe.length<=4?fe.join(" "):fe.slice(0,4).join(" ")+"  "+fe.slice(4).join(" ")},ft),(_=(8*(E.to>0?E.to-1:E.to)).toString(16).length)<2&&(_=2)}else{var Ht=c.split(/\r\n|[\n\r\u2028\u2029]/);D=N.column-1,y=N.line-1,E=Du(y,vn,er,Ht.length),w=Ht.slice(E.from,E.to),_=E.to.toString().length}var Fs=y-E.from;return B(c)&&(_=(8*(E.to>0?E.to-1:E.to)).toString(16).length)<2&&(_=2),s(function(fe,Wt,Ut){var kt,zt=Ut===Fs,Zt=zt?"> ":Fn;return kt=B(c)?tt((8*(E.from+Ut)).toString(16),_,"0"):tt((E.from+Ut+1).toString(),_," "),[].concat(fe,[Zt+kt+" | "+Wt],zt?[Fn+xe(" ",_)+" | "+tt("",D," ")+xe("^",Se)]:[])},[],w).join(`
`)}function vu(c,p){return[`
`,"-- PARSING FAILED "+xe("-",50),`

`,cs(c,p),`

`,(D=p.expected,D.length===1?`Expected:

`+D[0]:`Expected one of the following: 

`+D.join(", ")),`
`].join("");var D}function yu(c){return c.flags!==void 0?c.flags:[c.global?"g":"",c.ignoreCase?"i":"",c.multiline?"m":"",c.unicode?"u":"",c.sticky?"y":""].join("")}function nr(){for(var c=[].slice.call(arguments),p=c.length,D=0;D<p;D+=1)_e(c[D]);return u(function(y,w){for(var E,_=new Array(p),N=0;N<p;N+=1){if(!(E=V(c[N]._(y,w),E)).status)return E;_[N]=E.value,w=E.index}return V(T(w,_),E)})}function St(){var c=[].slice.call(arguments);if(c.length===0)throw new Error("seqMap needs at least one argument");var p=c.pop();return et(p),nr.apply(null,c).map(function(D){return p.apply(null,D)})}function rr(){var c=[].slice.call(arguments),p=c.length;if(p===0)return ir("zero alternates");for(var D=0;D<p;D+=1)_e(c[D]);return u(function(y,w){for(var E,_=0;_<c.length;_+=1)if((E=V(c[_]._(y,w),E)).status)return E;return E})}function Fu(c,p){return ni(c,p).or(xt([]))}function ni(c,p){return _e(c),_e(p),St(c,p.then(c).many(),function(D,y){return[D].concat(y)})}function bn(c){lt(c);var p="'"+c+"'";return u(function(D,y){var w=y+c.length,E=D.slice(y,w);return E===c?T(w,E):R(y,p)})}function ct(c,p){(function(w){if(!(w instanceof RegExp))throw new Error("not a regexp: "+w);for(var E=yu(w),_=0;_<E.length;_++){var N=E.charAt(_);if(N!=="i"&&N!=="m"&&N!=="u"&&N!=="s")throw new Error('unsupported regexp flag "'+N+'": '+w)}})(c),arguments.length>=2?Me(p):p=0;var D=function(w){return RegExp("^(?:"+w.source+")",yu(w))}(c),y=""+c;return u(function(w,E){var _=D.exec(w.slice(E));if(_){if(0<=p&&p<=_.length){var N=_[0],Q=_[p];return T(E+N.length,Q)}return R(E,"valid match group (0 to "+_.length+") in "+y)}return R(E,y)})}function xt(c){return u(function(p,D){return T(D,c)})}function ir(c){return u(function(p,D){return R(D,c)})}function ur(c){if(b(c))return u(function(p,D){var y=c._(p,D);return y.index=D,y.value="",y});if(typeof c=="string")return ur(bn(c));if(c instanceof RegExp)return ur(ct(c));throw new Error("not a string, regexp, or parser: "+c)}function bu(c){return _e(c),u(function(p,D){var y=c._(p,D),w=p.slice(D,y.index);return y.status?R(D,'not "'+w+'"'):T(D,null)})}function or(c){return et(c),u(function(p,D){var y=st(p,D);return D<p.length&&c(y)?T(D+1,y):R(D,"a character/byte matching "+c)})}function wu(c,p){arguments.length<2&&(p=c,c=void 0);var D=u(function(y,w){return D._=p()._,D._(y,w)});return c?D.desc(c):D}function ri(){return ir("fantasy-land/empty")}o.parse=function(c){if(typeof c!="string"&&!B(c))throw new Error(".parse must be called with a string or Buffer as its argument");var p,D=this.skip(ii)._(c,0);return p=D.status?{status:!0,value:D.value}:{status:!1,index:Be(c,D.furthest),expected:D.expected},delete X[c],p},o.tryParse=function(c){var p=this.parse(c);if(p.status)return p.value;var D=vu(c,p),y=new Error(D);throw y.type="ParsimmonError",y.result=p,y},o.assert=function(c,p){return this.chain(function(D){return c(D)?xt(D):ir(p)})},o.or=function(c){return rr(this,c)},o.trim=function(c){return this.wrap(c,c)},o.wrap=function(c,p){return St(c,this,p,function(D,y){return y})},o.thru=function(c){return c(this)},o.then=function(c){return _e(c),nr(this,c).map(function(p){return p[1]})},o.many=function(){var c=this;return u(function(p,D){for(var y=[],w=void 0;;){if(!(w=V(c._(p,D),w)).status)return V(T(D,y),w);if(D===w.index)throw new Error("infinite loop detected in .many() parser --- calling .many() on a parser which can accept zero characters is usually the cause");D=w.index,y.push(w.value)}})},o.tieWith=function(c){return lt(c),this.map(function(p){if(function(w){if(!O(w))throw new Error("not an array: "+w)}(p),p.length){lt(p[0]);for(var D=p[0],y=1;y<p.length;y++)lt(p[y]),D+=c+p[y];return D}return""})},o.tie=function(){return this.tieWith("")},o.times=function(c,p){var D=this;return arguments.length<2&&(p=c),Me(c),Me(p),u(function(y,w){for(var E=[],_=void 0,N=void 0,Q=0;Q<c;Q+=1){if(N=V(_=D._(y,w),N),!_.status)return N;w=_.index,E.push(_.value)}for(;Q<p&&(N=V(_=D._(y,w),N),_.status);Q+=1)w=_.index,E.push(_.value);return V(T(w,E),N)})},o.result=function(c){return this.map(function(){return c})},o.atMost=function(c){return this.times(0,c)},o.atLeast=function(c){return St(this.times(c),this.many(),function(p,D){return p.concat(D)})},o.map=function(c){et(c);var p=this;return u(function(D,y){var w=p._(D,y);return w.status?V(T(w.index,c(w.value)),w):w})},o.contramap=function(c){et(c);var p=this;return u(function(D,y){var w=p.parse(c(D.slice(y)));return w.status?T(y+D.length,w.value):w})},o.promap=function(c,p){return et(c),et(p),this.contramap(c).map(p)},o.skip=function(c){return nr(this,c).map(function(p){return p[0]})},o.mark=function(){return St(wn,this,wn,function(c,p,D){return{start:c,value:p,end:D}})},o.node=function(c){return St(wn,this,wn,function(p,D,y){return{name:c,value:D,start:p,end:y}})},o.sepBy=function(c){return Fu(this,c)},o.sepBy1=function(c){return ni(this,c)},o.lookahead=function(c){return this.skip(ur(c))},o.notFollowedBy=function(c){return this.skip(bu(c))},o.desc=function(c){O(c)||(c=[c]);var p=this;return u(function(D,y){var w=p._(D,y);return w.status||(w.expected=c),w})},o.fallback=function(c){return this.or(xt(c))},o.ap=function(c){return St(c,this,function(p,D){return p(D)})},o.chain=function(c){var p=this;return u(function(D,y){var w=p._(D,y);return w.status?V(c(w.value)._(D,w.index),w):w})},o.concat=o.or,o.empty=ri,o.of=xt,o["fantasy-land/ap"]=o.ap,o["fantasy-land/chain"]=o.chain,o["fantasy-land/concat"]=o.concat,o["fantasy-land/empty"]=o.empty,o["fantasy-land/of"]=o.of,o["fantasy-land/map"]=o.map;var wn=u(function(c,p){return T(p,Be(c,p))}),ds=u(function(c,p){return p>=c.length?R(p,"any character/byte"):T(p+1,st(c,p))}),fs=u(function(c,p){return T(c.length,c.slice(p))}),ii=u(function(c,p){return p<c.length?R(p,"EOF"):T(p,null)}),ms=ct(/[0-9]/).desc("a digit"),hs=ct(/[0-9]*/).desc("optional digits"),ps=ct(/[a-z]/i).desc("a letter"),gs=ct(/[a-z]*/i).desc("optional letters"),Ds=ct(/\s*/).desc("optional whitespace"),vs=ct(/\s+/).desc("whitespace"),Cu=bn("\r"),Eu=bn(`
`),_u=bn(`\r
`),Su=rr(_u,Eu,Cu).desc("newline"),ys=rr(Su,ii);u.all=fs,u.alt=rr,u.any=ds,u.cr=Cu,u.createLanguage=function(c){var p={};for(var D in c)({}).hasOwnProperty.call(c,D)&&function(y){p[y]=wu(function(){return c[y](p)})}(D);return p},u.crlf=_u,u.custom=function(c){return u(c(T,R))},u.digit=ms,u.digits=hs,u.empty=ri,u.end=ys,u.eof=ii,u.fail=ir,u.formatError=vu,u.index=wn,u.isParser=b,u.lazy=wu,u.letter=ps,u.letters=gs,u.lf=Eu,u.lookahead=ur,u.makeFailure=R,u.makeSuccess=T,u.newline=Su,u.noneOf=function(c){return or(function(p){return c.indexOf(p)<0}).desc("none of '"+c+"'")},u.notFollowedBy=bu,u.of=xt,u.oneOf=function(c){for(var p=c.split(""),D=0;D<p.length;D++)p[D]="'"+p[D]+"'";return or(function(y){return c.indexOf(y)>=0}).desc(p)},u.optWhitespace=Ds,u.Parser=u,u.range=function(c,p){return or(function(D){return c<=D&&D<=p}).desc(c+"-"+p)},u.regex=ct,u.regexp=ct,u.sepBy=Fu,u.sepBy1=ni,u.seq=nr,u.seqMap=St,u.seqObj=function(){for(var c,p={},D=0,y=(c=arguments,Array.prototype.slice.call(c)),w=y.length,E=0;E<w;E+=1){var _=y[E];if(!b(_)){if(O(_)&&_.length===2&&typeof _[0]=="string"&&b(_[1])){var N=_[0];if(Object.prototype.hasOwnProperty.call(p,N))throw new Error("seqObj: duplicate key "+N);p[N]=!0,D++;continue}throw new Error("seqObj arguments must be parsers or [string, parser] array pairs.")}}if(D===0)throw new Error("seqObj expects at least one named parser, found zero");return u(function(Q,Se){for(var be,dt={},Oe=0;Oe<w;Oe+=1){var ft,Ht;if(O(y[Oe])?(ft=y[Oe][0],Ht=y[Oe][1]):(ft=null,Ht=y[Oe]),!(be=V(Ht._(Q,Se),be)).status)return be;ft&&(dt[ft]=be.value),Se=be.index}return V(T(Se,dt),be)})},u.string=bn,u.succeed=xt,u.takeWhile=function(c){return et(c),u(function(p,D){for(var y=D;y<p.length&&c(st(p,y));)y++;return T(y,p.slice(D,y))})},u.test=or,u.whitespace=vs,u["fantasy-land/empty"]=ri,u["fantasy-land/of"]=xt,u.Binary={bitSeq:g,bitSeqObj:function(c){f();var p={},D=0,y=l(function(E){if(O(E)){var _=E;if(_.length!==2)throw new Error("["+_.join(", ")+"] should be length 2, got length "+_.length);if(lt(_[0]),Me(_[1]),Object.prototype.hasOwnProperty.call(p,_[0]))throw new Error("duplicate key in bitSeqObj: "+_[0]);return p[_[0]]=!0,D++,_}return Me(E),[null,E]},c);if(D<1)throw new Error("bitSeqObj expects at least one named pair, got ["+c.join(", ")+"]");var w=l(function(E){return E[0]},y);return g(l(function(E){return E[1]},y)).map(function(E){return s(function(_,N){return N[0]!==null&&(_[N[0]]=N[1]),_},{},l(function(_,N){return[_,E[N]]},w))})},byte:function(c){if(f(),Me(c),c>255)throw new Error("Value specified to byte constructor ("+c+"=0x"+c.toString(16)+") is larger in value than a single byte.");var p=(c>15?"0x":"0x0")+c.toString(16);return u(function(D,y){var w=st(D,y);return w===c?T(y+1,w):R(y,p)})},buffer:function(c){return v("buffer",c).map(function(p){return Buffer.from(p)})},encodedString:function(c,p){return v("string",p).map(function(D){return D.toString(c)})},uintBE:S,uint8BE:S(1),uint16BE:S(2),uint32BE:S(4),uintLE:C,uint8LE:C(1),uint16LE:C(2),uint32LE:C(4),intBE:L,int8BE:L(1),int16BE:L(2),int32BE:L(4),intLE:U,int8LE:U(1),int16LE:U(2),int32LE:U(4),floatBE:v("floatBE",4).map(function(c){return c.readFloatBE(0)}),floatLE:v("floatLE",4).map(function(c){return c.readFloatLE(0)}),doubleBE:v("doubleBE",8).map(function(c){return c.readDoubleBE(0)}),doubleLE:v("doubleLE",8).map(function(c){return c.readDoubleLE(0)})},e.exports=u}])})})(m);var ou=()=>/(?:[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26F9(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC3\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDD-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC08(?:\u200D\u2B1B)?|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF6](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC2\uDED0-\uDED9\uDEE0-\uDEE7]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?))/g;function Ua(n){return n==null?n:n.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds").normalize()}function qo(n){return n.includes("/")&&(n=n.substring(n.lastIndexOf("/")+1)),n.endsWith(".md")&&(n=n.substring(0,n.length-3)),n}m.exports.alt(m.exports.regex(new RegExp(ou(),"")),m.exports.regex(/[0-9\p{Letter}_-]+/u).map(n=>n.toLocaleLowerCase()),m.exports.whitespace.map(n=>"-"),m.exports.any.map(n=>"")).many().map(n=>n.join(""));var vd=m.exports.alt(m.exports.regex(new RegExp(ou(),"")),m.exports.regex(/[0-9\p{Letter}_-]+/u),m.exports.whitespace.map(n=>" "),m.exports.any.map(n=>" ")).many().map(n=>n.join("").split(/\s+/).join(" ").trim());function yd(n){return vd.tryParse(n)}function Fd(n){n=Ua(n);let t="";return n.years&&(t+=`${n.years} years, `),n.months&&(t+=`${n.months} months, `),n.weeks&&(t+=`${n.weeks} weeks, `),n.days&&(t+=`${n.days} days, `),n.hours&&(t+=`${n.hours} hours, `),n.minutes&&(t+=`${n.minutes} minutes, `),n.seconds&&(t+=`${Math.round(n.seconds)} seconds, `),n.milliseconds&&(t+=`${Math.round(n.milliseconds)} ms, `),t.endsWith(", ")&&(t=t.substring(0,t.length-2)),t}var Zn;(function(n){function t(b,O=uu,B=!1){let T=e(b);if(!T)return O.renderNullAs;switch(T.type){case"null":return O.renderNullAs;case"string":return T.value;case"number":case"boolean":return""+T.value;case"html":return T.value.outerHTML;case"widget":return T.value.markdown();case"link":return T.value.markdown();case"function":return"<function>";case"array":let R="";return B&&(R+="["),R+=T.value.map(V=>t(V,O,!0)).join(", "),B&&(R+="]"),R;case"object":return"{ "+Object.entries(T.value).map(V=>V[0]+": "+t(V[1],O,!0)).join(", ")+" }";case"date":return T.value.second==0&&T.value.hour==0&&T.value.minute==0?T.value.toFormat(O.defaultDateFormat):T.value.toFormat(O.defaultDateTimeFormat);case"duration":return Fd(T.value)}}n.toString=t;function e(b){return f(b)?{type:"null",value:b}:l(b)?{type:"number",value:b}:s(b)?{type:"string",value:b}:v(b)?{type:"boolean",value:b}:d(b)?{type:"duration",value:b}:h(b)?{type:"date",value:b}:S(b)?{type:"widget",value:b}:g(b)?{type:"array",value:b}:F(b)?{type:"link",value:b}:U(b)?{type:"function",value:b}:C(b)?{type:"html",value:b}:L(b)?{type:"object",value:b}:void 0}n.wrapValue=e;function r(b,O){if(L(b)){let B={};for(let[T,R]of Object.entries(b))B[T]=r(R,O);return B}else if(g(b)){let B=[];for(let T of b)B.push(r(T,O));return B}else return O(b)}n.mapLeaves=r;function i(b,O,B){var T,R;if(b===void 0&&(b=null),O===void 0&&(O=null),b===null&&O===null)return 0;if(b===null)return-1;if(O===null)return 1;let V=e(b),X=e(O);if(V===void 0&&X===void 0)return 0;if(V===void 0)return-1;if(X===void 0)return 1;if(V.type!=X.type)return V.type.localeCompare(X.type);if(V.value===X.value)return 0;switch(V.type){case"string":return V.value.localeCompare(X.value);case"number":return V.value<X.value?-1:V.value==X.value?0:1;case"null":return 0;case"boolean":return V.value==X.value?0:V.value?1:-1;case"link":let Be=V.value,_e=X.value,st=B!=null?B:xe=>xe,Me=st(Be.path).localeCompare(st(_e.path));if(Me!=0)return Me;let et=Be.type.localeCompare(_e.type);return et!=0?et:Be.subpath&&!_e.subpath?1:!Be.subpath&&_e.subpath?-1:!Be.subpath&&!_e.subpath?0:((T=Be.subpath)!==null&&T!==void 0?T:"").localeCompare((R=_e.subpath)!==null&&R!==void 0?R:"");case"date":return V.value<X.value?-1:V.value.equals(X.value)?0:1;case"duration":return V.value<X.value?-1:V.value.equals(X.value)?0:1;case"array":let lt=V.value,vn=X.value;for(let xe=0;xe<Math.min(lt.length,vn.length);xe++){let tt=i(lt[xe],vn[xe]);if(tt!=0)return tt}return lt.length-vn.length;case"object":let er=V.value,qe=X.value,yn=Array.from(Object.keys(er)),tr=Array.from(Object.keys(qe));yn.sort(),tr.sort();let Fn=i(yn,tr);if(Fn!=0)return Fn;for(let xe of yn){let tt=i(er[xe],qe[xe]);if(tt!=0)return tt}return 0;case"widget":case"html":case"function":return 0}}n.compareValue=i;function u(b){var O;return(O=e(b))===null||O===void 0?void 0:O.type}n.typeOf=u;function o(b){let O=e(b);if(!O)return!1;switch(O.type){case"number":return O.value!=0;case"string":return O.value.length>0;case"boolean":return O.value;case"link":return!!O.value.path;case"date":return O.value.toMillis()!=0;case"duration":return O.value.as("seconds")!=0;case"object":return Object.keys(O.value).length>0;case"array":return O.value.length>0;case"null":return!1;case"html":case"widget":case"function":return!0}}n.isTruthy=o;function a(b){if(b==null)return b;if(n.isArray(b))return[].concat(b.map(O=>a(O)));if(n.isObject(b)){let O={};for(let[B,T]of Object.entries(b))O[B]=a(T);return O}else return b}n.deepCopy=a;function s(b){return typeof b=="string"}n.isString=s;function l(b){return typeof b=="number"}n.isNumber=l;function h(b){return b instanceof ve}n.isDate=h;function d(b){return b instanceof $}n.isDuration=d;function f(b){return b==null}n.isNull=f;function g(b){return Array.isArray(b)}n.isArray=g;function v(b){return typeof b=="boolean"}n.isBoolean=v;function F(b){return b instanceof ye}n.isLink=F;function S(b){return b instanceof Gn}n.isWidget=S;function C(b){return typeof HTMLElement!="undefined"?b instanceof HTMLElement:!1}n.isHtml=C;function L(b){return typeof b=="object"&&!C(b)&&!S(b)&&!g(b)&&!d(b)&&!h(b)&&!F(b)&&b!==void 0&&!f(b)}n.isObject=L;function U(b){return typeof b=="function"}n.isFunction=U})(Zn||(Zn={}));var Ho;(function(n){function t(i){return Zn.isObject(i)&&Object.keys(i).length==2&&"key"in i&&"rows"in i}n.isElementGroup=t;function e(i){for(let u of i)if(!t(u))return!1;return!0}n.isGrouping=e;function r(i){if(e(i)){let u=0;for(let o of i)u+=r(o.rows);return u}else return i.length}n.count=r})(Ho||(Ho={}));var ye=class{constructor(t){Object.assign(this,t)}static file(t,e=!1,r){return new ye({path:t,embed:e,display:r,subpath:void 0,type:"file"})}static infer(t,e=!1,r){if(t.includes("#^")){let i=t.split("#^");return ye.block(i[0],i[1],e,r)}else if(t.includes("#")){let i=t.split("#");return ye.header(i[0],i[1],e,r)}else return ye.file(t,e,r)}static header(t,e,r,i){return new ye({path:t,embed:r,display:i,subpath:yd(e),type:"header"})}static block(t,e,r,i){return new ye({path:t,embed:r,display:i,subpath:e,type:"block"})}static fromObject(t){return new ye(t)}equals(t){return t==null||t==null?!1:this.path==t.path&&this.type==t.type&&this.subpath==t.subpath}toString(){return this.markdown()}toObject(){return{path:this.path,type:this.type,subpath:this.subpath,display:this.display,embed:this.embed}}withPath(t){return new ye(Object.assign({},this,{path:t}))}withDisplay(t){return new ye(Object.assign({},this,{display:t}))}withHeader(t){return ye.header(this.path,t,this.embed,this.display)}toFile(){return ye.file(this.path,this.embed,this.display)}toEmbed(){if(this.embed)return this;{let t=new ye(this);return t.embed=!0,t}}fromEmbed(){if(this.embed){let t=new ye(this);return t.embed=!1,t}else return this}markdown(){let t=(this.embed?"!":"")+"[["+this.obsidianLink();return this.display?t+="|"+this.display:(t+="|"+qo(this.path),(this.type=="header"||this.type=="block")&&(t+=" > "+this.subpath)),t+="]]",t}obsidianLink(){var t,e;let r=this.path.replace("|","\\|");return this.type=="header"?r+"#"+((t=this.subpath)===null||t===void 0?void 0:t.replace("|","\\|")):this.type=="block"?r+"#^"+((e=this.subpath)===null||e===void 0?void 0:e.replace("|","\\|")):r}fileName(){return qo(this.path).replace(".md","")}},Gn=class{constructor(t){this.$widget=t}},Zi=class extends Gn{constructor(t,e){super("dataview:list-pair"),this.key=t,this.value=e}markdown(){return`${Zn.toString(this.key)}: ${Zn.toString(this.value)}`}},Gi=class extends Gn{constructor(t,e){super("dataview:external-link"),this.url=t,this.display=e}markdown(){var t;return`[${(t=this.display)!==null&&t!==void 0?t:this.url}](${this.url})`}},Wo;(function(n){function t(o,a){return new Zi(o,a)}n.listPair=t;function e(o,a){return new Gi(o,a)}n.externalLink=e;function r(o){return o.$widget==="dataview:list-pair"}n.isListPair=r;function i(o){return o.$widget==="dataview:external-link"}n.isExternalLink=i;function u(o){return r(o)||i(o)}n.isBuiltin=u})(Wo||(Wo={}));var re;(function(n){function t(f){return{type:"variable",name:f}}n.variable=t;function e(f){return{type:"literal",value:f}}n.literal=e;function r(f,g,v){return{type:"binaryop",left:f,op:g,right:v}}n.binaryOp=r;function i(f,g){return{type:"index",object:f,index:g}}n.index=i;function u(f){let g=f.split("."),v=n.variable(g[0]);for(let F=1;F<g.length;F++)v=n.index(v,n.literal(g[F]));return v}n.indexVariable=u;function o(f,g){return{type:"lambda",arguments:f,value:g}}n.lambda=o;function a(f,g){return{type:"function",func:f,arguments:g}}n.func=a;function s(f){return{type:"list",values:f}}n.list=s;function l(f){return{type:"object",values:f}}n.object=l;function h(f){return{type:"negated",child:f}}n.negate=h;function d(f){return f=="<="||f=="<"||f==">"||f==">="||f=="!="||f=="="}n.isCompareOp=d,n.NULL=n.literal(null)})(re||(re={}));var it;(function(n){function t(h){return{type:"tag",tag:h}}n.tag=t;function e(h){return{type:"csv",path:h}}n.csv=e;function r(h){return{type:"folder",folder:h}}n.folder=r;function i(h,d){return{type:"link",file:h,direction:d?"incoming":"outgoing"}}n.link=i;function u(h,d,f){return{type:"binaryop",left:h,op:d,right:f}}n.binaryOp=u;function o(h,d){return{type:"binaryop",left:h,op:"&",right:d}}n.and=o;function a(h,d){return{type:"binaryop",left:h,op:"|",right:d}}n.or=a;function s(h){return{type:"negate",child:h}}n.negate=s;function l(){return{type:"empty"}}n.empty=l})(it||(it={}));var Li=new RegExp(ou(),""),Yi={year:$.fromObject({years:1}),years:$.fromObject({years:1}),yr:$.fromObject({years:1}),yrs:$.fromObject({years:1}),month:$.fromObject({months:1}),months:$.fromObject({months:1}),mo:$.fromObject({months:1}),mos:$.fromObject({months:1}),week:$.fromObject({weeks:1}),weeks:$.fromObject({weeks:1}),wk:$.fromObject({weeks:1}),wks:$.fromObject({weeks:1}),w:$.fromObject({weeks:1}),day:$.fromObject({days:1}),days:$.fromObject({days:1}),d:$.fromObject({days:1}),hour:$.fromObject({hours:1}),hours:$.fromObject({hours:1}),hr:$.fromObject({hours:1}),hrs:$.fromObject({hours:1}),h:$.fromObject({hours:1}),minute:$.fromObject({minutes:1}),minutes:$.fromObject({minutes:1}),min:$.fromObject({minutes:1}),mins:$.fromObject({minutes:1}),m:$.fromObject({minutes:1}),second:$.fromObject({seconds:1}),seconds:$.fromObject({seconds:1}),sec:$.fromObject({seconds:1}),secs:$.fromObject({seconds:1}),s:$.fromObject({seconds:1})},Ji={now:()=>ve.local(),today:()=>ve.local().startOf("day"),yesterday:()=>ve.local().startOf("day").minus($.fromObject({days:1})),tomorrow:()=>ve.local().startOf("day").plus($.fromObject({days:1})),sow:()=>ve.local().startOf("week"),"start-of-week":()=>ve.local().startOf("week"),eow:()=>ve.local().endOf("week"),"end-of-week":()=>ve.local().endOf("week"),soy:()=>ve.local().startOf("year"),"start-of-year":()=>ve.local().startOf("year"),eoy:()=>ve.local().endOf("year"),"end-of-year":()=>ve.local().endOf("year"),som:()=>ve.local().startOf("month"),"start-of-month":()=>ve.local().startOf("month"),eom:()=>ve.local().endOf("month"),"end-of-month":()=>ve.local().endOf("month")},Qi=["FROM","WHERE","LIMIT","GROUP","FLATTEN"];function bd(n){let t=-1;for(;(t=n.indexOf("|",t+1))>=0;)if(!(t>0&&n[t-1]=="\\"))return[n.substring(0,t).replace(/\\\|/g,"|"),n.substring(t+1)];return[n.replace(/\\\|/g,"|"),void 0]}function wd(n){let[t,e]=bd(n);return ye.infer(t,!1,e)}function Ln(n,t,e){return m.exports.seqMap(n,m.exports.seq(m.exports.optWhitespace,t,m.exports.optWhitespace,n).many(),(r,i)=>{if(i.length==0)return r;let u=e(r,i[0][1],i[0][3]);for(let o=1;o<i.length;o++)u=e(u,i[o][1],i[o][3]);return u})}function Cd(n,...t){return m.exports.custom((e,r)=>(i,u)=>{let o=n._(i,u);if(!o.status)return o;for(let a of t){let s=a(o.value)._(i,o.index);if(!s.status)return o;o=s}return o})}var Ye=m.exports.createLanguage({number:n=>m.exports.regexp(/-?[0-9]+(\.[0-9]+)?/).map(t=>Number.parseFloat(t)).desc("number"),string:n=>m.exports.string('"').then(m.exports.alt(n.escapeCharacter,m.exports.noneOf('"\\')).atLeast(0).map(t=>t.join(""))).skip(m.exports.string('"')).desc("string"),escapeCharacter:n=>m.exports.string("\\").then(m.exports.any).map(t=>t==='"'?'"':t==="\\"?"\\":"\\"+t),bool:n=>m.exports.regexp(/true|false|True|False/).map(t=>t.toLowerCase()=="true").desc("boolean ('true' or 'false')"),tag:n=>m.exports.seqMap(m.exports.string("#"),m.exports.alt(m.exports.regexp(/[\p{Letter}0-9_/-]/u).desc("text"),m.exports.regexp(Li).desc("text")).many(),(t,e)=>t+e.join("")).desc("tag ('#hello/stuff')"),identifier:n=>m.exports.seqMap(m.exports.alt(m.exports.regexp(/\p{Letter}/u),m.exports.regexp(Li).desc("text")),m.exports.alt(m.exports.regexp(/[0-9\p{Letter}_-]/u),m.exports.regexp(Li).desc("text")).many(),(t,e)=>t+e.join("")).desc("variable identifier"),link:n=>m.exports.regexp(/\[\[([^\[\]]*?)\]\]/u,1).map(t=>wd(t)).desc("file link"),embedLink:n=>m.exports.seqMap(m.exports.string("!").atMost(1),n.link,(t,e)=>(t.length>0&&(e.embed=!0),e)).desc("file link"),binaryPlusMinus:n=>m.exports.regexp(/\+|-/).map(t=>t).desc("'+' or '-'"),binaryMulDiv:n=>m.exports.regexp(/\*|\/|%/).map(t=>t).desc("'*' or '/' or '%'"),binaryCompareOp:n=>m.exports.regexp(/>=|<=|!=|>|<|=/).map(t=>t).desc("'>=' or '<=' or '!=' or '=' or '>' or '<'"),binaryBooleanOp:n=>m.exports.regexp(/and|or|&|\|/i).map(t=>t.toLowerCase()=="and"?"&":t.toLowerCase()=="or"?"|":t).desc("'and' or 'or'"),rootDate:n=>m.exports.seqMap(m.exports.regexp(/\d{4}/),m.exports.string("-"),m.exports.regexp(/\d{2}/),(t,e,r)=>ve.fromObject({year:Number.parseInt(t),month:Number.parseInt(r)})).desc("date in format YYYY-MM[-DDTHH-MM-SS.MS]"),dateShorthand:n=>m.exports.alt(...Object.keys(Ji).sort((t,e)=>e.length-t.length).map(m.exports.string)),date:n=>Cd(n.rootDate,t=>m.exports.seqMap(m.exports.string("-"),m.exports.regexp(/\d{2}/),(e,r)=>t.set({day:Number.parseInt(r)})),t=>m.exports.seqMap(m.exports.string("T"),m.exports.regexp(/\d{2}/),(e,r)=>t.set({hour:Number.parseInt(r)})),t=>m.exports.seqMap(m.exports.string(":"),m.exports.regexp(/\d{2}/),(e,r)=>t.set({minute:Number.parseInt(r)})),t=>m.exports.seqMap(m.exports.string(":"),m.exports.regexp(/\d{2}/),(e,r)=>t.set({second:Number.parseInt(r)})),t=>m.exports.alt(m.exports.seqMap(m.exports.string("."),m.exports.regexp(/\d{3}/),(e,r)=>t.set({millisecond:Number.parseInt(r)})),m.exports.succeed(t)),t=>m.exports.alt(m.exports.seqMap(m.exports.string("+").or(m.exports.string("-")),m.exports.regexp(/\d{1,2}(:\d{2})?/),(e,r)=>t.setZone("UTC"+e+r,{keepLocalTime:!0})),m.exports.seqMap(m.exports.string("Z"),()=>t.setZone("utc",{keepLocalTime:!0})),m.exports.seqMap(m.exports.string("["),m.exports.regexp(/[0-9A-Za-z+-\/]+/u),m.exports.string("]"),(e,r,i)=>t.setZone(r,{keepLocalTime:!0})))).assert(t=>t.isValid,"valid date").desc("date in format YYYY-MM[-DDTHH-MM-SS.MS]"),datePlus:n=>m.exports.alt(n.dateShorthand.map(t=>Ji[t]()),n.date).desc("date in format YYYY-MM[-DDTHH-MM-SS.MS] or in shorthand"),durationType:n=>m.exports.alt(...Object.keys(Yi).sort((t,e)=>e.length-t.length).map(m.exports.string)),duration:n=>m.exports.seqMap(n.number,m.exports.optWhitespace,n.durationType,(t,e,r)=>Yi[r].mapUnits(i=>i*t)).sepBy1(m.exports.string(",").trim(m.exports.optWhitespace).or(m.exports.optWhitespace)).map(t=>t.reduce((e,r)=>e.plus(r))).desc("duration like 4hr2min"),rawNull:n=>m.exports.string("null"),tagSource:n=>n.tag.map(t=>it.tag(t)),csvSource:n=>m.exports.seqMap(m.exports.string("csv(").skip(m.exports.optWhitespace),n.string,m.exports.string(")"),(t,e,r)=>it.csv(e)),linkIncomingSource:n=>n.link.map(t=>it.link(t.path,!0)),linkOutgoingSource:n=>m.exports.seqMap(m.exports.string("outgoing(").skip(m.exports.optWhitespace),n.link,m.exports.string(")"),(t,e,r)=>it.link(e.path,!1)),folderSource:n=>n.string.map(t=>it.folder(t)),parensSource:n=>m.exports.seqMap(m.exports.string("("),m.exports.optWhitespace,n.source,m.exports.optWhitespace,m.exports.string(")"),(t,e,r,i,u)=>r),negateSource:n=>m.exports.seqMap(m.exports.alt(m.exports.string("-"),m.exports.string("!")),n.atomSource,(t,e)=>it.negate(e)),atomSource:n=>m.exports.alt(n.parensSource,n.negateSource,n.linkOutgoingSource,n.linkIncomingSource,n.folderSource,n.tagSource,n.csvSource),binaryOpSource:n=>Ln(n.atomSource,n.binaryBooleanOp.map(t=>t),it.binaryOp),source:n=>n.binaryOpSource,variableField:n=>n.identifier.chain(t=>Qi.includes(t.toUpperCase())?m.exports.fail("Variable fields cannot be a keyword ("+Qi.join(" or ")+")"):m.exports.succeed(re.variable(t))).desc("variable"),numberField:n=>n.number.map(t=>re.literal(t)).desc("number"),stringField:n=>n.string.map(t=>re.literal(t)).desc("string"),boolField:n=>n.bool.map(t=>re.literal(t)).desc("boolean"),dateField:n=>m.exports.seqMap(m.exports.string("date("),m.exports.optWhitespace,n.datePlus,m.exports.optWhitespace,m.exports.string(")"),(t,e,r,i,u)=>re.literal(r)).desc("date"),durationField:n=>m.exports.seqMap(m.exports.string("dur("),m.exports.optWhitespace,n.duration,m.exports.optWhitespace,m.exports.string(")"),(t,e,r,i,u)=>re.literal(r)).desc("duration"),nullField:n=>n.rawNull.map(t=>re.NULL),linkField:n=>n.link.map(t=>re.literal(t)),listField:n=>n.field.sepBy(m.exports.string(",").trim(m.exports.optWhitespace)).wrap(m.exports.string("[").skip(m.exports.optWhitespace),m.exports.optWhitespace.then(m.exports.string("]"))).map(t=>re.list(t)).desc("list ('[1, 2, 3]')"),objectField:n=>m.exports.seqMap(n.identifier.or(n.string),m.exports.string(":").trim(m.exports.optWhitespace),n.field,(t,e,r)=>({name:t,value:r})).sepBy(m.exports.string(",").trim(m.exports.optWhitespace)).wrap(m.exports.string("{").skip(m.exports.optWhitespace),m.exports.optWhitespace.then(m.exports.string("}"))).map(t=>{let e={};for(let r of t)e[r.name]=r.value;return re.object(e)}).desc("object ('{ a: 1, b: 2 }')"),atomInlineField:n=>m.exports.alt(n.date,n.duration.map(t=>Ua(t)),n.string,n.tag,n.embedLink,n.bool,n.number,n.rawNull),inlineFieldList:n=>n.atomInlineField.sepBy(m.exports.string(",").trim(m.exports.optWhitespace).lookahead(n.atomInlineField)),inlineField:n=>m.exports.alt(m.exports.seqMap(n.atomInlineField,m.exports.string(",").trim(m.exports.optWhitespace),n.inlineFieldList,(t,e,r)=>[t].concat(r)),n.atomInlineField),atomField:n=>m.exports.alt(n.embedLink.map(t=>re.literal(t)),n.negatedField,n.linkField,n.listField,n.objectField,n.lambdaField,n.parensField,n.boolField,n.numberField,n.stringField,n.dateField,n.durationField,n.nullField,n.variableField),indexField:n=>m.exports.seqMap(n.atomField,m.exports.alt(n.dotPostfix,n.indexPostfix,n.functionPostfix).many(),(t,e)=>{let r=t;for(let i of e)switch(i.type){case"dot":r=re.index(r,re.literal(i.field));break;case"index":r=re.index(r,i.field);break;case"function":r=re.func(r,i.fields);break}return r}),negatedField:n=>m.exports.seqMap(m.exports.string("!"),n.indexField,(t,e)=>re.negate(e)).desc("negated field"),parensField:n=>m.exports.seqMap(m.exports.string("("),m.exports.optWhitespace,n.field,m.exports.optWhitespace,m.exports.string(")"),(t,e,r,i,u)=>r),lambdaField:n=>m.exports.seqMap(n.identifier.sepBy(m.exports.string(",").trim(m.exports.optWhitespace)).wrap(m.exports.string("(").trim(m.exports.optWhitespace),m.exports.string(")").trim(m.exports.optWhitespace)),m.exports.string("=>").trim(m.exports.optWhitespace),n.field,(t,e,r)=>({type:"lambda",arguments:t,value:r})),dotPostfix:n=>m.exports.seqMap(m.exports.string("."),n.identifier,(t,e)=>({type:"dot",field:e})),indexPostfix:n=>m.exports.seqMap(m.exports.string("["),m.exports.optWhitespace,n.field,m.exports.optWhitespace,m.exports.string("]"),(t,e,r,i,u)=>({type:"index",field:r})),functionPostfix:n=>m.exports.seqMap(m.exports.string("("),m.exports.optWhitespace,n.field.sepBy(m.exports.string(",").trim(m.exports.optWhitespace)),m.exports.optWhitespace,m.exports.string(")"),(t,e,r,i,u)=>({type:"function",fields:r})),binaryMulDivField:n=>Ln(n.indexField,n.binaryMulDiv,re.binaryOp),binaryPlusMinusField:n=>Ln(n.binaryMulDivField,n.binaryPlusMinus,re.binaryOp),binaryCompareField:n=>Ln(n.binaryPlusMinusField,n.binaryCompareOp,re.binaryOp),binaryBooleanField:n=>Ln(n.binaryCompareField,n.binaryBooleanOp,re.binaryOp),binaryOpField:n=>n.binaryBooleanField,field:n=>n.binaryOpField});function Ed(n){try{return qr.success(Ye.field.tryParse(n))}catch(t){return qr.failure(""+t)}}var Hr;(function(n){function t(r,i){return{name:r,field:i}}n.named=t;function e(r,i){return{field:r,direction:i}}n.sortBy=e})(Hr||(Hr={}));function _d(n){return m.exports.custom((t,e)=>(r,i)=>{let u=n._(r,i);return u.status?Object.assign({},u,{value:[u.value,r.substring(i,u.index)]}):u})}function Sd(n){return n.split(/[\r\n]+/).map(t=>t.trim()).join("")}var xd=m.exports.createLanguage({queryType:n=>m.exports.alt(m.exports.regexp(/TABLE|LIST|TASK|CALENDAR/i)).map(t=>t.toLowerCase()).desc("query type ('TABLE', 'LIST', 'TASK', or 'CALENDAR')"),explicitNamedField:n=>m.exports.seqMap(Ye.field.skip(m.exports.whitespace),m.exports.regexp(/AS/i).skip(m.exports.whitespace),Ye.identifier.or(Ye.string),(t,e,r)=>Hr.named(r,t)),namedField:n=>m.exports.alt(n.explicitNamedField,_d(Ye.field).map(([t,e])=>Hr.named(Sd(e),t))),sortField:n=>m.exports.seqMap(Ye.field.skip(m.exports.optWhitespace),m.exports.regexp(/ASCENDING|DESCENDING|ASC|DESC/i).atMost(1),(t,e)=>{let r=e.length==0?"ascending":e[0].toLowerCase();return r=="desc"&&(r="descending"),r=="asc"&&(r="ascending"),{field:t,direction:r}}),headerClause:n=>n.queryType.skip(m.exports.whitespace).chain(t=>{switch(t){case"table":return m.exports.seqMap(m.exports.regexp(/WITHOUT\s+ID/i).skip(m.exports.optWhitespace).atMost(1),m.exports.sepBy(n.namedField,m.exports.string(",").trim(m.exports.optWhitespace)),(e,r)=>({type:"table",fields:r,showId:e.length==0}));case"list":return m.exports.seqMap(m.exports.regexp(/WITHOUT\s+ID/i).skip(m.exports.optWhitespace).atMost(1),Ye.field.atMost(1),(e,r)=>({type:"list",format:r.length==1?r[0]:void 0,showId:e.length==0}));case"task":return m.exports.succeed({type:"task"});case"calendar":return m.exports.seqMap(n.namedField,e=>({type:"calendar",showId:!0,field:e}));default:return m.exports.fail(`Unrecognized query type '${t}'`)}}).desc("TABLE or LIST or TASK or CALENDAR"),fromClause:n=>m.exports.seqMap(m.exports.regexp(/FROM/i),m.exports.whitespace,Ye.source,(t,e,r)=>r),whereClause:n=>m.exports.seqMap(m.exports.regexp(/WHERE/i),m.exports.whitespace,Ye.field,(t,e,r)=>({type:"where",clause:r})).desc("WHERE <expression>"),sortByClause:n=>m.exports.seqMap(m.exports.regexp(/SORT/i),m.exports.whitespace,n.sortField.sepBy1(m.exports.string(",").trim(m.exports.optWhitespace)),(t,e,r)=>({type:"sort",fields:r})).desc("SORT field [ASC/DESC]"),limitClause:n=>m.exports.seqMap(m.exports.regexp(/LIMIT/i),m.exports.whitespace,Ye.field,(t,e,r)=>({type:"limit",amount:r})).desc("LIMIT <value>"),flattenClause:n=>m.exports.seqMap(m.exports.regexp(/FLATTEN/i).skip(m.exports.whitespace),n.namedField,(t,e)=>({type:"flatten",field:e})).desc("FLATTEN <value> [AS <name>]"),groupByClause:n=>m.exports.seqMap(m.exports.regexp(/GROUP BY/i).skip(m.exports.whitespace),n.namedField,(t,e)=>({type:"group",field:e})).desc("GROUP BY <value> [AS <name>]"),clause:n=>m.exports.alt(n.fromClause,n.whereClause,n.sortByClause,n.limitClause,n.groupByClause,n.flattenClause),query:n=>m.exports.seqMap(n.headerClause.trim(m.exports.optWhitespace),n.fromClause.trim(m.exports.optWhitespace).atMost(1),n.clause.trim(m.exports.optWhitespace).many(),(t,e,r)=>({header:t,source:e.length==0?it.folder(""):e[0],operations:r,settings:uu}))}),kd=n=>{var t;return n?(t=n.plugins.plugins.dataview)===null||t===void 0?void 0:t.api:window.DataviewAPI},Td=n=>n.plugins.enabledPlugins.has("dataview");ot.DATE_SHORTHANDS=Ji;ot.DURATION_TYPES=Yi;ot.EXPRESSION=Ye;ot.KEYWORDS=Qi;ot.QUERY_LANGUAGE=xd;ot.getAPI=kd;ot.isPluginEnabled=Td;ot.parseField=Ed});var us=Ft(Kr=>{"use strict";Object.defineProperty(Kr,"__esModule",{value:!0});Kr.stringifyFrontmatter=void 0;var Hd=require("obsidian");function Wd(n){return`---
${(0,Hd.stringifyYaml)(n)}---`}Kr.stringifyFrontmatter=Wd});var fu=Ft(ie=>{"use strict";Object.defineProperty(ie,"__esModule",{value:!0});ie.numberToString=ie.equalOrIncludes=ie.isFalsy=ie.isTruthy=ie.arrayEquals=ie.mod=ie.clamp=ie.removeFileExtension=ie.isPath=ie.getFileName=void 0;function Ud(n){var t;return(t=n.split("/").at(-1))!==null&&t!==void 0?t:n}ie.getFileName=Ud;function zd(n){return n.split("/").length>1}ie.isPath=zd;function Zd(n){let t=n.split(".");if(t.length===1)return n;{let e=t[0];for(let r=1;r<t.length-1;r++)e+="."+t[r];return e}}ie.removeFileExtension=Zd;function Gd(n,t,e){return Math.min(Math.max(n,t),e)}ie.clamp=Gd;function Yd(n,t){return(n%t+t)%t}ie.mod=Yd;function Jd(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;e++)if(n[e]!==t[e])return!1;return!0}ie.arrayEquals=Jd;function Qd(n){return!!n}ie.isTruthy=Qd;function Kd(n){return!n}ie.isFalsy=Kd;function Xd(n,t){return n===t||n.includes(t)||t.includes(n)}ie.equalOrIncludes=Xd;function ef(n){return n+""}ie.numberToString=ef});var os=Ft(Dn=>{"use strict";Object.defineProperty(Dn,"__esModule",{value:!0});Dn.ParserUtils=Dn.EnclosingPair=void 0;var $t=fu(),Xe=lr(),mu=class{constructor(t,e){if((0,$t.isFalsy)(t))throw new Xe.OPDUtilsParsingError("opening string must not be empty");this.openingEqualsClosing=(0,$t.isFalsy)(e)||t===e,this.openingEqualsClosing?(this._openingString=t,this._closingString=t):(this._openingString=t,this._closingString=e)}get openingString(){return this._openingString}get closingString(){return this.openingEqualsClosing?this._openingString:this._closingString}overlaps(t){return(0,$t.equalOrIncludes)(this.openingString,t.openingString)||(0,$t.equalOrIncludes)(this.openingString,t.closingString)||(0,$t.equalOrIncludes)(this.closingString,t.openingString)||(0,$t.equalOrIncludes)(this.closingString,t.closingString)}equals(t){return(0,$t.isFalsy)(t)?!1:this.openingString===t.openingString&&this.closingString===t.closingString}toString(){return JSON.stringify(this)}};Dn.EnclosingPair=mu;var ee=class{static split(t,e,r){if(!t)throw new Xe.OPDUtilsParsingError("string must not be empty");if(!e)throw new Xe.OPDUtilsParsingError("separator must not be empty");let i="",u=[];if(r){let o=ee.numberOfOccurrences(t,r.openingString),a=ee.numberOfOccurrences(t,r.closingString),s=0;e:for(let l=0;l<t.length;l++)if(s===0&&ee.isStringAt(t,e,l)?(u.push(i),i="",l+=e.length-1):i+=t[l],r.openingEqualsClosing){if(ee.isStringAt(t,r.openingString,l)){if(!(s%2===0&&o===1))if(s%2===0){s+=1;for(let h=1;h<r.openingString.length;h++)if(l+=1,i+=t[l],l>=t.length)break e}else{s-=1;for(let h=1;h<r.closingString.length;h++)if(l+=1,i+=t[l],l>=t.length)break e}o-=1}}else if(ee.isStringAt(t,r.openingString,l)){if(o<=a){s+=1;for(let h=1;h<r.openingString.length;h++)if(l+=1,i+=t[l],l>=t.length)break e}o-=1}else if(ee.isStringAt(t,r.closingString,l)){if(s>0){s-=1;for(let h=1;h<r.closingString.length;h++)if(l+=1,i+=t[l],l>=t.length)break e}a-=1}}else for(let o=0;o<t.length;o++)ee.isStringAt(t,e,o)?(u.push(i),i="",o+=e.length-1):i+=t[o];return u.push(i),u}static removeInBetween(t,e){if(!t)throw new Xe.OPDUtilsParsingError("string must not be empty");let r=ee.numberOfOccurrences(t,e.openingString),i=ee.numberOfOccurrences(t,e.closingString),u=0,o="";for(let a=0;a<t.length;a++){if(e.openingEqualsClosing){if(ee.isStringAt(t,e.openingString,a)){if(!(u%2===0&&r===1)){if(u%2===0){if(u+=1,a+=e.openingString.length,a>=t.length)break}else if(u-=1,a+=e.closingString.length,a>=t.length)break}r-=1}}else if(ee.isStringAt(t,e.openingString,a)){if(r<=i&&(u+=1,a+=e.openingString.length,a>=t.length))break;r-=1}else if(ee.isStringAt(t,e.closingString,a)){if(u>0&&(u-=1,a+=e.closingString.length,a>=t.length))break;i-=1}u===0&&(o+=t[a])}return o}static getInBetween(t,e){if(!t)throw new Xe.OPDUtilsParsingError("string must not be empty");let r=ee.numberOfOccurrences(t,e.openingString),i=ee.numberOfOccurrences(t,e.closingString),u=0,o="",a=[];e:for(let s=0;s<t.length;s++)if(e.openingEqualsClosing)if(ee.isStringAt(t,e.openingString,s)){if(!(u%2===0&&r===1))if(u%2===0){u+=1,o+=t[s];for(let l=1;l<e.openingString.length;l++)if(s+=1,o+=t[s],s>=t.length)break e}else{u-=1,o+=t[s];for(let l=1;l<e.closingString.length;l++)if(s+=1,o+=t[s],s>t.length)break e;a.push(o),o=""}r-=1}else u>=1&&(o+=t[s]);else if(ee.isStringAt(t,e.openingString,s)){if(r<=i){u+=1,o+=t[s];for(let l=1;l<e.openingString.length;l++)if(s+=1,o+=t[s],s>=t.length)break e}r-=1}else if(ee.isStringAt(t,e.closingString,s)){if(u>0){u-=1,o+=t[s];for(let l=1;l<e.closingString.length;l++)if(s+=1,o+=t[s],s>t.length)break e;u===0&&(a.push(o),o="")}i-=1}else u>=1&&(o+=t[s]);return a.length===0?"":a.length===1?a[0].substring(e.openingString.length,a[0].length-e.closingString.length):a.map(s=>s.substring(e.openingString.length,s.length-e.closingString.length))}static isStringAt(t,e,r){if(r<0)throw new Xe.OPDUtilsParsingError("index must be greater than 0");if(r>=t.length)throw new Xe.OPDUtilsParsingError("index out of bounds of string");if(!t)throw new Xe.OPDUtilsParsingError("string must not be empty");if(!e)throw new Xe.OPDUtilsParsingError("sub string must not be empty");for(let i=0;i<e.length;i++)if(t[i+r]!==e[i])return!1;return!0}static contains(t,e){return ee.numberOfOccurrences(t,e)>0}static numberOfOccurrences(t,e){if(!t)throw new Xe.OPDUtilsParsingError("string must not be empty");if(!e)throw new Xe.OPDUtilsParsingError("sub string must not be empty");let r=0;for(let i=0;i<t.length;i++)ee.isStringAt(t,e,i)&&(r+=1);return r}};Dn.ParserUtils=ee});var as=Ft(at=>{"use strict";var tf=at&&at.__createBinding||(Object.create?function(n,t,e,r){r===void 0&&(r=e);var i=Object.getOwnPropertyDescriptor(t,e);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,r,i)}:function(n,t,e,r){r===void 0&&(r=e),n[r]=t[e]}),Xr=at&&at.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&tf(t,n,e)};Object.defineProperty(at,"__esModule",{value:!0});Xr(os(),at);Xr(En(),at);Xr(lr(),at);Xr(fu(),at)});var ss=Ft(qt=>{"use strict";var nf=qt&&qt.__awaiter||function(n,t,e,r){function i(u){return u instanceof e?u:new e(function(o){o(u)})}return new(e||(e=Promise))(function(u,o){function a(h){try{l(r.next(h))}catch(d){o(d)}}function s(h){try{l(r.throw(h))}catch(d){o(d)}}function l(h){h.done?u(h.value):i(h.value).then(a,s)}l((r=r.apply(n,t||[])).next())})};Object.defineProperty(qt,"__esModule",{value:!0});qt.Internal=void 0;var rf=require("obsidian"),hu=us(),Xn=as(),uf;(function(n){n.frontMatterRexExpPattern="^(---)\\n[\\s\\S]*?\\n---";function t(f){let v=new RegExp(n.frontMatterRexExpPattern).exec(f);if(!v)return{};let F=v[0];return F?(F=F.substring(4),F=F.substring(0,F.length-3),e(F)):{}}n.getMetaDataFromFileContent=t;function e(f){if(!f)return{};let g=(0,rf.parseYaml)(f);return g||{}}n.getMetaDataFromYAML=e;function r(f,g){var v;let F=(v=g.app.metadataCache.getFileCache(f))===null||v===void 0?void 0:v.frontmatter;if(F)F=Object.assign({},F),delete F.position;else return{};return F}n.getMetadataFromFileCache=r;function i(f){return f.replace(new RegExp(n.frontMatterRexExpPattern),"")}n.removeFrontmatter=i;function u(f,g,v){return nf(this,void 0,void 0,function*(){let F=yield v.app.vault.cachedRead(g);F=i(F),F.startsWith(`

`)?F=`${(0,hu.stringifyFrontmatter)(f)}${F}`:F.startsWith(`

`)?F=`${(0,hu.stringifyFrontmatter)(f)}
${F}`:F=`${(0,hu.stringifyFrontmatter)(f)}

${F}`,yield v.app.vault.modify(g,F)})}n.updateFrontmatter=u;function o(f,g){return a(f,g)!==void 0}n.hasField=o;function a(f,g){return(0,Xn.traverseObject)(f,g)}n.getField=a;function s(f,g){let{parent:v,child:F}=(0,Xn.traverseObjectToParent)(f,g);if(v.value===void 0)throw Error(`The parent of "${f}" does not exist in Object, can not delete child from non existing parent`);if(Array.isArray(v.value)){let S=Number.parseInt(F.key);if(Number.isNaN(S))return g;v.value.splice(S,1)}else delete v.value[F.key];return g}n.deleteField=s;function l(f,g,v){let{parent:F,child:S}=(0,Xn.traverseObjectToParent)(f,v);if(F.value===void 0)throw Error(`The parent of "${f}" does not exist in Object, please create the parent first`);if(S.value===void 0)throw Error(`Field with key "${f}" does not exist in Object`);return F.value[S.key]=g,v}n.updateField=l;function h(f,g,v){let{parent:F,child:S}=(0,Xn.traverseObjectToParent)(f,v);if(F.value===void 0)throw Error(`The parent of "${f}" does not exist in Object, please create the parent first`);if(S.value!==void 0)throw Error(`Field with key "${f}" does already exist in Object`);return F.value[S.key]=g,v}n.insertField=h;function d(f,g,v){let{parent:F,child:S}=(0,Xn.traverseObjectToParent)(f,v);if(F.value===void 0)throw Error(`The parent of "${f}" does not exist in Object, please create the parent first`);return F.value[S.key]=g,v}n.updateOrInsertField=d})(uf=qt.Internal||(qt.Internal={}))});var af={};Ss(af,{default:()=>ti});module.exports=xs(af);var ls=require("obsidian");var He=require("obsidian"),nt={devMode:!1,ignoreCodeBlockRestrictions:!1,preferredDateFormat:"YYYY-MM-DD",useUsDateInputOrder:!1,syncInterval:200,minSyncInterval:50,maxSyncInterval:1e3,inputTemplates:""},sr=class extends He.PluginSettingTab{constructor(e,r){super(e,r);this.plugin=r}display(){let{containerEl:e}=this;e.empty(),e.createEl("h2",{text:"Meta Bind Plugin Settings"}),new He.Setting(e).setName("Sync interval").setDesc(`The interval in milli-seconds between disk writes. Changing this number is not recommended except if your hard drive is exceptionally slow. Standard: ${nt.syncInterval}; Minimum: ${nt.minSyncInterval}; Maximum: ${nt.maxSyncInterval}`).addText(i=>{i.setValue(this.plugin.settings.syncInterval.toString()),i.onChange(u=>{this.plugin.settings.syncInterval=Number.parseInt(u),Number.isNaN(this.plugin.settings.syncInterval)&&(this.plugin.settings.syncInterval=nt.syncInterval),this.plugin.settings.syncInterval<nt.minSyncInterval&&(this.plugin.settings.syncInterval=nt.minSyncInterval),this.plugin.settings.syncInterval>nt.maxSyncInterval&&(this.plugin.settings.syncInterval=nt.maxSyncInterval),this.plugin.saveSettings()})}),new He.Setting(e).setName("Date format").setDesc("The date format to be used by this plugin. Changing this setting will break the parsing of existing date inputs. Here is a list of all available date tokes https://momentjs.com/docs/#/displaying/.").addText(i=>{i.setValue(this.plugin.settings.preferredDateFormat),i.onChange(u=>{this.plugin.settings.preferredDateFormat=u,this.plugin.saveSettings()})}),new He.Setting(e).setName("Use US date input field order").setDesc("When enabled the month input is before the day input.").addToggle(i=>{i.setValue(this.plugin.settings.useUsDateInputOrder),i.onChange(u=>{this.plugin.settings.useUsDateInputOrder=u,this.plugin.saveSettings()})}),new He.Setting(e).setName("Templates").setDesc("You can specify templates here, and access them using `INPUT[template_name][overrides (optional)]` in your notes.");let r=new He.TextAreaComponent(e);r.setValue(this.plugin.settings.inputTemplates),r.setPlaceholder("template_name -> INPUT[input_type(argument(value)):bind_target]"),r.inputEl.style.width="100%",r.inputEl.style.height="200px",r.onChange(i=>{this.plugin.settings.inputTemplates=i,this.plugin.saveSettings()}),new He.Setting(e).setName("Dev Mode").setDesc("Enable dev mode. Not recommended unless you want to debug this plugin.").addToggle(i=>{i.setValue(this.plugin.settings.devMode),i.onChange(u=>{this.plugin.settings.devMode=u,this.plugin.saveSettings()})}),new He.Setting(e).setName("Disable Code Block Restrictions").setDesc("Disable restrictions on which input fields can be created in which code blocks. Not recommended unless you know what you are doing.").addToggle(i=>{i.setValue(this.plugin.settings.ignoreCodeBlockRestrictions),i.onChange(u=>{this.plugin.settings.ignoreCodeBlockRestrictions=u,this.plugin.saveSettings()})})}};var is=require("obsidian");var G=class{constructor(t,e){this.inputFieldMarkdownRenderChild=t,this.onValueChange=e}};G.allowCodeBlock=!0,G.allowInlineCodeBlock=!0;var ku=require("obsidian");var M=class extends Error{constructor(t){super(`[MB_INTERNAL_ERROR - please report this error here https://github.com/mProjectsCode/obsidian-meta-bind-plugin/issues] ${t}`)}},z=class extends Error{constructor(t){super(`[MB_PARSING_ERROR] ${t}`)}},mt=class extends Error{constructor(t){super(`[MB_BIND_TARGET_ERROR] ${t}`)}},Ce=class extends Error{constructor(t){super(`[MB_VALUE_ERROR] ${t}`)}},We=class extends Error{constructor(t){super(`[MB_ARGUMENT_ERROR] ${t}`)}};var Gt=class extends G{getValue(){if(!this.toggleComponent)throw new M("toggle input component is undefined");return this.toggleComponent.getValue()}setValue(e){if(!this.toggleComponent)throw new M("toggle input component is undefined");e!=null&&typeof e=="boolean"?this.toggleComponent.setValue(e):(console.warn(new Ce(`invalid value '${e}' at toggleInputField ${this.inputFieldMarkdownRenderChild.uuid}`)),this.toggleComponent.setValue(!1))}isEqualValue(e){return this.getValue()==e}getDefaultValue(){return!1}getHtmlElement(){if(!this.toggleComponent)throw new M("toggle input component is undefined");return this.toggleComponent.toggleEl}render(e){console.debug(`meta-bind | ToggleInputField >> render ${this.inputFieldMarkdownRenderChild.uuid}`);let r=new ku.ToggleComponent(e);r.setValue(this.inputFieldMarkdownRenderChild.getInitialValue()),r.onChange(this.onValueChange),this.toggleComponent=r}destroy(){}};var Tu=require("obsidian");var Yt=class extends G{getValue(){if(!this.textComponent)throw new M("text input component is undefined");return this.textComponent.getValue()}setValue(e){if(!this.textComponent)throw new M("text input component is undefined");e!=null&&typeof e=="string"?this.textComponent.setValue(e):(console.warn(new Ce(`invalid value '${e}' at textInputField ${this.inputFieldMarkdownRenderChild.uuid}`)),this.textComponent.setValue(""))}isEqualValue(e){return this.getValue()==e}getDefaultValue(){return""}getHtmlElement(){if(!this.textComponent)throw new M("text input component is undefined");return this.textComponent.inputEl}render(e){console.debug(`meta-bind | TextInputField >> render ${this.inputFieldMarkdownRenderChild.uuid}`);let r=new Tu.TextComponent(e);r.setValue(this.inputFieldMarkdownRenderChild.getInitialValue()),r.onChange(this.onValueChange),this.textComponent=r}destroy(){}};var Lu=require("obsidian");var Ou=require("obsidian"),Iu=Cn(En());function li(n){var t;return(t=n.split("/").at(-1))!=null?t:n}function Au(n){return n.split("/").length>1}function _n(n){let t=n.split(".");if(t.length===1)return n;{let e=t[0];for(let r=1;r<t.length-1;r++)e+="."+t[r];return e}}function ci(n,t){return(n%t+t)%t}function Bu(n,t){if(n.length!==t.length)return!1;for(let e of n)if(!t.contains(e))return!1;return!0}function Nu(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;e++)if(n[e]!==t[e])return!1;return!0}function Qt(n){return!!n}function cr(n){return!n}function Sn(n,t){return n===t||n.includes(t)||t.includes(n)}function di(n){return n+""}function Vu(n,t){var u;if(n[0]==="")throw new Error("can not traverse to parent on self reference");let e=n.slice(0,-1),r=(u=n.at(-1))!=null?u:"",i=(0,Iu.traverseObjectByPath)(e,t);return{parent:{key:e,value:i},child:{key:r,value:i[r]}}}function Ms(){let n=app.vault.adapter;return n instanceof Ou.FileSystemAdapter?n.getBasePath():null}function Os(n,t){if(n==null)throw new Error("path1 must not be null");if(t==null)throw new Error("path2 must not be null");n=n.replaceAll("\\","/"),t=t.replaceAll("\\","/");let e;return n.endsWith("/")&&t.startsWith("/")?e=n+t.substring(1):n.endsWith("/")&&!t.startsWith("/")||!n.endsWith("/")&&t.startsWith("/")?e=n+t:e=n+"/"+t,e.startsWith("/")&&e.endsWith("/")?e.substring(1,e.length-1):e.startsWith("/")?e.substring(1):e.endsWith("/")?e.substring(0,e.length-1):e}function Kt(n){var t;return`app://local/${Os((t=Ms())!=null?t:"",n)}`}var bt=class{constructor(t,e){if(cr(t))throw new M("opening string must not be empty");this.openingEqualsClosing=cr(e)||t===e,this.openingEqualsClosing?(this._openingString=t,this._closingString=t):(this._openingString=t,this._closingString=e)}get openingString(){return this._openingString}get closingString(){return this.openingEqualsClosing?this._openingString:this._closingString}overlaps(t){return Sn(this.openingString,t.openingString)||Sn(this.openingString,t.closingString)||Sn(this.closingString,t.openingString)||Sn(this.closingString,t.closingString)}equals(t){return cr(t)?!1:this.openingString===t.openingString&&this.closingString===t.closingString}toString(){return JSON.stringify(this)}},j=class{static split(t,e,r){if(!t)throw new M("string must not be empty");if(!e)throw new M("separator must not be empty");let i="",u=[];if(r){let o=j.numberOfOccurrences(t,r.openingString),a=j.numberOfOccurrences(t,r.closingString),s=0;e:for(let l=0;l<t.length;l++)if(s===0&&j.isStringAt(t,e,l)?(u.push(i),i="",l+=e.length-1):i+=t[l],r.openingEqualsClosing){if(j.isStringAt(t,r.openingString,l)){if(!(s%2===0&&o===1))if(s%2===0){s+=1;for(let h=1;h<r.openingString.length;h++)if(l+=1,i+=t[l],l>=t.length)break e}else{s-=1;for(let h=1;h<r.closingString.length;h++)if(l+=1,i+=t[l],l>=t.length)break e}o-=1}}else if(j.isStringAt(t,r.openingString,l)){if(o<=a){s+=1;for(let h=1;h<r.openingString.length;h++)if(l+=1,i+=t[l],l>=t.length)break e}o-=1}else if(j.isStringAt(t,r.closingString,l)){if(s>0){s-=1;for(let h=1;h<r.closingString.length;h++)if(l+=1,i+=t[l],l>=t.length)break e}a-=1}}else for(let o=0;o<t.length;o++)j.isStringAt(t,e,o)?(u.push(i),i="",o+=e.length-1):i+=t[o];return u.push(i),u}static removeInBetween(t,e){if(!t)throw new M("string must not be empty");let r=j.numberOfOccurrences(t,e.openingString),i=j.numberOfOccurrences(t,e.closingString),u=0,o="";for(let a=0;a<t.length;a++){if(e.openingEqualsClosing){if(j.isStringAt(t,e.openingString,a)){if(!(u%2===0&&r===1)){if(u%2===0){if(u+=1,a+=e.openingString.length,a>=t.length)break}else if(u-=1,a+=e.closingString.length,a>=t.length)break}r-=1}}else if(j.isStringAt(t,e.openingString,a)){if(r<=i&&(u+=1,a+=e.openingString.length,a>=t.length))break;r-=1}else if(j.isStringAt(t,e.closingString,a)){if(u>0&&(u-=1,a+=e.closingString.length,a>=t.length))break;i-=1}u===0&&(o+=t[a])}return o}static getInBetween(t,e){if(!t)throw new M("string must not be empty");let r=j.numberOfOccurrences(t,e.openingString),i=j.numberOfOccurrences(t,e.closingString),u=0,o="",a=[];e:for(let s=0;s<t.length;s++)if(e.openingEqualsClosing)if(j.isStringAt(t,e.openingString,s)){if(!(u%2===0&&r===1))if(u%2===0){u+=1,o+=t[s];for(let l=1;l<e.openingString.length;l++)if(s+=1,o+=t[s],s>=t.length)break e}else{u-=1,o+=t[s];for(let l=1;l<e.closingString.length;l++)if(s+=1,o+=t[s],s>t.length)break e;a.push(o),o=""}r-=1}else u>=1&&(o+=t[s]);else if(j.isStringAt(t,e.openingString,s)){if(r<=i){u+=1,o+=t[s];for(let l=1;l<e.openingString.length;l++)if(s+=1,o+=t[s],s>=t.length)break e}r-=1}else if(j.isStringAt(t,e.closingString,s)){if(u>0){u-=1,o+=t[s];for(let l=1;l<e.closingString.length;l++)if(s+=1,o+=t[s],s>t.length)break e;u===0&&(a.push(o),o="")}i-=1}else u>=1&&(o+=t[s]);return a.length===0?"":a.length===1?a[0].substring(e.openingString.length,a[0].length-e.closingString.length):a.map(s=>s.substring(e.openingString.length,s.length-e.closingString.length))}static isStringAt(t,e,r){if(r<0)throw new M("index must be greater than 0");if(r>=t.length)throw new M("index out of bounds of string");if(!t)throw new M("string must not be empty");if(!e)throw new M("sub string must not be empty");for(let i=0;i<e.length;i++)if(t[i+r]!==e[i])return!1;return!0}static contains(t,e){return j.numberOfOccurrences(t,e)>0}static numberOfOccurrences(t,e){if(!t)throw new M("string must not be empty");if(!e)throw new M("sub string must not be empty");let r=0;for(let i=0;i<t.length;i++)j.isStringAt(t,e,i)&&(r+=1);return r}};var ue=class{constructor(){this.identifier="invalid";this.allowedInputFields=[];this.requiresValue=!1;this.allowMultiple=!1}isAllowed(t){return this.allowedInputFields.length===0?!0:this.allowedInputFields.contains(t)}getAllowedInputFieldsAsString(){return this.allowedInputFields.length===0?"all":this.allowedInputFields.join(", ")}};var dr=class extends ue{constructor(){super(...arguments);this.identifier="class";this.allowedInputFields=[];this.value=[];this.requiresValue=!0;this.allowMultiple=!0}parseValue(e){this.value=e.split(" ")}};var fr=class extends ue{constructor(){super(...arguments);this.identifier="addLabels";this.allowedInputFields=["slider"];this.value=!0;this.requiresValue=!1;this.allowMultiple=!1}parseValue(e){this.value=e.toLowerCase()==="true"}};var mr=class extends ue{constructor(){super(...arguments);this.identifier="minValue";this.allowedInputFields=["slider"];this.value=0;this.requiresValue=!0;this.allowMultiple=!1}parseValue(e){if(this.value=Number.parseInt(e),Number.isNaN(this.value))throw new z("value of argument 'minValue' must be of type number")}};var hr=class extends ue{constructor(){super(...arguments);this.identifier="maxValue";this.allowedInputFields=["slider"];this.value=100;this.requiresValue=!0;this.allowMultiple=!1}parseValue(e){if(this.value=Number.parseInt(e),Number.isNaN(this.value))throw new z("value of argument 'maxValue' must be of type number")}};var pr=class extends ue{constructor(){super(...arguments);this.identifier="option";this.allowedInputFields=["select","multi_select","suggester","imageSuggester"];this.value="";this.requiresValue=!0;this.allowMultiple=!0}parseValue(e){this.value=e}};var gr=class extends ue{constructor(){super(...arguments);this.identifier="title";this.allowedInputFields=[];this.value="";this.requiresValue=!0;this.allowMultiple=!1}parseValue(e){this.value=e}};var Dr=class extends ue{constructor(){super(...arguments);this.identifier="alignRight";this.allowedInputFields=["date_picker"];this.value=!0;this.requiresValue=!1;this.allowMultiple=!1}parseValue(e){this.value=e.toLowerCase()==="true"}};var vr=class extends ue{constructor(){super(...arguments);this.identifier="optionQuery";this.allowedInputFields=["suggester","imageSuggester"];this.value="";this.requiresValue=!0;this.allowMultiple=!0}parseValue(e){this.value=e}};var yr=class extends ue{constructor(){super(...arguments);this.identifier="showcase";this.allowedInputFields=[];this.value=!0;this.requiresValue=!1;this.allowMultiple=!1}parseValue(e){this.value=e.toLowerCase()==="true"}};var xn=class{static createInputFieldArgument(t){if(t==="class")return new dr;if(t==="addLabels")return new fr;if(t==="minValue")return new mr;if(t==="maxValue")return new hr;if(t==="option")return new pr;if(t==="title")return new gr;if(t==="alignRight")return new Dr;if(t==="optionQuery")return new vr;if(t==="showcase")return new yr;throw new z(`unknown argument '${t}'`)}};var Tt=class{constructor(){this.arguments=[]}add(t){this.arguments.push(t)}validate(){let t={};for(let e of Object.values(me))t[e]=0;for(let e of this.arguments)if(t[e.identifier]+=1,t[e.identifier]>1&&!e.allowMultiple)throw new z(`argument '${e.identifier}' does not allow duplicates`)}mergeByOverride(t){for(let e of t.arguments)e.allowMultiple||(this.arguments=this.arguments.filter(r=>r.identifier!==e.identifier)),this.arguments.push(e);return this.validate(),this}mergeByThrow(t){for(let e of t.arguments){if(!e.allowMultiple&&this.arguments.filter(r=>r.identifier===e.identifier).length>0)throw new z("can not merge InputFieldArgumentContainers, since arguments overlap");this.arguments.push(e)}return this.validate(),this}};var Ue=(v=>(v.TOGGLE="toggle",v.SLIDER="slider",v.TEXT="text",v.TEXT_AREA="text_area",v.SELECT="select",v.MULTI_SELECT="multi_select",v.DATE="date",v.TIME="time",v.DATE_PICKER="date_picker",v.NUMBER="number",v.SUGGESTER="suggester",v.EDITOR="editor",v.IMAGE_SUGGESTER="imageSuggester",v.INVALID="invalid",v))(Ue||{}),me=(h=>(h.CLASS="class",h.ADD_LABELS="addLabels",h.MIN_VALUE="minValue",h.MAX_VALUE="maxValue",h.OPTION="option",h.TITLE="title",h.ALIGN_RIGHT="alignRight",h.OPTION_QUERY="optionQuery",h.SHOWCASE="showcase",h.INVALID="invalid",h))(me||{}),K=class{static parseDeclaration(t,e=void 0,r=void 0){t.inputFieldType=K.getInputFieldType(t.inputFieldType);try{if(Qt(r)&&K.applyTemplate(t,r),t.inputFieldType==="invalid")throw new z("unknown input field type");if(t.argumentContainer=new Tt,e){for(let u in Object.keys(e)){let o=xn.createInputFieldArgument(u);if(!o.isAllowed(t.inputFieldType))throw new z(`argument '${u}' is only applicable to ${o.getAllowedInputFieldsAsString()} input fields`);o.requiresValue&&o.parseValue(e[u]),t.argumentContainer.add(o)}t.argumentContainer.validate()}}catch(i){i instanceof Error&&(t.error=i,console.warn(i))}return t}static parseString(t){var r;let e={};try{let i=!1,u="";e.fullDeclaration=t;let o=j.getInBetween(t,K.squareBracesPair);if(Array.isArray(o))if(o.length===2)i=!0,u=o[0],e.declaration=o[1];else throw new z("invalid input field declaration");else e.declaration=o;let a=j.split(e.declaration,":",K.squareBracesPair);e.bindTarget=(r=a[1])!=null?r:"",e.isBound=Qt(e.bindTarget);let s=a[0];if(s){let l=j.removeInBetween(s,K.roundBracesPair);e.inputFieldType=K.getInputFieldType(l);let h=j.getInBetween(s,K.roundBracesPair);h?e.argumentContainer=K.parseArguments(h,e.inputFieldType):e.argumentContainer=new Tt}else e.inputFieldType="invalid",e.argumentContainer=new Tt;if(i&&K.applyTemplate(e,u),e.inputFieldType==="invalid")throw new z("unknown input field type")}catch(i){i instanceof Error&&(e.error=i,console.warn(i))}return e}static parseTemplates(t){K.templates=[];let e=t?j.split(t,`
`,K.squareBracesPair):[];e=e.map(r=>r.trim()).filter(r=>r.length>0);for(let r of e){let i=j.split(r,"->",K.squareBracesPair);if(i=i.map(u=>u.trim()),i.length===1)throw new z("Invalid template syntax");i.length===2&&K.templates.push({identifier:i[0],template:K.parseString(i[1])})}console.log("meta-bind | InputFieldDeclarationParser >> parsed templates",K.templates)}static parseArguments(t,e){let r=j.split(t,",",K.roundBracesPair);r=r.map(u=>u.trim());let i=new Tt;for(let u of r){let o=K.extractInputFieldArgumentIdentifier(u),a=xn.createInputFieldArgument(o);if(!a.isAllowed(e))throw new z(`argument '${o}' is only applicable to ${a.getAllowedInputFieldsAsString()} input fields`);a.requiresValue&&a.parseValue(K.extractInputFieldArgumentValue(u)),i.add(a)}return i.validate(),i}static extractInputFieldArgumentIdentifier(t){return j.removeInBetween(t,K.roundBracesPair)}static extractInputFieldArgumentValue(t){let e=this.extractInputFieldArgumentIdentifier(t),r=j.getInBetween(t,K.roundBracesPair);if(!r)throw new z(`argument '${e}' requires a non empty value`);return r}static getInputFieldType(t){for(let e of Object.entries(Ue))if(e[1]===t)return e[1];return"invalid"}static applyTemplate(t,e){var i;if(!e)return;let r=(i=K.templates.find(u=>u.identifier===e))==null?void 0:i.template;if(!r)throw new z(`unknown template name '${e}'`);t.bindTarget=t.bindTarget||r.bindTarget,t.isBound=t.isBound||r.isBound,t.inputFieldType=(t.inputFieldType==="invalid"?r.inputFieldType:t.inputFieldType)||r.inputFieldType,t.argumentContainer=r.argumentContainer.mergeByOverride(t.argumentContainer)}},ke=K;ke.roundBracesPair=new bt("(",")"),ke.squareBracesPair=new bt("[","]"),ke.curlyBracesPair=new bt("{","}"),ke.allBracesPairs=[K.roundBracesPair,K.squareBracesPair,K.curlyBracesPair],ke.templates=[];var Xt=class extends G{constructor(e,r){var i,u,o,a;super(e,r);this.minValue=(u=(i=e.getArgument("minValue"))==null?void 0:i.value)!=null?u:0,this.maxValue=(a=(o=e.getArgument("maxValue"))==null?void 0:o.value)!=null?a:100}getValue(){if(!this.sliderComponent)throw new M("slider input component is undefined");return this.sliderComponent.getValue()}setValue(e){if(!this.sliderComponent)throw new M("slider input component is undefined");e!=null&&typeof e=="number"?e>=this.minValue&&e<=this.maxValue&&this.sliderComponent.setValue(e):(console.warn(new Ce(`invalid value '${e}' at sliderInputField ${this.inputFieldMarkdownRenderChild.uuid}`)),this.sliderComponent.setValue(this.getDefaultValue()))}isEqualValue(e){return this.getValue()==e}getDefaultValue(){return this.minValue}getHtmlElement(){if(!this.sliderComponent)throw new M("slider input component is undefined");return this.sliderComponent.sliderEl}render(e){console.debug(`meta-bind | SliderInputField >> render ${this.inputFieldMarkdownRenderChild.uuid}`),e.removeClass("meta-bind-plugin-input-wrapper"),e.addClass("meta-bind-plugin-flex-input-wrapper");let r=this.inputFieldMarkdownRenderChild.getArgument("addLabels");r&&r.value===!0&&e.createSpan({text:this.minValue.toString(),cls:"meta-bind-plugin-slider-input-label"});let i=new Lu.SliderComponent(e);i.setValue(this.inputFieldMarkdownRenderChild.getInitialValue()),i.onChange(this.onValueChange),i.setDynamicTooltip(),i.setLimits(this.minValue,this.maxValue,1),i.sliderEl.addClass("meta-bind-plugin-slider-input"),r&&r.value===!0&&e.createSpan({text:this.maxValue.toString(),cls:"meta-bind-plugin-slider-input-label"}),this.sliderComponent=i}destroy(){}};var Ru=require("obsidian");var en=class extends G{getValue(){if(!this.textAreaComponent)throw new M("text area input component is undefined");return this.textAreaComponent.getValue()}setValue(e){if(!this.textAreaComponent)throw new M("text area input component is undefined");e!=null&&typeof e=="string"?this.textAreaComponent.setValue(e):(console.warn(new Ce(`invalid value '${e}' at textAreaInputField ${this.inputFieldMarkdownRenderChild.uuid}`)),this.textAreaComponent.setValue(""))}isEqualValue(e){return this.getValue()==e}getDefaultValue(){return""}getHtmlElement(){if(!this.textAreaComponent)throw new M("text area input component is undefined");return this.textAreaComponent.inputEl}render(e){console.debug(`meta-bind | TextAreaInputField >> render ${this.inputFieldMarkdownRenderChild.uuid}`);let r=new Ru.TextAreaComponent(e);r.setValue(this.inputFieldMarkdownRenderChild.getInitialValue()),r.onChange(this.onValueChange),this.textAreaComponent=r}destroy(){}};var Fr=class{constructor(t,e,r,i,u=!1){this.value=t,this.id=r,this.active=u,this.highlighted=!1,this.selectInputField=i,this.cssClass="meta-bind-plugin-select-input-element",this.activeClass="meta-bind-plugin-select-input-element-selected",this.hoverClass="meta-bind-plugin-select-input-element-hover",this.element=e.createDiv({cls:this.cssClass}),this.element.id=this.getHTMLId(),this.element.on("click","#"+this.getHTMLId(),()=>{this.selectInputField.allowMultiSelect||this.selectInputField.disableAllOtherElements(this.id),this.setActive(!this.active,!0)}),this.element.on("mouseenter","#"+this.getHTMLId(),()=>{this.setHighlighted(!0)}),this.element.on("mouseleave","#"+this.getHTMLId(),()=>{this.setHighlighted(!1)})}getHTMLId(){return`meta-bind-select-input-element-${this.selectInputField.inputFieldMarkdownRenderChild.uuid}-${this.id}`}isHighlighted(){return this.highlighted}setHighlighted(t){this.highlighted=t,this.highlighted?(this.addClass(this.hoverClass),this.selectInputField.deHighlightAllOtherElements(this.id)):this.removeClass(this.hoverClass)}isActive(){return this.active}setActive(t,e=!0){this.active=t,this.update(e)}update(t){this.active?this.addClass(this.activeClass):this.removeClass(this.activeClass),t&&this.selectInputField.onChange()}addClass(t){this.element.hasClass(t)||this.element.addClass(t)}removeClass(t){this.element.hasClass(t)&&this.element.removeClass(t)}render(){this.element.createEl("div",{text:this.value})}};var pt=class extends G{constructor(e,r){super(e,r);this.elements=[],this.allowMultiSelect=!1}getHtmlElement(){if(!this.container)throw new M("select input container is undefined");return this.container}getValue(){var e,r;return(r=(e=this.elements.filter(i=>i.isActive()).first())==null?void 0:e.value)!=null?r:""}setValue(e){for(let r of this.elements)e===r.value?r.setActive(!0,!1):r.setActive(!1,!1)}isEqualValue(e){return this.getValue()==e}getDefaultValue(){return""}onChange(){this.onValueChange(this.getValue())}render(e){console.debug(`meta-bind | SelectInputField >> render ${this.inputFieldMarkdownRenderChild.uuid}`),this.container=e;let r=this.inputFieldMarkdownRenderChild.getArguments("option"),i=0;for(let u of r){let o=new Fr(u.value,e,i,this,!1);this.elements.push(o),o.render(),i+=1}this.setValue(this.inputFieldMarkdownRenderChild.getInitialValue())}destroy(){}disableAllOtherElements(e){for(let r of this.elements)r.id!==e&&r.setActive(!1,!1)}deHighlightAllOtherElements(e){for(let r of this.elements)r.id!==e&&r.setHighlighted(!1)}activateHighlighted(){for(let e of this.elements)e.isHighlighted()&&(e.setActive(!e.isActive()),this.allowMultiSelect||this.disableAllOtherElements(e.id))}highlightUp(){var e,r;for(let i of this.elements)if(i.isHighlighted()){(e=this.getPreviousSelectModalElement(i))==null||e.setHighlighted(!0);return}(r=this.elements.at(-1))==null||r.setHighlighted(!0)}highlightDown(){var e,r;for(let i of this.elements)if(i.isHighlighted()){(e=this.getNextSelectModalElement(i))==null||e.setHighlighted(!0);return}(r=this.elements.at(0))==null||r.setHighlighted(!0)}getNextSelectModalElement(e){let r=e.id+1;return r=ci(r,this.elements.length),this.elements.filter(i=>i.id===r).at(0)}getPreviousSelectModalElement(e){let r=e.id-1;return r=ci(r,this.elements.length),this.elements.filter(i=>i.id===r).at(0)}};pt.allowInlineCodeBlock=!1;var tn=class extends pt{constructor(t,e){super(t,e),this.allowMultiSelect=!0}getValue(){return this.elements.filter(t=>t.isActive()).map(t=>t.value)}setValue(t){if(!t||t.length===0){for(let e of this.elements)e.setActive(!1,!1);return}e:for(let e of this.elements){for(let r of t)if(r===e.value){e.setActive(!0,!1);continue e}e.setActive(!1,!1)}}isEqualValue(t){return Array.isArray(t)?Bu(this.getValue(),t):!1}getDefaultValue(){return[]}};var Mt=require("obsidian");var fi=require("obsidian"),H=class{static stringify(t){return t.format(this.dateFormat)}static parse(t){return(0,fi.moment)(t,H.dateFormat)}static getDefaultDate(){return(0,fi.moment)(new Date)}static getDefaultDay(){return 1}static getDefaultMonth(){return 1}static getDefaultYear(){return 2022}};var nn=class extends G{constructor(e,r){super(e,r);this.months={0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"};this.date=H.getDefaultDate(),this.days={};for(let i=1;i<=31;i++)this.days[i.toString()]=i.toString()}getHtmlElement(){if(!this.container)throw new M("toggle input container is undefined");return this.container}getValue(){return H.stringify(this.date)}setValue(e){if(!this.monthComponent)throw new M("date input month component is undefined");if(!this.dayComponent)throw new M("date input day component is undefined");if(!this.yearComponent)throw new M("date input hour component is undefined");this.date=H.parse(e),this.date||(console.warn(new Ce(`invalid value '${e}' at dateInputField ${this.inputFieldMarkdownRenderChild.uuid}`)),this.date=H.getDefaultDate()),this.date.isValid()||(this.date=H.getDefaultDate(),this.onValueChange(this.getValue())),this.monthComponent.setValue(this.date.month().toString()),this.dayComponent.setValue(this.date.date().toString()),this.yearComponent.setValue(this.date.year().toString())}isEqualValue(e){return e==this.getValue()}getDefaultValue(){return H.stringify(H.getDefaultDate())}render(e){var i;console.debug(`meta-bind | DateInputField >> render ${this.inputFieldMarkdownRenderChild.uuid}`),this.date=(i=H.parse(this.inputFieldMarkdownRenderChild.getInitialValue()))!=null?i:H.getDefaultDate(),this.date.isValid()||(this.date=H.getDefaultDate(),this.onValueChange(this.getValue()));let r=this.inputFieldMarkdownRenderChild.plugin.settings.useUsDateInputOrder;e.removeClass("meta-bind-plugin-input-wrapper"),e.addClass("meta-bind-plugin-flex-input-wrapper","meta-bind-plugin-input-element-group"),r?(this.monthComponent=new Mt.DropdownComponent(e),this.monthComponent.addOptions(this.months),this.monthComponent.setValue(this.date.month().toString()),this.monthComponent.onChange(this.onMonthChange.bind(this)),this.dayComponent=new Mt.DropdownComponent(e),this.dayComponent.addOptions(this.days),this.dayComponent.setValue(this.date.date().toString()),this.dayComponent.onChange(this.onDayChange.bind(this)),this.dayComponent.selectEl.addClass("meta-bind-plugin-input-element-group-element"),this.monthComponent.selectEl.addClass("meta-bind-plugin-input-element-group-element")):(this.dayComponent=new Mt.DropdownComponent(e),this.dayComponent.addOptions(this.days),this.dayComponent.setValue(this.date.date().toString()),this.dayComponent.onChange(this.onDayChange.bind(this)),this.monthComponent=new Mt.DropdownComponent(e),this.monthComponent.addOptions(this.months),this.monthComponent.setValue(this.date.month().toString()),this.monthComponent.onChange(this.onMonthChange.bind(this)),this.dayComponent.selectEl.addClass("meta-bind-plugin-input-element-group-element"),this.monthComponent.selectEl.addClass("meta-bind-plugin-input-element-group-element")),this.yearComponent=new Mt.TextComponent(e),this.yearComponent.setValue(this.date.year().toString()),this.yearComponent.onChange(this.onYearChange.bind(this)),this.yearComponent.inputEl.addClass("meta-bind-plugin-date-input-year-input"),this.yearComponent.inputEl.addClass("meta-bind-plugin-input-element-group-element"),this.yearComponent.inputEl.type="number",this.yearComponent.inputEl.max="9999",this.container=e}destroy(){}onMonthChange(e){var i;this.date.month(e);let r=this.clampDay(this.date.date());(i=this.dayComponent)==null||i.setValue(r.toString()),this.date.date(r),this.onValueChange(this.getValue())}onDayChange(e){var u;let r=Number.parseInt(e),i=this.clampDay(r);i!==r&&((u=this.dayComponent)==null||u.setValue(i.toString())),this.date.date(i),this.onValueChange(this.getValue())}onYearChange(e){let r=Number.parseInt(e);this.date.year(Number.isNaN(r)?H.getDefaultYear():r),this.onValueChange(this.getValue())}clampDay(e){return Number.isNaN(e)?H.getDefaultDay():e<1?1:e>this.date.daysInMonth()?this.date.daysInMonth():e}};var hi=require("obsidian");var mi=class{constructor(){this._hour=he.getDefaultHour(),this._minute=he.getDefaultHour()}getHour(){return this._hour}setHour(t){if(t<0||t>24){this._hour=he.getDefaultHour();return}this._hour=t}getMinute(){return this._minute}setMinute(t){if(t<0||t>59){this._minute=he.getDefaultMinute();return}this._minute=t}getUniformHour(){return("00"+this.getHour().toString()).slice(-2)}getUniformMinute(){return("00"+this.getMinute().toString()).slice(-2)}setHourFromString(t){let e=Number.parseInt(t);this.setHour(Number.isNaN(e)?he.getDefaultHour():e)}setMinuteFromString(t){let e=Number.parseInt(t);this.setMinute(Number.isNaN(e)?he.getDefaultMinute():e)}},he=class{static parse(t){let e=he.getDefaultTime(),r=t.split(":");if(r.length===2)return e.setHourFromString(r[0]),e.setMinuteFromString(r[1]),e}static stringify(t){return`${t.getUniformHour()}:${t.getUniformMinute()}`}static getDefaultTime(){return new mi}static getDefaultHour(){return 0}static getDefaultMinute(){return 0}};var rn=class extends G{constructor(e,r){super(e,r);this.time=he.getDefaultTime(),this.hours={};for(let i=0;i<=24;i++)this.hours[i.toString()]=i.toString();this.minutes={};for(let i=0;i<=59;i++)this.minutes[i.toString()]=i.toString()}getHtmlElement(){if(!this.container)throw new M("time input container is undefined");return this.container}getValue(){return he.stringify(this.time)}setValue(e){if(!this.hourComponent)throw new M("time input hour component is undefined");if(!this.minuteComponent)throw new M("time input minute component is undefined");this.time=he.parse(e),this.time||(console.warn(new Ce(`invalid value '${e}' at timeInputField ${this.inputFieldMarkdownRenderChild.uuid}`)),this.time=he.getDefaultTime()),this.hourComponent.setValue(this.time.getHour().toString()),this.minuteComponent.setValue(this.time.getMinute().toString())}isEqualValue(e){return e==this.getValue()}getDefaultValue(){return he.stringify(he.getDefaultTime())}render(e){var r;console.debug(`meta-bind | TimeInputField >> render ${this.inputFieldMarkdownRenderChild.uuid}`),this.time=(r=he.parse(this.inputFieldMarkdownRenderChild.getInitialValue()))!=null?r:he.getDefaultTime(),e.removeClass("meta-bind-plugin-input-wrapper"),e.addClass("meta-bind-plugin-flex-input-wrapper","meta-bind-plugin-input-element-group"),this.hourComponent=new hi.DropdownComponent(e),this.hourComponent.addOptions(this.hours),this.hourComponent.setValue(this.time.getHour().toString()),this.hourComponent.onChange(this.onHourChange.bind(this)),this.minuteComponent=new hi.DropdownComponent(e),this.minuteComponent.addOptions(this.minutes),this.minuteComponent.setValue(this.time.getMinute().toString()),this.minuteComponent.onChange(this.onMinuteChange.bind(this)),this.hourComponent.selectEl.addClass("meta-bind-plugin-input-element-group-element"),this.minuteComponent.selectEl.addClass("meta-bind-plugin-input-element-group-element"),this.container=e}destroy(){}onHourChange(e){var r;(r=this.time)==null||r.setHourFromString(e),this.onValueChange(this.getValue())}onMinuteChange(e){var r;(r=this.time)==null||r.setMinuteFromString(e),this.onValueChange(this.getValue())}};function Z(){}function yi(n){return n()}function Pu(){return Object.create(null)}function pe(n){n.forEach(yi)}function _r(n){return typeof n=="function"}function oe(n,t){return n!=n?t==t:n!==t||n&&typeof n=="object"||typeof n=="function"}var br;function un(n,t){return br||(br=document.createElement("a")),br.href=t,n===br.href}function ju(n){return Object.keys(n).length===0}var $u=!1;function Is(){$u=!0}function As(){$u=!1}function I(n,t){n.appendChild(t)}function ge(n,t,e){let r=Bs(n);if(!r.getElementById(t)){let i=A("style");i.id=t,i.textContent=e,Ns(r,i)}}function Bs(n){if(!n)return document;let t=n.getRootNode?n.getRootNode():n.ownerDocument;return t&&t.host?t:n.ownerDocument}function Ns(n,t){return I(n.head||n,t),t.sheet}function J(n,t,e){n.insertBefore(t,e||null)}function Y(n){n.parentNode&&n.parentNode.removeChild(n)}function Sr(n,t){for(let e=0;e<n.length;e+=1)n[e]&&n[e].d(t)}function A(n){return document.createElement(n)}function De(n){return document.createTextNode(n)}function ae(){return De(" ")}function xr(){return De("")}function ne(n,t,e,r){return n.addEventListener(t,e,r),()=>n.removeEventListener(t,e,r)}function k(n,t,e){e==null?n.removeAttribute(t):n.getAttribute(t)!==e&&n.setAttribute(t,e)}function Vs(n){return Array.from(n.childNodes)}function Te(n,t){t=""+t,n.wholeText!==t&&(n.data=t)}function Fi(n,t){n.value=t==null?"":t}function It(n,t,e){n.classList[e?"add":"remove"](t)}function Ls(n,t,{bubbles:e=!1,cancelable:r=!1}={}){let i=document.createEvent("CustomEvent");return i.initCustomEvent(n,e,r,t),i}var Mn;function Tn(n){Mn=n}function qu(){if(!Mn)throw new Error("Function called outside component initialization");return Mn}function On(n){qu().$$.on_mount.push(n)}function In(){let n=qu();return(t,e,{cancelable:r=!1}={})=>{let i=n.$$.callbacks[t];if(i){let u=Ls(t,e,{cancelable:r});return i.slice().forEach(o=>{o.call(n,u)}),!u.defaultPrevented}return!0}}var kn=[];var gt=[],Cr=[],gi=[],Rs=Promise.resolve(),Di=!1;function Ps(){Di||(Di=!0,Rs.then(Wu))}function vi(n){Cr.push(n)}function Hu(n){gi.push(n)}var pi=new Set,wr=0;function Wu(){let n=Mn;do{for(;wr<kn.length;){let t=kn[wr];wr++,Tn(t),js(t.$$)}for(Tn(null),kn.length=0,wr=0;gt.length;)gt.pop()();for(let t=0;t<Cr.length;t+=1){let e=Cr[t];pi.has(e)||(pi.add(e),e())}Cr.length=0}while(kn.length);for(;gi.length;)gi.pop()();Di=!1,pi.clear(),Tn(n)}function js(n){if(n.fragment!==null){n.update(),pe(n.before_update);let t=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,t),n.after_update.forEach(vi)}}var Er=new Set,Ot;function kr(){Ot={r:0,c:[],p:Ot}}function Tr(){Ot.r||pe(Ot.c),Ot=Ot.p}function Ee(n,t){n&&n.i&&(Er.delete(n),n.i(t))}function Ie(n,t,e,r){if(n&&n.o){if(Er.has(n))return;Er.add(n),Ot.c.push(()=>{Er.delete(n),r&&(e&&n.d(1),r())}),n.o(t)}else r&&r()}var nh=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function Uu(n,t){n.d(1),t.delete(n.key)}function zu(n,t,e,r,i,u,o,a,s,l,h,d){let f=n.length,g=u.length,v=f,F={};for(;v--;)F[n[v].key]=v;let S=[],C=new Map,L=new Map;for(v=g;v--;){let B=d(i,u,v),T=e(B),R=o.get(T);R?r&&R.p(B,t):(R=l(T,B),R.c()),C.set(T,S[v]=R),T in F&&L.set(T,Math.abs(v-F[T]))}let U=new Set,b=new Set;function O(B){Ee(B,1),B.m(a,h),o.set(B.key,B),h=B.first,g--}for(;f&&g;){let B=S[g-1],T=n[f-1],R=B.key,V=T.key;B===T?(h=B.first,f--,g--):C.has(V)?!o.has(R)||U.has(R)?O(B):b.has(V)?f--:L.get(R)>L.get(V)?(b.add(R),O(B)):(U.add(V),f--):(s(T,o),f--)}for(;f--;){let B=n[f];C.has(B.key)||s(B,o)}for(;g;)O(S[g-1]);return S}function Zu(n,t,e,r){let i=n.$$.props[t];i!==void 0&&(n.$$.bound[i]=e,r===void 0&&e(n.$$.ctx[i]))}function Dt(n){n&&n.c()}function rt(n,t,e,r){let{fragment:i,after_update:u}=n.$$;i&&i.m(t,e),r||vi(()=>{let o=n.$$.on_mount.map(yi).filter(_r);n.$$.on_destroy?n.$$.on_destroy.push(...o):pe(o),n.$$.on_mount=[]}),u.forEach(vi)}function ze(n,t){let e=n.$$;e.fragment!==null&&(pe(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function $s(n,t){n.$$.dirty[0]===-1&&(kn.push(n),Ps(),n.$$.dirty.fill(0)),n.$$.dirty[t/31|0]|=1<<t%31}function se(n,t,e,r,i,u,o,a=[-1]){let s=Mn;Tn(n);let l=n.$$={fragment:null,ctx:[],props:u,update:Z,not_equal:i,bound:Pu(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(s?s.$$.context:[])),callbacks:Pu(),dirty:a,skip_bound:!1,root:t.target||s.$$.root};o&&o(l.root);let h=!1;if(l.ctx=e?e(n,t.props||{},(d,f,...g)=>{let v=g.length?g[0]:f;return l.ctx&&i(l.ctx[d],l.ctx[d]=v)&&(!l.skip_bound&&l.bound[d]&&l.bound[d](v),h&&$s(n,d)),f}):[],l.update(),h=!0,pe(l.before_update),l.fragment=r?r(l.ctx):!1,t.target){if(t.hydrate){Is();let d=Vs(t.target);l.fragment&&l.fragment.l(d),d.forEach(Y)}else l.fragment&&l.fragment.c();t.intro&&Ee(n.$$.fragment),rt(n,t.target,t.anchor,t.customElement),As(),Wu()}Tn(s)}var qs;typeof HTMLElement=="function"&&(qs=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:n}=this.$$;this.$$.on_disconnect=n.map(yi).filter(_r);for(let t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(n,t,e){this[n]=e}disconnectedCallback(){pe(this.$$.on_disconnect)}$destroy(){ze(this,1),this.$destroy=Z}$on(n,t){if(!_r(t))return Z;let e=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return e.push(t),()=>{let r=e.indexOf(t);r!==-1&&e.splice(r,1)}}$set(n){this.$$set&&!ju(n)&&(this.$$.skip_bound=!0,this.$$set(n),this.$$.skip_bound=!1)}});var te=class{$destroy(){ze(this,1),this.$destroy=Z}$on(t,e){if(!_r(e))return Z;let r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(e),()=>{let i=r.indexOf(e);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!ju(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}};var Ju=require("obsidian");var Yu=require("obsidian");function Hs(n){ge(n,"svelte-1elx65w",".icon-wrapper.svelte-1elx65w{display:inline-block;position:relative;width:18px;height:18px}")}function Gu(n){let t;return{c(){t=A("div"),k(t,"class","icon-wrapper svelte-1elx65w")},m(e,r){J(e,t,r),n[2](t)},p:Z,d(e){e&&Y(t),n[2](null)}}}function Ws(n){let t,e=n[0].length>0&&Gu(n);return{c(){e&&e.c(),t=xr()},m(r,i){e&&e.m(r,i),J(r,t,i)},p(r,[i]){r[0].length>0?e?e.p(r,i):(e=Gu(r),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:Z,o:Z,d(r){e&&e.d(r),r&&Y(t)}}}function Us(n,t,e){let{iconName:r=""}=t,i;On(()=>{(0,Yu.setIcon)(i,r)});function u(o){gt[o?"unshift":"push"](()=>{i=o,e(1,i)})}return n.$$set=o=>{"iconName"in o&&e(0,r=o.iconName)},[r,i,u]}var bi=class extends te{constructor(t){super(),se(this,t,Us,Ws,oe,{iconName:0},Hs)}},Mr=bi;function zs(n){ge(n,"svelte-1urcwq2",".date-picker-input.svelte-1urcwq2{background:var(--background-secondary);border-radius:var(--meta-bind-plugin-border-radius);border:var(--meta-bind-plugin-border-width) solid var(--background-modifier-border);padding:5px 5px 5px 7px;cursor:pointer;position:relative;color:var(--text-normal);display:inline-flex;align-items:center;gap:5px}.date-picker-text.svelte-1urcwq2{display:inline-block}")}function Zs(n){let t,e,r,i=n[0].format(n[1])+"",u,o,a,s,l,h;return a=new Mr({props:{iconName:"calendar"}}),{c(){t=A("div"),e=A("div"),r=A("span"),u=De(i),o=ae(),Dt(a.$$.fragment),k(e,"class","date-picker-text svelte-1urcwq2"),k(t,"class","date-picker-input svelte-1urcwq2")},m(d,f){J(d,t,f),I(t,e),I(e,r),I(r,u),I(t,o),rt(a,t,null),s=!0,l||(h=[ne(t,"click",n[2]),ne(t,"keydown",n[3])],l=!0)},p(d,[f]){(!s||f&3)&&i!==(i=d[0].format(d[1])+"")&&Te(u,i)},i(d){s||(Ee(a.$$.fragment,d),s=!0)},o(d){Ie(a.$$.fragment,d),s=!1},d(d){d&&Y(t),ze(a),l=!1,pe(h)}}}function Gs(n,t,e){let{showDatePicker:r}=t,{selectedDate:i=(0,Ju.moment)()}=t,{dateFormat:u="dddd, MMMM Do YYYY"}=t;function o(l){e(0,i=l)}function a(l){r()}function s(l){l.key===" "&&r()}return n.$$set=l=>{"showDatePicker"in l&&e(4,r=l.showDatePicker),"selectedDate"in l&&e(0,i=l.selectedDate),"dateFormat"in l&&e(1,u=l.dateFormat)},[i,u,a,s,r,o]}var wi=class extends te{constructor(t){super(),se(this,t,Gs,Zs,oe,{showDatePicker:4,selectedDate:0,dateFormat:1,updateValue:5},zs)}get updateValue(){return this.$$.ctx[5]}},Qu=wi;var lo=require("obsidian");var Ku=require("obsidian"),Ys=["January","February","March","April","May","June","July","August","September","October","November","December"];function Ci(n){return Ys[n]}function Xu(n,t){let e=(0,Ku.moment)(new Date(t,n)).daysInMonth(),r=new Array(42).fill(void 0),i=Js(new Date(t,n,1));for(let u=0;u<e;u++)r[u+i]=u+1;return r=r[r.length-7]?r:r.slice(0,-7),r=r[r.length-7]?r:r.slice(0,-7),r}function Js(n){return n.getDay()===0?6:n.getDay()-1}function Ei(){return["Mo","Tu","We","Th","Fr","Sa","Su"]}function eo(){let n=0;return()=>++n}var uo=require("obsidian");function Qs(n){ge(n,"svelte-1ouugmg",".calendar.svelte-1ouugmg{margin-top:10px}.calendar-header.svelte-1ouugmg{display:flex;justify-content:space-around;flex-wrap:wrap;gap:var(--size-4-1);background:var(--background-secondary);border-radius:var(--meta-bind-plugin-border-radius);margin-bottom:var(--size-4-1);;}.calendar-content.svelte-1ouugmg{display:grid;flex-wrap:wrap;grid-template-columns:repeat(7, 1fr);gap:var(--size-4-1)}.cell.svelte-1ouugmg{min-width:40px;padding:var(--size-4-2);display:flex;justify-content:center;align-items:center;border-radius:var(--meta-bind-plugin-border-radius)}.content-cell.svelte-1ouugmg{cursor:pointer}.cell-text.svelte-1ouugmg{margin:auto;text-align:center}.selected.svelte-1ouugmg{background:var(--interactive-accent)}.highlight.svelte-1ouugmg:hover{background:var(--interactive-hover)}.selected.highlight.svelte-1ouugmg:hover{background:var(--interactive-accent-hover)}")}function to(n,t,e){let r=n.slice();return r[10]=t[e],r}function no(n,t,e){let r=n.slice();return r[13]=t[e],r}function ro(n){let t,e,r=n[13]+"",i,u;return{c(){t=A("div"),e=A("span"),i=De(r),u=ae(),k(e,"class","cell-text svelte-1ouugmg"),k(t,"class","cell header-cell svelte-1ouugmg")},m(o,a){J(o,t,a),I(t,e),I(e,i),I(t,u)},p:Z,d(o){o&&Y(t)}}}function io(n,t){let e,r,i=(t[10]||"")+"",u,o,a,s;function l(){return t[6](t[10])}function h(...d){return t[7](t[10],...d)}return{key:n,first:null,c(){e=A("div"),r=A("span"),u=De(i),o=ae(),k(r,"class","cell-text svelte-1ouugmg"),k(e,"class","cell svelte-1ouugmg"),It(e,"highlight",t[10]),It(e,"content-cell",t[10]),It(e,"selected",t[0].year()===t[2]&&t[0].month()===t[1]&&t[0].date()===t[10]),this.first=e},m(d,f){J(d,e,f),I(e,r),I(r,u),I(e,o),a||(s=[ne(e,"click",l),ne(e,"keydown",h)],a=!0)},p(d,f){t=d,f&8&&i!==(i=(t[10]||"")+"")&&Te(u,i),f&8&&It(e,"highlight",t[10]),f&8&&It(e,"content-cell",t[10]),f&15&&It(e,"selected",t[0].year()===t[2]&&t[0].month()===t[1]&&t[0].date()===t[10])},d(d){d&&Y(e),a=!1,pe(s)}}}function Ks(n){let t,e,r,i,u=[],o=new Map,a=Ei(),s=[];for(let d=0;d<a.length;d+=1)s[d]=ro(no(n,a,d));let l=n[3],h=d=>eo();for(let d=0;d<l.length;d+=1){let f=to(n,l,d),g=h(f);o.set(g,u[d]=io(g,f))}return{c(){t=A("div"),e=A("div");for(let d=0;d<s.length;d+=1)s[d].c();r=ae(),i=A("div");for(let d=0;d<u.length;d+=1)u[d].c();k(e,"class","calendar-header svelte-1ouugmg"),k(i,"class","calendar-content svelte-1ouugmg"),k(t,"class","calendar svelte-1ouugmg")},m(d,f){J(d,t,f),I(t,e);for(let g=0;g<s.length;g+=1)s[g].m(e,null);I(t,r),I(t,i);for(let g=0;g<u.length;g+=1)u[g].m(i,null)},p(d,[f]){if(f&0){a=Ei();let g;for(g=0;g<a.length;g+=1){let v=no(d,a,g);s[g]?s[g].p(v,f):(s[g]=ro(v),s[g].c(),s[g].m(e,null))}for(;g<s.length;g+=1)s[g].d(1);s.length=a.length}f&63&&(l=d[3],u=zu(u,f,h,1,d,l,o,i,Uu,io,null,to))},i:Z,o:Z,d(d){d&&Y(t),Sr(s,d);for(let f=0;f<u.length;f+=1)u[f].d()}}}function Xs(n,t,e){let r=In(),{selectedDate:i}=t,{month:u}=t,{year:o}=t,a;function s(g){r("dateChange",(0,uo.moment)(new Date(o,u,g)))}function l(g){g&&s(g)}function h(g,v){g.key===" "&&l(v)}let d=g=>l(g),f=(g,v)=>h(v,g);return n.$$set=g=>{"selectedDate"in g&&e(0,i=g.selectedDate),"month"in g&&e(1,u=g.month),"year"in g&&e(2,o=g.year)},n.$$.update=()=>{if(n.$$.dirty&6){e:e(3,a=Xu(u,o))}},[i,u,o,a,l,h,d,f]}var _i=class extends te{constructor(t){super(),se(this,t,Xs,Ks,oe,{selectedDate:0,month:1,year:2},Qs)}},oo=_i;var ao=require("obsidian");function el(n){ge(n,"svelte-1nlxj7b",".date-picker.svelte-1nlxj7b{display:block;padding:var(--size-4-4)}.date-picker-header.svelte-1nlxj7b{display:flex;gap:var(--size-4-2);align-items:center;justify-content:space-around}.date-picker-header-text.svelte-1nlxj7b{flex:1;text-align:center;display:flex;gap:var(--size-4-2);align-items:center;justify-content:center;width:min-content}.date-picker-header-text-year.svelte-1nlxj7b{width:60px;padding:var(--size-4-2)}.date-picker-header-text-month.svelte-1nlxj7b{height:min-content}.month-switch-button.svelte-1nlxj7b{margin:0}")}function tl(n){let t,e,r,i,u,o,a=Ci(n[1])+"",s,l,h,d,f,g,v,F,S,C,L;return F=new oo({props:{month:n[1],year:n[2],selectedDate:n[0]}}),F.$on("dateChange",n[6]),{c(){t=A("div"),e=A("div"),r=A("button"),r.textContent="Prev",i=ae(),u=A("div"),o=A("span"),s=De(a),l=ae(),h=A("input"),f=ae(),g=A("button"),g.textContent="Next",v=ae(),Dt(F.$$.fragment),k(r,"class","month-switch-button svelte-1nlxj7b"),k(o,"class","date-picker-header-text-month svelte-1nlxj7b"),k(h,"class","date-picker-header-text-year svelte-1nlxj7b"),k(h,"type","number"),h.value=d=n[2].toString(),k(u,"class","date-picker-header-text svelte-1nlxj7b"),k(g,"class","month-switch-button svelte-1nlxj7b"),k(e,"class","date-picker-header svelte-1nlxj7b"),k(t,"class","date-picker svelte-1nlxj7b")},m(U,b){J(U,t,b),I(t,e),I(e,r),I(e,i),I(e,u),I(u,o),I(o,s),I(u,l),I(u,h),I(e,f),I(e,g),I(t,v),rt(F,t,null),S=!0,C||(L=[ne(r,"click",n[4]),ne(h,"input",n[5]),ne(g,"click",n[3])],C=!0)},p(U,[b]){(!S||b&2)&&a!==(a=Ci(U[1])+"")&&Te(s,a),(!S||b&4&&d!==(d=U[2].toString())&&h.value!==d)&&(h.value=d);let O={};b&2&&(O.month=U[1]),b&4&&(O.year=U[2]),b&1&&(O.selectedDate=U[0]),F.$set(O)},i(U){S||(Ee(F.$$.fragment,U),S=!0)},o(U){Ie(F.$$.fragment,U),S=!1},d(U){U&&Y(t),ze(F),C=!1,pe(L)}}}function nl(n,t,e){let r=In(),{selectedDate:i=(0,ao.moment)()}=t,{dateChangeCallback:u}=t,o,a,s,l;function h(){if(a===11){e(1,a=0),e(2,s+=1);return}e(1,a=a+1)}function d(){if(a===0){e(1,a=11),e(2,s-=1);return}e(1,a-=1)}function f(v){let F=v.target.value,S=Number.parseInt(F);Number.isNaN(S)||e(2,s=S)}function g(v){l=!1,e(0,i=v.detail),u(v.detail)}return n.$$set=v=>{"selectedDate"in v&&e(0,i=v.selectedDate),"dateChangeCallback"in v&&e(7,u=v.dateChangeCallback)},n.$$.update=()=>{if(n.$$.dirty&1){e:console.log("update date picker",i),o=i.date(),e(1,a=i.month()),e(2,s=i.year())}},[i,a,s,h,d,f,g,u]}var Si=class extends te{constructor(t){super(),se(this,t,nl,tl,oe,{selectedDate:0,dateChangeCallback:7},el)}},so=Si;var Or=class extends lo.Modal{constructor(e,r){super(e);this.opener=r}onOpen(){let{contentEl:e}=this;new so({target:e,props:{selectedDate:this.opener.date,dateChangeCallback:r=>this.opener.datePickerValueChanged(r)}})}};var on=class extends G{constructor(e,r){super(e,r);this.date=H.getDefaultDate()}getValue(){return H.stringify(this.date)}setValue(e){var r,i;this.date=(r=H.parse(e))!=null?r:H.getDefaultDate(),this.date.isValid()||(this.date=H.getDefaultDate(),this.onValueChange(this.getValue())),(i=this.component)==null||i.$set({selectedDate:this.date})}isEqualValue(e){return this.getValue()==e}getDefaultValue(){return H.stringify(H.getDefaultDate())}getHtmlElement(){if(!this.container)throw new M("");return this.container}datePickerValueChanged(e){var r,i;this.date=e,(r=this.component)==null||r.updateValue(this.date),(i=this.modal)==null||i.close(),this.date.isValid()&&this.onValueChange(this.getValue())}showDatePicker(){this.modal=new Or(this.inputFieldMarkdownRenderChild.plugin.app,this),this.modal.open()}render(e){var r;console.debug(`meta-bind | DatePickerInputField >> render ${this.inputFieldMarkdownRenderChild.uuid}`),this.container=e,this.date=(r=H.parse(this.inputFieldMarkdownRenderChild.getInitialValue()))!=null?r:H.getDefaultDate(),this.date.isValid()||(this.date=H.getDefaultDate(),this.onValueChange(this.getValue())),this.component=new Qu({target:e,props:{dateFormat:this.inputFieldMarkdownRenderChild.plugin.settings.preferredDateFormat,showDatePicker:()=>this.showDatePicker(),selectedDate:this.date}})}destroy(){var e;(e=this.component)==null||e.$destroy()}};var co=require("obsidian");var an=class extends G{getValue(){if(!this.numberComponent)throw new M("number input component is undefined");let e=parseFloat(this.numberComponent.getValue());return isNaN(e)?0:e}setValue(e){if(!this.numberComponent)throw new M("number input component is undefined");e!=null&&(typeof e=="number"||typeof e=="string")?this.numberComponent.setValue(di(e)):(console.warn(new Ce(`invalid value '${e}' at numberInputField ${this.inputFieldMarkdownRenderChild.uuid}`)),this.numberComponent.setValue(this.getDefaultValue()))}isEqualValue(e){return this.getValue()==e}getDefaultValue(){return 0}getHtmlElement(){if(!this.numberComponent)throw new M("number input component is undefined");return this.numberComponent.inputEl}render(e){console.debug(`meta-bind | NumberInputField >> render ${this.inputFieldMarkdownRenderChild.uuid}`);let r=new co.TextComponent(e);r.inputEl.type="number",r.setValue(di(this.inputFieldMarkdownRenderChild.getInitialValue())),r.onChange(i=>{let u=parseFloat(i);this.onValueChange(isNaN(u)?0:u)}),this.numberComponent=r}destroy(){}};function fo(n){if(!n)throw new z("invalid link, link is empty");let t={};t.isEmbed=n.startsWith("!");let e=j.getInBetween(n,new bt("[[","]]"));if(!e)throw new z("invalid link, link is empty");if(typeof e!="string")throw new z("invalid link, link format is invalid");let r=e.split("|");if(r.length===2)t.alias=r[1];else if(r.length>2)throw new z("invalid link, link may only contain a maximum of one '|'");let i=r[0].split("#");if(i.length===1)t.target=i[0];else if(i.length===2)t.target=i[0],t.block=i[1];else throw new z("invalid link, link target may only contain a maximum of one '#'");return t}function mo(n){return(n.startsWith("![[")||n.startsWith("[["))&&n.endsWith("]]")}function rl(n){let t,e=n[1]()+"",r,i,u;return{c(){t=A("a"),r=De(e),k(t,"data-href",i=n[1]()),k(t,"href",u=n[1]()),k(t,"class","internal-link"),k(t,"target","_blank"),k(t,"rel","noopener")},m(o,a){J(o,t,a),I(t,r)},p:Z,d(o){o&&Y(t)}}}function il(n){let t,e=n[0].alias+"",r,i,u,o;return{c(){t=A("a"),r=De(e),k(t,"data-href",i=n[1]()),k(t,"href",u=n[1]()),k(t,"class","internal-link"),k(t,"target","_blank"),k(t,"rel","noopener"),k(t,"aria-label",o=n[1]()),k(t,"aria-label-position","top")},m(a,s){J(a,t,s),I(t,r)},p(a,s){s&1&&e!==(e=a[0].alias+"")&&Te(r,e)},d(a){a&&Y(t)}}}function ul(n){let t;function e(u,o){return u[0].alias?il:rl}let r=e(n,-1),i=r(n);return{c(){i.c(),t=xr()},m(u,o){i.m(u,o),J(u,t,o)},p(u,[o]){r===(r=e(u,o))&&i?i.p(u,o):(i.d(1),i=r(u),i&&(i.c(),i.m(t.parentNode,t)))},i:Z,o:Z,d(u){i.d(u),u&&Y(t)}}}function ol(n,t,e){let{mdLink:r}=t;function i(){return r.block?`${r.target}#${r.block}`:r.target}return n.$$set=u=>{"mdLink"in u&&e(0,r=u.mdLink)},[r,i]}var xi=class extends te{constructor(t){super(),se(this,t,ol,ul,oe,{mdLink:0})}},ho=xi;function al(n){ge(n,"svelte-1r8vm9q",".suggest-input.svelte-1r8vm9q{background:var(--background-secondary);border-radius:var(--meta-bind-plugin-border-radius);border:var(--meta-bind-plugin-border-width) solid var(--background-modifier-border);padding:5px 5px 5px 7px;cursor:pointer;position:relative;color:var(--text-normal);display:inline-flex;align-items:center;gap:5px}.suggest-text.svelte-1r8vm9q{display:inline-block}")}function sl(n){let t,e;return{c(){t=A("span"),e=De(n[1])},m(r,i){J(r,t,i),I(t,e)},p(r,i){i&2&&Te(e,r[1])},i:Z,o:Z,d(r){r&&Y(t)}}}function ll(n){let t,e,r;function i(o){n[7](o)}let u={};return n[0]!==void 0&&(u.mdLink=n[0]),t=new ho({props:u}),gt.push(()=>Zu(t,"mdLink",i,n[0])),{c(){Dt(t.$$.fragment)},m(o,a){rt(t,o,a),r=!0},p(o,a){let s={};!e&&a&1&&(e=!0,s.mdLink=o[0],Hu(()=>e=!1)),t.$set(s)},i(o){r||(Ee(t.$$.fragment,o),r=!0)},o(o){Ie(t.$$.fragment,o),r=!1},d(o){ze(t,o)}}}function cl(n){let t,e,r,i,u,o,a,s,l,h=[ll,sl],d=[];function f(g,v){return g[2]?0:1}return r=f(n,-1),i=d[r]=h[r](n),o=new Mr({props:{iconName:"list"}}),{c(){t=A("div"),e=A("div"),i.c(),u=ae(),Dt(o.$$.fragment),k(e,"class","suggest-text svelte-1r8vm9q"),k(t,"class","suggest-input svelte-1r8vm9q")},m(g,v){J(g,t,v),I(t,e),d[r].m(e,null),I(t,u),rt(o,t,null),a=!0,s||(l=[ne(t,"click",n[3]),ne(t,"keydown",n[4])],s=!0)},p(g,[v]){let F=r;r=f(g,v),r===F?d[r].p(g,v):(kr(),Ie(d[F],1,1,()=>{d[F]=null}),Tr(),i=d[r],i?i.p(g,v):(i=d[r]=h[r](g),i.c()),Ee(i,1),i.m(e,null))},i(g){a||(Ee(i),Ee(o.$$.fragment,g),a=!0)},o(g){Ie(i),Ie(o.$$.fragment,g),a=!1},d(g){g&&Y(t),d[r].d(),ze(o),s=!1,pe(l)}}}function dl(n,t,e){let{showSuggest:r}=t,i,u,o=!1;function a(d){if(e(2,o=mo(d)),o)try{e(0,i=fo(d))}catch(f){console.warn(f)}else e(1,u=d)}function s(d){d.target instanceof HTMLAnchorElement||r()}function l(d){d.key===" "&&r()}function h(d){i=d,e(0,i)}return n.$$set=d=>{"showSuggest"in d&&e(5,r=d.showSuggest)},[i,u,o,s,l,r,a,h]}var ki=class extends te{constructor(t){super(),se(this,t,dl,cl,oe,{showSuggest:5,updateValue:6},al)}get updateValue(){return this.$$.ctx[6]}},po=ki;var au=Cn(za());var Za=require("obsidian"),Zr=class extends Za.FuzzySuggestModal{constructor(e,r,i){super(e);this.options=r,this.onSelect=i}getItemText(e){return e.displayValue}getItems(){return this.options}onChooseItem(e,r){this.onSelect(e)}};var Ga=require("obsidian");var gn=class extends G{constructor(e,r){super(e,r);if(this.value="",this.options=[],this.needsDataview()&&!(0,au.getAPI)(this.inputFieldMarkdownRenderChild.plugin.app))throw new We("dataview needs to be installed and enabled to use suggest option queries")}getValue(){return this.value}setValue(e){var r;this.value=e,(r=this.component)==null||r.updateValue(e)}isEqualValue(e){return this.value==e}getDefaultValue(){return""}getHtmlElement(){if(!this.container)throw new M("");return this.container}needsDataview(){return this.inputFieldMarkdownRenderChild.getArguments("optionQuery").length>0}async getOptions(){this.options=[];let e=this.inputFieldMarkdownRenderChild.getArguments("option"),r=this.inputFieldMarkdownRenderChild.getArguments("optionQuery");for(let i of e)this.options.push({value:i.value,displayValue:i.value});if(r.length>0){let i=(0,au.getAPI)(this.inputFieldMarkdownRenderChild.plugin.app);if(!i){new Ga.Notice("meta-bind | dataview needs to be installed and enabled to use suggest option queries");return}for(let u of r)(await i.pages(u.value,this.inputFieldMarkdownRenderChild.filePath)).forEach(a=>{try{let s=a.file;this.options.push({value:`[[${s.path}|${s.name}]]`,displayValue:`file: ${s.name}`})}catch(s){console.warn("meta-bind | error while computing suggest options",s)}})}}async showSuggest(){await this.getOptions(),new Zr(this.inputFieldMarkdownRenderChild.plugin.app,this.options,e=>{this.setValue(e.value),this.onValueChange(e.value)}).open()}render(e){console.debug(`meta-bind | SuggestInputField >> render ${this.inputFieldMarkdownRenderChild.uuid}`),this.container=e,this.value=this.inputFieldMarkdownRenderChild.getInitialValue(),this.component=new po({target:e,props:{showSuggest:()=>this.showSuggest()}}),this.component.updateValue(this.value)}destroy(){var e;(e=this.component)==null||e.$destroy()}};var Ya=require("obsidian");function Md(n){ge(n,"svelte-1ycn1rm",".editor-input.svelte-1ycn1rm.svelte-1ycn1rm{background:var(--background-secondary);width:100%;height:500px;padding:0;position:relative;margin-left:0}.editor-input.svelte-1ycn1rm>textarea.svelte-1ycn1rm{background:var(--background-secondary);border:none;padding:var(--size-4-4) var(--size-4-8);margin:0;position:absolute;inset:0;resize:none}.editor-input.svelte-1ycn1rm>div.svelte-1ycn1rm{padding:var(--size-4-4) var(--size-4-8);position:absolute;inset:0}")}function Od(n){let t,e,r,i,u,o;return{c(){t=A("div"),e=A("textarea"),r=ae(),i=A("div"),k(e,"class","svelte-1ycn1rm"),k(i,"class","svelte-1ycn1rm"),k(t,"class","editor-input card svelte-1ycn1rm")},m(a,s){J(a,t,s),I(t,e),n[9](e),Fi(e,n[0]),I(t,r),I(t,i),n[12](i),u||(o=[ne(e,"input",n[10]),ne(e,"focusout",n[11]),ne(t,"click",n[13])],u=!0)},p(a,[s]){s&1&&Fi(e,a[0])},i:Z,o:Z,d(a){a&&Y(t),n[9](null),n[12](null),u=!1,pe(o)}}}function Id(n,t,e){let{onValueChange:r}=t,{editorInput:i}=t,{value:u}=t,o,a;On(()=>{o.toggleVisibility(!0),a.toggleVisibility(!1)});function s(C){e(0,u=C),l()}function l(){e(1,o.innerHTML="",o),Ya.MarkdownRenderer.renderMarkdown(u,o,i.inputFieldMarkdownRenderChild.filePath,i.inputFieldMarkdownRenderChild)}function h(C){o.toggleVisibility(!0),a.toggleVisibility(!1),l()}function d(C){console.log("focus in"),o.toggleVisibility(!1),a.toggleVisibility(!0),a.focus()}function f(C){gt[C?"unshift":"push"](()=>{a=C,e(2,a)})}function g(){u=this.value,e(0,u)}let v=C=>h(C);function F(C){gt[C?"unshift":"push"](()=>{o=C,e(1,o)})}let S=C=>d(C);return n.$$set=C=>{"onValueChange"in C&&e(5,r=C.onValueChange),"editorInput"in C&&e(6,i=C.editorInput),"value"in C&&e(0,u=C.value)},n.$$.update=()=>{if(n.$$.dirty&33){e:r(u)&&l()}},[u,o,a,h,d,r,i,s,l,f,g,v,F,S]}var su=class extends te{constructor(t){super(),se(this,t,Id,Od,oe,{onValueChange:5,editorInput:6,value:0,updateValue:7,render:8},Md)}get updateValue(){return this.$$.ctx[7]}get render(){return this.$$.ctx[8]}},Ja=su;var Pt=class extends G{constructor(e,r){super(e,r);this.value=""}getValue(){return this.value}setValue(e){var r;this.value=e,(r=this.component)==null||r.updateValue(e)}isEqualValue(e){return this.value==e}getDefaultValue(){return""}getHtmlElement(){if(!this.container)throw new M("");return this.container}render(e){console.debug(`meta-bind | EditorInputField >> render ${this.inputFieldMarkdownRenderChild.uuid}`),this.container=e,this.value=this.inputFieldMarkdownRenderChild.getInitialValue(),this.component=new Ja({target:e,props:{onValueChange:this.onValueChange.bind(this),editorInput:this,value:this.value}}),this.component.render()}destroy(){var e;(e=this.component)==null||e.$destroy()}};Pt.allowInlineCodeBlock=!1;function Ad(n){ge(n,"svelte-1f4vrw6",".image-suggest-input.svelte-1f4vrw6{background:var(--background-secondary);border-radius:var(--meta-bind-plugin-border-radius);border:var(--meta-bind-plugin-border-width) solid var(--background-modifier-border);padding:var(--size-4-2);width:100%}.image-suggest-image.svelte-1f4vrw6{width:100%}.image-suggest-footer.svelte-1f4vrw6{display:flex;flex-direction:row;color:var(--text-normal);align-items:baseline}.image-suggest-footer-text.svelte-1f4vrw6{flex:1;margin-left:var(--size-4-2)}")}function Qa(n){let t,e;return{c(){t=A("img"),k(t,"class","image-suggest-image svelte-1f4vrw6"),un(t.src,e=Kt(n[0]))||k(t,"src",e),k(t,"alt",n[0])},m(r,i){J(r,t,i)},p(r,i){i&1&&!un(t.src,e=Kt(r[0]))&&k(t,"src",e),i&1&&k(t,"alt",r[0])},d(r){r&&Y(t)}}}function Bd(n){let t,e,r,i,u=(n[0]||"no image selected")+"",o,a,s,l,h,d=n[0]&&Qa(n);return{c(){t=A("div"),d&&d.c(),e=ae(),r=A("div"),i=A("span"),o=De(u),a=ae(),s=A("button"),s.textContent="change image",k(i,"class","image-suggest-footer-text svelte-1f4vrw6"),k(s,"class","btn btn-active"),k(r,"class","image-suggest-footer svelte-1f4vrw6"),k(t,"class","image-suggest-input svelte-1f4vrw6")},m(f,g){J(f,t,g),d&&d.m(t,null),I(t,e),I(t,r),I(r,i),I(i,o),I(r,a),I(r,s),l||(h=[ne(s,"click",n[1]),ne(s,"keydown",n[2])],l=!0)},p(f,[g]){f[0]?d?d.p(f,g):(d=Qa(f),d.c(),d.m(t,e)):d&&(d.d(1),d=null),g&1&&u!==(u=(f[0]||"no image selected")+"")&&Te(o,u)},i:Z,o:Z,d(f){f&&Y(t),d&&d.d(),l=!1,pe(h)}}}function Nd(n,t,e){let{showSuggest:r}=t,i;function u(s){e(0,i=s)}function o(s){r()}function a(s){s.key===" "&&r()}return n.$$set=s=>{"showSuggest"in s&&e(3,r=s.showSuggest)},[i,o,a,r,u]}var lu=class extends te{constructor(t){super(),se(this,t,Nd,Bd,oe,{showSuggest:3,updateValue:4},Ad)}get updateValue(){return this.$$.ctx[4]}},Ka=lu;var $e=require("obsidian");var rs=require("obsidian");function Vd(n){ge(n,"svelte-1cuz7a4",".image-card-image.svelte-1cuz7a4{width:100%}.image-card-text.svelte-1cuz7a4{display:block;margin:var(--size-4-2);margin-bottom:var(--size-4-4)}")}function Ld(n){let t,e,r,i,u,o,a,s;return{c(){t=A("div"),e=A("img"),i=ae(),u=A("span"),o=De(n[0]),k(e,"class","image-card-image svelte-1cuz7a4"),un(e.src,r=Kt(n[0]))||k(e,"src",r),k(e,"alt",n[0]),k(u,"class","image-card-text svelte-1cuz7a4"),k(t,"class","image-card svelte-1cuz7a4")},m(l,h){J(l,t,h),I(t,e),I(t,i),I(t,u),I(u,o),a||(s=ne(t,"click",n[2]),a=!0)},p(l,[h]){h&1&&!un(e.src,r=Kt(l[0]))&&k(e,"src",r),h&1&&k(e,"alt",l[0]),h&1&&Te(o,l[0])},i:Z,o:Z,d(l){l&&Y(t),a=!1,s()}}}function Rd(n,t,e){let{image:r}=t,{onSelect:i}=t,u=()=>i(r);return n.$$set=o=>{"image"in o&&e(0,r=o.image),"onSelect"in o&&e(1,i=o.onSelect)},[r,i,u]}var cu=class extends te{constructor(t){super(),se(this,t,Rd,Ld,oe,{image:0,onSelect:1},Vd)}},Xa=cu;function Pd(n){ge(n,"svelte-1f80gwc",".image-card-grid.svelte-1f80gwc{display:grid;grid-template-columns:repeat(auto-fit, minmax(min(500px, 100%), 1fr));gap:var(--size-4-4)}")}function es(n,t,e){let r=n.slice();return r[2]=t[e],r}function ts(n){let t,e;return t=new Xa({props:{image:n[2],onSelect:n[1]}}),{c(){Dt(t.$$.fragment)},m(r,i){rt(t,r,i),e=!0},p(r,i){let u={};i&1&&(u.image=r[2]),i&2&&(u.onSelect=r[1]),t.$set(u)},i(r){e||(Ee(t.$$.fragment,r),e=!0)},o(r){Ie(t.$$.fragment,r),e=!1},d(r){ze(t,r)}}}function jd(n){let t,e,r=n[0],i=[];for(let o=0;o<r.length;o+=1)i[o]=ts(es(n,r,o));let u=o=>Ie(i[o],1,1,()=>{i[o]=null});return{c(){t=A("div");for(let o=0;o<i.length;o+=1)i[o].c();k(t,"class","image-card-grid svelte-1f80gwc")},m(o,a){J(o,t,a);for(let s=0;s<i.length;s+=1)i[s].m(t,null);e=!0},p(o,[a]){if(a&3){r=o[0];let s;for(s=0;s<r.length;s+=1){let l=es(o,r,s);i[s]?(i[s].p(l,a),Ee(i[s],1)):(i[s]=ts(l),i[s].c(),Ee(i[s],1),i[s].m(t,null))}for(kr(),s=r.length;s<i.length;s+=1)u(s);Tr()}},i(o){if(!e){for(let a=0;a<r.length;a+=1)Ee(i[a]);e=!0}},o(o){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)Ie(i[a]);e=!1},d(o){o&&Y(t),Sr(i,o)}}}function $d(n,t,e){let{options:r}=t,{onSelect:i}=t;return n.$$set=u=>{"options"in u&&e(0,r=u.options),"onSelect"in u&&e(1,i=u.onSelect)},[r,i]}var du=class extends te{constructor(t){super(),se(this,t,$d,jd,oe,{options:0,onSelect:1},Pd)}},ns=du;var Gr=class extends rs.Modal{constructor(e,r,i){super(e);this.options=r,this.onSelect=i}onOpen(){this.modalEl.style.width="100%",new ns({target:this.contentEl,props:{options:this.options,onSelect:e=>{this.onSelect(e),this.close()}}})}};var jt=class extends G{constructor(e,r){super(e,r);this.value="",this.options=[]}getValue(){return this.value}setValue(e){var r;e=e!=null?e:this.getDefaultValue(),this.value=e,(r=this.component)==null||r.updateValue(e)}isEqualValue(e){return this.value==e}getDefaultValue(){return""}getHtmlElement(){if(!this.container)throw new M("");return this.container}isImageExtension(e){return["apng","avif","gif","jpg","jpeg","jfif","pjpeg","pjp","png","svg","webp"].contains(e)}async getOptions(){let e=this.inputFieldMarkdownRenderChild.getArguments("optionQuery"),r=[];for(let u of e){let o=u.value;if(o.startsWith('"')&&o.endsWith('"'))o=o.substring(1,o.length-1);else{let s=new We("expected suggest option query for image suggester to start and end with double quotation marks");new $e.Notice(`meta-bind | ${s.message}`),console.warn(s);continue}let a=this.inputFieldMarkdownRenderChild.plugin.app.vault.getAbstractFileByPath(o);if(a==null){let s=new We(`expected suggest option query ${o} for image suggester to exist`);new $e.Notice(`meta-bind | ${s.message}`),console.warn(s);continue}if(!(a instanceof $e.TFolder)){let s=new We(`expected suggest option query ${u.value} for image suggester to be a folder`);new $e.Notice(`meta-bind | ${s.message}`),console.warn(s);continue}for(let s of a.children)s instanceof $e.TFile&&this.isImageExtension(s.extension)&&r.push(s.path)}let i=this.inputFieldMarkdownRenderChild.getArguments("option");for(let u of i){let o=this.inputFieldMarkdownRenderChild.plugin.app.vault.getAbstractFileByPath(u.value);if(!o){let a=new We(`expected suggest option ${u.value} for image suggester to exist`);new $e.Notice(`meta-bind | ${a.message}`),console.warn(a);continue}if(!(o instanceof $e.TFile)){let a=new We(`expected suggest option ${u.value} for image suggester to be a file`);new $e.Notice(`meta-bind | ${a.message}`),console.warn(a);continue}if(!this.isImageExtension(o.extension)){let a=new We(`expected suggest option ${u.value} for image suggester to be an image file`);new $e.Notice(`meta-bind | ${a.message}`),console.warn(a);continue}r.push(u.value)}this.options=r}async showSuggest(){await this.getOptions(),new Gr(this.inputFieldMarkdownRenderChild.plugin.app,this.options,e=>{this.setValue(e),this.onValueChange(e)}).open()}render(e){console.debug(`meta-bind | SuggestInputField >> render ${this.inputFieldMarkdownRenderChild.uuid}`),this.container=e,this.value=this.inputFieldMarkdownRenderChild.getInitialValue(),this.component=new Ka({target:e,props:{showSuggest:()=>this.showSuggest()}}),this.component.updateValue(this.value)}destroy(){var e;(e=this.component)==null||e.$destroy()}};jt.allowInlineCodeBlock=!1;var Yr=class{static createInputField(t,e){if(t!=="invalid"&&Yr.checkInputFieldMarkdownRenderChildTypeAllowed(t,e.type,e.inputFieldMarkdownRenderChild.plugin),t==="toggle")return new Gt(e.inputFieldMarkdownRenderChild,e.onValueChanged);if(t==="slider")return new Xt(e.inputFieldMarkdownRenderChild,e.onValueChanged);if(t==="text")return new Yt(e.inputFieldMarkdownRenderChild,e.onValueChanged);if(t==="text_area")return new en(e.inputFieldMarkdownRenderChild,e.onValueChanged);if(t==="select")return new pt(e.inputFieldMarkdownRenderChild,e.onValueChanged);if(t==="multi_select")return new tn(e.inputFieldMarkdownRenderChild,e.onValueChanged);if(t==="date")return new nn(e.inputFieldMarkdownRenderChild,e.onValueChanged);if(t==="time")return new rn(e.inputFieldMarkdownRenderChild,e.onValueChanged);if(t==="date_picker")return new on(e.inputFieldMarkdownRenderChild,e.onValueChanged);if(t==="number")return new an(e.inputFieldMarkdownRenderChild,e.onValueChanged);if(t==="suggester")return new gn(e.inputFieldMarkdownRenderChild,e.onValueChanged);if(t==="editor")return new Pt(e.inputFieldMarkdownRenderChild,e.onValueChanged);if(t==="imageSuggester")return new jt(e.inputFieldMarkdownRenderChild,e.onValueChanged)}static checkInputFieldMarkdownRenderChildTypeAllowed(t,e,r){if(r.settings.ignoreCodeBlockRestrictions)return;let i=Yr.allowCodeBlockMap[t];if(e===1&&!i.codeBlock)throw new z(`'${t}' is not allowed as code block`);if(e===0&&!i.inlineCodeBlock)throw new z(`'${t}' is not allowed as inline code block`)}},Kn=Yr;Kn.allowCodeBlockMap={["toggle"]:{codeBlock:Gt.allowCodeBlock,inlineCodeBlock:Gt.allowInlineCodeBlock},["slider"]:{codeBlock:Xt.allowCodeBlock,inlineCodeBlock:Xt.allowInlineCodeBlock},["text"]:{codeBlock:Yt.allowCodeBlock,inlineCodeBlock:Yt.allowInlineCodeBlock},["text_area"]:{codeBlock:en.allowCodeBlock,inlineCodeBlock:en.allowInlineCodeBlock},["select"]:{codeBlock:pt.allowCodeBlock,inlineCodeBlock:pt.allowInlineCodeBlock},["multi_select"]:{codeBlock:tn.allowCodeBlock,inlineCodeBlock:tn.allowInlineCodeBlock},["date"]:{codeBlock:nn.allowCodeBlock,inlineCodeBlock:nn.allowInlineCodeBlock},["time"]:{codeBlock:rn.allowCodeBlock,inlineCodeBlock:rn.allowInlineCodeBlock},["date_picker"]:{codeBlock:on.allowCodeBlock,inlineCodeBlock:on.allowInlineCodeBlock},["number"]:{codeBlock:an.allowCodeBlock,inlineCodeBlock:an.allowInlineCodeBlock},["suggester"]:{codeBlock:gn.allowCodeBlock,inlineCodeBlock:gn.allowInlineCodeBlock},["editor"]:{codeBlock:Pt.allowCodeBlock,inlineCodeBlock:Pt.allowInlineCodeBlock},["imageSuggester"]:{codeBlock:jt.allowCodeBlock,inlineCodeBlock:jt.allowInlineCodeBlock}};var Qr=Cn(En());var Jr=class extends is.MarkdownRenderChild{constructor(e,r,i,u,o,a){super(e);if(i.error?this.error=i.error instanceof Error?i.error.message:i.error:this.error="",this.filePath=o,this.uuid=a,this.plugin=u,this.type=r,this.fullDeclaration=i.fullDeclaration,this.metadataValueUpdateQueue=[],this.inputFieldValueUpdateQueue=[],this.intervalCounter=0,this.inputFieldDeclaration=i,!this.error)try{this.inputFieldDeclaration.isBound&&this.parseBindTarget(),this.inputField=Kn.createInputField(this.inputFieldDeclaration.inputFieldType,{type:r,inputFieldMarkdownRenderChild:this,onValueChanged:this.updateMetadataManager.bind(this)})}catch(s){this.error=s.message,console.warn(s)}}parseBindTarget(){if(!this.inputFieldDeclaration)throw new M("inputFieldDeclaration is undefined, can not parse bind target");let e=this.inputFieldDeclaration.bindTarget.split("#"),r,i;if(e.length===1)r=this.filePath,i=this.inputFieldDeclaration.bindTarget;else if(e.length===2)r=e[0],i=e[1];else throw new mt("bind target may only contain one '#' to specify the metadata field");try{this.bindTargetMetadataPath=(0,Qr.parsePath)(i)}catch(o){if(o instanceof Error)throw new mt(`bind target parsing error: ${o==null?void 0:o.message}`)}let u=this.plugin.getFilesByName(r);if(u.length===0)throw new mt("bind target file not found");if(u.length===1)this.bindTargetFile=u[0];else throw new mt("bind target resolves to multiple files, please also specify the file path")}registerSelfToMetadataManager(){var e,r;if(!(!((e=this.inputFieldDeclaration)!=null&&e.isBound)||!this.bindTargetFile||!this.bindTargetMetadataPath||((r=this.bindTargetMetadataPath)==null?void 0:r.length)===0))return this.plugin.metadataManager.register(this.bindTargetFile,i=>{if(!this.inputField)throw new M("inputField is undefined, can not update inputField");this.inputField.isEqualValue(i)||this.inputField.setValue(i)},this.bindTargetMetadataPath,this.uuid)}unregisterSelfFromMetadataManager(){var e,r;!((e=this.inputFieldDeclaration)!=null&&e.isBound)||!this.bindTargetFile||!this.bindTargetMetadataPath||((r=this.bindTargetMetadataPath)==null?void 0:r.length)===0||this.plugin.metadataManager.unregister(this.bindTargetFile,this.uuid)}updateMetadataManager(e){var r,i;!((r=this.inputFieldDeclaration)!=null&&r.isBound)||!this.bindTargetFile||!this.bindTargetMetadataPath||((i=this.bindTargetMetadataPath)==null?void 0:i.length)===0||this.plugin.metadataManager.updatePropertyInMetadataFileCache(e,this.bindTargetMetadataPath,this.bindTargetFile,this.uuid)}getInitialValue(){var e,r,i;if(((e=this.inputFieldDeclaration)==null?void 0:e.isBound)&&this.bindTargetMetadataPath){let u=(0,Qr.traverseObjectByPath)(this.bindTargetMetadataPath,(r=this.metadataCache)==null?void 0:r.metadata);return console.debug(`meta-bind | InputFieldMarkdownRenderChild >> setting initial value to ${u} (typeof ${typeof u}) for input field ${this.uuid}`),u!=null?u:(i=this.inputField)==null?void 0:i.getDefaultValue()}}getArguments(e){if(this.inputFieldDeclaration.error)throw new M("inputFieldDeclaration has errors, can not retrieve arguments");return this.inputFieldDeclaration.argumentContainer.arguments.filter(r=>r.identifier===e)}getArgument(e){return this.getArguments(e).at(0)}addCardContainer(){return this.type===1&&(Qt(this.getArgument("showcase"))||Qt(this.getArgument("title"))||this.inputFieldDeclaration.inputFieldType==="select"||this.inputFieldDeclaration.inputFieldType==="multi_select")}async onload(){console.log("meta-bind | InputFieldMarkdownRenderChild >> load",this);let e=createDiv();if(e.addClass("meta-bind-plugin-input-wrapper"),this.containerEl.addClass("meta-bind-plugin-input"),this.error){this.containerEl.empty(),this.containerEl.createEl("span",{text:this.fullDeclaration,cls:"meta-bind-code"}),e.innerText=` -> ERROR: ${this.error}`,e.addClass("meta-bind-plugin-error"),this.containerEl.appendChild(e);return}if(!this.inputField){this.containerEl.empty(),this.containerEl.createEl("span",{text:this.fullDeclaration,cls:"meta-bind-code"}),e.innerText=` -> ERROR: ${new M("input field is undefined and error is empty").message}`,e.addClass("meta-bind-plugin-error"),this.containerEl.appendChild(e);return}this.metadataCache=this.registerSelfToMetadataManager(),this.plugin.registerInputFieldMarkdownRenderChild(this),this.inputField.render(e);let r=this.getArguments("class");r&&this.inputField.getHtmlElement().addClasses(r.map(o=>o.value).flat()),this.containerEl.empty();let i=this.getArgument("showcase"),u=this.getArgument("title");if(this.addCardContainer()){let o=this.containerEl.createDiv({cls:"meta-bind-plugin-card"});u&&o.createEl("h3",{text:u.value}),o.appendChild(e),i&&o.createEl("code",{text:` ${this.fullDeclaration} `})}else this.containerEl.appendChild(e)}onunload(){var e;console.log("meta-bind | InputFieldMarkdownRenderChild >> unload",this),(e=this.inputField)==null||e.destroy(),this.plugin.unregisterInputFieldMarkdownRenderChild(this),this.unregisterSelfFromMetadataManager(),super.onunload()}};var gu=Cn(ss());var pu=Cn(En()),vg=gu.Internal.getMetaDataFromFileContent,of=gu.Internal.getMetadataFromFileCache,ei=class{constructor(t){this.updateCycleThreshold=5;this.plugin=t,this.cache=[],this.plugin.registerEvent(this.plugin.app.metadataCache.on("changed",this.updateMetadataFileCacheOnFrontmatterUpdate.bind(this))),this.interval=window.setInterval(()=>this.update(),this.plugin.settings.syncInterval)}register(t,e,r,i){let u=this.getCacheForFile(t);if(u)return console.debug(`meta-bind | MetadataManager >> registered ${i} to existing file cache ${t.path} -> ${r}`),u.listeners.push({onCacheUpdate:e,metadataPath:r,uuid:i}),u;{console.debug(`meta-bind | MetadataManager >> registered ${i} to newly created file cache ${t.path} -> ${r}`);let o={file:t,metadata:of(t,this.plugin),listeners:[{onCacheUpdate:e,metadataPath:r,uuid:i}],cyclesSinceLastUpdate:0,changed:!1};return console.log(`meta-bind | MetadataManager >> loaded metadata for file ${t.path}`,o.metadata),this.cache.push(o),o}}unregister(t,e){let r=this.getCacheForFile(t);!r||(console.debug(`meta-bind | MetadataManager >> unregistered ${e} to from file cache ${t.path}`),r.listeners=r.listeners.filter(i=>i.uuid!==e),r.listeners.length===0&&(console.debug(`meta-bind | MetadataManager >> deleted unused file cache ${t.path}`),this.cache=this.cache.filter(i=>i.file.path!==t.path)))}getCacheForFile(t){return this.cache.find(e=>e.file.path===t.path)}update(){for(let t of this.cache)t.changed&&this.updateFrontmatter(t),t.cyclesSinceLastUpdate+=1}async updateFrontmatter(t){console.debug(`meta-bind | MetadataManager >> updating frontmatter of ${t.file.path} to`,t.metadata),await this.plugin.app.fileManager.processFrontMatter(t.file,e=>{t.changed=!1,Object.assign(e,t.metadata)})}updateMetadataFileCache(t,e,r){console.debug(`meta-bind | MetadataManager >> updating metadata in ${e.path} metadata cache to`,t);let i=this.getCacheForFile(e);!i||(i.metadata=t,i.cyclesSinceLastUpdate=0,this.notifyListeners(i,void 0,r))}updatePropertyInMetadataFileCache(t,e,r,i){console.debug(`meta-bind | MetadataManager >> updating ${e} in ${r.path} metadata cache to`,t);let u=this.getCacheForFile(r);if(!u)return;let{parent:o,child:a}=Vu(e,u.metadata);if(o.value===void 0)throw Error(`The parent of "${e}" does not exist in Object, please create the parent first`);if(a.value===t){console.debug(`meta-bind | MetadataManager >> skipping redundant update of ${e} in ${r.path} metadata cache`,t);return}o.value[a.key]=t,u.cyclesSinceLastUpdate=0,u.changed=!0,this.notifyListeners(u,e,i)}updateMetadataFileCacheOnFrontmatterUpdate(t,e,r){let i=this.getCacheForFile(t);if(!i||i.cyclesSinceLastUpdate<this.updateCycleThreshold)return;let u=Object.assign({},r.frontmatter);delete u.position,console.debug(`meta-bind | MetadataManager >> updating ${t} on frontmatter update`,u),i.metadata=u,i.cyclesSinceLastUpdate=0,i.changed=!0,this.notifyListeners(i)}notifyListeners(t,e,r){let i;e&&(i=(0,pu.traverseObjectByPath)(e,t.metadata));for(let u of t.listeners)r&&r===u.uuid||(e?Nu(e,u.metadataPath)&&(console.debug(`meta-bind | MetadataManager >> notifying input field ${u.uuid} of updated metadata`),u.onCacheUpdate(i)):(console.debug(`meta-bind | MetadataManager >> notifying input field ${u.uuid} of updated metadata`),u.onCacheUpdate((0,pu.traverseObjectByPath)(u.metadataPath,t.metadata))))}};var ti=class extends ls.Plugin{constructor(){super(...arguments);this.settings=null}async onload(){console.log("meta-bind | Main >> load"),await this.loadSettings(),H.dateFormat=this.settings.preferredDateFormat,ke.parseTemplates(this.settings.inputTemplates),this.activeMarkdownInputFields=[],this.metadataManager=new ei(this),this.registerMarkdownPostProcessor((e,r)=>{let i=e.querySelectorAll("code");for(let u=0;u<i.length;u++){let o=i.item(u),a=o.innerText;a.startsWith("INPUT[")&&a.endsWith("]")&&r.addChild(this.buildInputFieldMarkdownRenderChild(a,r.sourcePath,o,0))}},100),this.registerMarkdownCodeBlockProcessor("meta-bind",(e,r,i)=>{let u=r,o=e.replace(/\n/g,"");o.startsWith("INPUT[")&&o.endsWith("]")&&i.addChild(this.buildInputFieldMarkdownRenderChild(o,i.sourcePath,u,1))}),this.addSettingTab(new sr(this.app,this))}buildInputFieldMarkdownRenderChild(e,r,i,u=0){return typeof e=="string"?e=ke.parseString(e):e=ke.parseDeclaration(e),new Jr(i,u,e,this,r,crypto.randomUUID())}buildDeclaration(e,r,i,u,o,a){var s,l,h;if(typeof e=="string")return ke.parseString(e);{let d=e;if(d.inputFieldType=(s=i!=null?i:d.inputFieldType)!=null?s:"invalid",d.isBound=(l=u!=null?u:d.isBound)!=null?l:!1,d.bindTarget=(h=o!=null?o:d.bindTarget)!=null?h:void 0,d.isBound&&!d.bindTarget)throw new mt("input field declaration is bound but bind target is undefined");return ke.parseDeclaration(d,r,a)}}onunload(){console.log("meta-bind | Main >> unload");for(let e of this.activeMarkdownInputFields)e.unload()}registerInputFieldMarkdownRenderChild(e){console.debug(`meta-bind | Main >> registered input field ${e.uuid}`),this.activeMarkdownInputFields.push(e)}unregisterInputFieldMarkdownRenderChild(e){console.debug(`meta-bind | Main >> unregistered input field ${e.uuid}`),this.activeMarkdownInputFields=this.activeMarkdownInputFields.filter(r=>r.uuid!==e.uuid)}getFilesByName(e){let r=Au(e),i=r?_n(e):li(_n(e)),u=this.app.vault.getMarkdownFiles(),o=[];for(let a of u)r?_n(a.path)===i&&o.push(a):li(_n(a.name))===i&&o.push(a);return o}async loadSettings(){console.log("meta-bind | Main >> settings load"),this.settings=Object.assign({},nt,await this.loadData())}async saveSettings(){console.log("meta-bind | Main >> settings save"),H.dateFormat=this.settings.preferredDateFormat,ke.parseTemplates(this.settings.inputTemplates),await this.saveData(this.settings)}};
